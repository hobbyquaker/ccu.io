{"version":"0.2.0","files":{"/Users/kris/q-io/spec/fs/boot-directory-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":8},"8":{"index":8,"count":8},"9":{"index":9,"count":8},"10":{"index":10,"count":8},"11":{"index":11,"count":8},"12":{"index":12,"count":8},"13":{"index":13,"count":8},"14":{"index":14,"count":8}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":8},"2":{"index":2,"count":8}},"hash":"1b02b3ee233638627b6bb0767be78887","instrumentor":{"blockCounter":3,"nodeCounter":15,"source":"var FS = require(\"../../fs-boot\");\n\nvar specs = [\n    {\n        \"from\": \"foo\",\n        \"to\": \"\"\n    },\n    {\n        \"from\": \"\",\n        \"to\": \"..\"\n    },\n    {\n        \"from\": \".\",\n        \"to\": \"..\"\n    },\n    {\n        \"from\": \"..\",\n        \"to\": \"../..\"\n    },\n    {\n        \"from\": \"../foo\",\n        \"to\": \"..\"\n    },\n    {\n        \"from\": \"/foo/bar\",\n        \"to\": \"/foo\"\n    },\n    {\n        \"from\": \"/foo\",\n        \"to\": \"/\"\n    },\n    {\n        \"from\": \"/\",\n        \"to\": \"/\"\n    }\n];\n\ndescribe(\"fs-boot directory\", function () {\n    specs.forEach(function (spec) {\n        it(\"should parse \" + JSON.stringify(spec.from), function () {\n            expect(FS.directory(spec.from)).toBe(spec.to);\n        });\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}},"id":0},"1":{"loc":{"start":{"line":1,"column":9},"end":{"line":1,"column":33}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":36,"column":2}},"id":2},"3":{"loc":{"start":{"line":38,"column":0},"end":{"line":44,"column":3}},"id":3},"4":{"loc":{"start":{"line":38,"column":0},"end":{"line":44,"column":2}},"id":4},"5":{"loc":{"start":{"line":39,"column":4},"end":{"line":43,"column":7}},"id":5},"6":{"loc":{"start":{"line":39,"column":4},"end":{"line":43,"column":6}},"id":6},"7":{"loc":{"start":{"line":40,"column":8},"end":{"line":42,"column":11}},"id":7},"8":{"loc":{"start":{"line":40,"column":8},"end":{"line":42,"column":10}},"id":8},"9":{"loc":{"start":{"line":40,"column":11},"end":{"line":40,"column":54}},"id":9},"10":{"loc":{"start":{"line":40,"column":29},"end":{"line":40,"column":54}},"id":10},"11":{"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":58}},"id":11},"12":{"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":57}},"id":12},"13":{"loc":{"start":{"line":41,"column":18},"end":{"line":41,"column":43}},"id":13},"14":{"loc":{"start":{"line":41,"column":19},"end":{"line":41,"column":42}},"id":14}}}},"/Users/kris/q-io/fs-boot.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":3922},"14":{"index":14,"count":3922},"15":{"index":15,"count":3921},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":3922},"27":{"index":27,"count":1},"28":{"index":28,"count":2337},"29":{"index":29,"count":2337},"30":{"index":30,"count":2337},"31":{"index":31,"count":2337},"32":{"index":32,"count":2337},"38":{"index":38,"count":2337},"39":{"index":39,"count":2337},"40":{"index":40,"count":647},"41":{"index":41,"count":4},"42":{"index":42,"count":2333},"43":{"index":43,"count":1},"44":{"index":44,"count":703},"45":{"index":45,"count":703},"46":{"index":46,"count":11},"47":{"index":47,"count":10},"48":{"index":48,"count":10},"49":{"index":49,"count":693},"50":{"index":50,"count":693},"51":{"index":51,"count":1},"99":{"index":99,"count":1},"100":{"index":100,"count":799},"101":{"index":101,"count":799},"102":{"index":102,"count":799},"103":{"index":103,"count":2296},"104":{"index":104,"count":1497},"105":{"index":105,"count":1497},"106":{"index":106,"count":1497},"107":{"index":107,"count":1497},"108":{"index":108,"count":1411},"109":{"index":109,"count":1411},"110":{"index":110,"count":1411},"111":{"index":111,"count":1411},"112":{"index":112,"count":736},"113":{"index":113,"count":736},"114":{"index":114,"count":736},"115":{"index":115,"count":736},"116":{"index":116,"count":736},"117":{"index":117,"count":3646},"118":{"index":118,"count":2235},"119":{"index":119,"count":2235},"120":{"index":120,"count":2235},"121":{"index":121,"count":2235},"122":{"index":122,"count":2185},"123":{"index":123,"count":1781},"124":{"index":124,"count":3},"125":{"index":125,"count":3},"126":{"index":126,"count":2},"127":{"index":127,"count":2},"128":{"index":128,"count":1776},"129":{"index":129,"count":1776},"130":{"index":130,"count":799},"131":{"index":131,"count":799},"132":{"index":132,"count":799},"133":{"index":133,"count":799},"134":{"index":134,"count":799},"135":{"index":135,"count":1},"136":{"index":136,"count":2028},"137":{"index":137,"count":2028},"138":{"index":138,"count":2028},"139":{"index":139,"count":2},"140":{"index":140,"count":2026},"141":{"index":141,"count":2026},"142":{"index":142,"count":1},"143":{"index":143,"count":52},"144":{"index":144,"count":52},"145":{"index":145,"count":1},"146":{"index":146,"count":2026},"149":{"index":149,"count":2026},"150":{"index":150,"count":2026},"151":{"index":151,"count":1},"160":{"index":160,"count":1},"161":{"index":161,"count":96},"162":{"index":162,"count":96},"163":{"index":163,"count":96},"164":{"index":164,"count":96},"165":{"index":165,"count":96},"166":{"index":166,"count":96},"167":{"index":167,"count":94},"168":{"index":168,"count":94},"169":{"index":169,"count":1},"170":{"index":170,"count":1},"171":{"index":171,"count":93},"172":{"index":172,"count":93},"173":{"index":173,"count":2},"174":{"index":174,"count":2},"175":{"index":175,"count":96},"176":{"index":176,"count":96},"177":{"index":177,"count":96},"178":{"index":178,"count":1},"179":{"index":179,"count":51},"180":{"index":180,"count":52},"181":{"index":181,"count":1},"182":{"index":182,"count":88},"183":{"index":183,"count":88},"184":{"index":184,"count":88},"185":{"index":185,"count":88},"190":{"index":190,"count":88},"191":{"index":191,"count":1},"203":{"index":203,"count":1},"205":{"index":205,"count":1}},"blocks":{"0":{"index":0,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":3922},"5":{"index":5,"count":1},"6":{"index":6,"count":2337},"7":{"index":7,"count":2337},"9":{"index":9,"count":4},"10":{"index":10,"count":703},"11":{"index":11,"count":10},"26":{"index":26,"count":799},"27":{"index":27,"count":1497},"28":{"index":28,"count":86},"29":{"index":29,"count":736},"30":{"index":30,"count":2235},"31":{"index":31,"count":454},"32":{"index":32,"count":5},"33":{"index":33,"count":3},"34":{"index":34,"count":2},"36":{"index":36,"count":2},"37":{"index":37,"count":1776},"38":{"index":38,"count":2028},"39":{"index":39,"count":2},"40":{"index":40,"count":52},"41":{"index":41,"count":2026},"43":{"index":43,"count":2026},"46":{"index":46,"count":96},"47":{"index":47,"count":94},"48":{"index":48,"count":1},"49":{"index":49,"count":93},"50":{"index":50,"count":2},"51":{"index":51,"count":88}},"hash":"4d9e40144354c4004e78cc80718347c8","instrumentor":{"blockCounter":54,"nodeCounter":206,"source":"(function (exports) {\n\n// -- kriskowal Kris Kowal Copyright (C) 2009-2010 MIT License\n// -- tlrobinson Tom Robinson TODO\n\n/**\n * Pure JavaScript implementations of file system path\n * manipulation.\n */\n\n// NOTE: this file may be used is the engine bootstrapping\n// process, so any \"requires\" must be accounted for in\n// narwhal.js\n\n/*whatsupdoc*/\n/*markup markdown*/\n\nvar regExpEscape = function (str) {\n    return str.replace(/[-[\\]{}()*+?.\\\\^$|,#\\s]/g, \"\\\\$&\");\n};\n\nvar path = require(\"path\");\n\n/**\n * @name ROOT\n * * `/` on Unix\n * * `\\` on Windows\n */\n\n/**\n * @name SEPARATOR\n * * `/` on Unix\n * * `\\` on Windows\n */\n\n/**\n * @name ALT_SEPARATOR\n * * undefined on Unix\n * * `/` on Windows\n */\n\nexports.ROOT = exports.SEPARATOR = path.sep;\nif (path.sep === \"\\\\\") {\n    exports.ALT_SEPARATOR = \"/\";\n} else {\n    exports.ALT_SEPARATOR = undefined;\n}\n\n// we need to make sure the separator regex is always in sync with the separators.\n// this caches the generated regex and rebuild if either separator changes.\nvar separatorCached, altSeparatorCached, separatorReCached;\n/**\n * @function\n */\nexports.SEPARATORS_RE = function () {\n    if (\n        separatorCached !== exports.SEPARATOR ||\n        altSeparatorCached !== exports.ALT_SEPARATOR\n    ) {\n        separatorCached = exports.SEPARATOR;\n        altSeparatorCached = exports.ALT_SEPARATOR;\n        separatorReCached = new RegExp(\"[\" +\n            (separatorCached || \"\").replace(/[-[\\]{}()*+?.\\\\^$|,#\\s]/g, \"\\\\$&\") +\n            (altSeparatorCached || \"\").replace(/[-[\\]{}()*+?.\\\\^$|,#\\s]/g, \"\\\\$&\") +\n        \"]\", \"g\");\n    }\n    return separatorReCached;\n}\n\n/**\n * separates a path into components.  If the path is\n * absolute, the first path component is the root of the\n * file system, indicated by an empty string on Unix, and a\n * drive letter followed by a colon on Windows.\n * @returns {Array * String}\n */\nexports.split = function (path) {\n    var parts;\n    try {\n        parts = String(path).split(exports.SEPARATORS_RE());\n    } catch (exception) {\n        throw new Error(\"Cannot split \" + (typeof path) + \", \" + JSON.stringify(path));\n    }\n    // this special case helps isAbsolute\n    // distinguish an empty path from an absolute path\n    // \"\" -> [] NOT [\"\"]\n    if (parts.length === 1 && parts[0] === \"\")\n        return [];\n    // \"a\" -> [\"a\"]\n    // \"/a\" -> [\"\", \"a\"]\n    return parts;\n};\n\n/**\n * Takes file system paths as variadic arguments and treats\n * each as a file or directory path and returns the path\n * arrived by traversing into the those paths.  All\n * arguments except for the last must be paths to\n * directories for the result to be meaningful.\n * @returns {String} path\n */\nexports.join = function () {\n    if (arguments.length === 1 && Array.isArray(arguments[0]))\n        return exports.normal.apply(exports, arguments[0]);\n    return exports.normal.apply(exports, arguments);\n};\n\n/**\n * Takes file system paths as variadic arguments and treats\n * each path as a location, in the URL sense, resolving each\n * new location based on the previous.  For example, if the\n * first argument is the absolute path of a JSON file, and\n * the second argument is a path mentioned in that JSON\n * file, `resolve` returns the absolute path of the\n * mentioned file.\n * @returns {String} path\n */\nexports.resolve = function () {\n    var root = \"\";\n    var parents = [];\n    var children = [];\n    var leaf = \"\";\n    for (var i = 0; i < arguments.length; i++) {\n        var path = String(arguments[i]);\n        if (path == \"\")\n            continue;\n        var parts = path.split(exports.SEPARATORS_RE());\n        if (exports.isAbsolute(path)) {\n            root = parts.shift() + exports.SEPARATOR;\n            parents = [];\n            children = [];\n        }\n        leaf = parts.pop();\n        if (leaf == \".\" || leaf == \"..\") {\n            parts.push(leaf);\n            leaf = \"\";\n        }\n        for (var j = 0; j < parts.length; j++) {\n            var part = parts[j];\n            if (part == \".\" || part == \"\") {\n            } else if (part == \"..\") {\n                if (children.length) {\n                    children.pop();\n                } else {\n                    if (root) {\n                    } else {\n                        parents.push(\"..\");\n                    }\n                }\n            } else {\n                children.push(part);\n            }\n        };\n    }\n    path = parents.concat(children).join(exports.SEPARATOR);\n    if (path) leaf = exports.SEPARATOR + leaf;\n    return root + path + leaf;\n};\n\n/**\n * Takes paths as any number of arguments and reduces them\n * into a single path in normal form, removing all \".\" path\n * components, and reducing \"..\" path components by removing\n * the previous path component if possible.\n * @returns {String} path\n */\nexports.normal = function () {\n    var root = \"\";\n    var parents = [];\n    var children = [];\n    for (var i = 0, ii = arguments.length; i < ii; i++) {\n        var path = String(arguments[i]);\n        // empty paths have no affect\n        if (path === \"\")\n            continue;\n        var parts = path.split(exports.SEPARATORS_RE());\n        if (exports.isAbsolute(path)) {\n            root = parts.shift() + exports.SEPARATOR;\n            parents = [];\n            children = [];\n        }\n        for (var j = 0, jj = parts.length; j < jj; j++) {\n            var part = parts[j];\n            if (part == \".\" || part == \"\") {\n            } else if (part == \"..\") {\n                if (children.length) {\n                    children.pop();\n                } else {\n                    if (root) {\n                    } else {\n                        parents.push(\"..\");\n                    }\n                }\n            } else {\n                children.push(part);\n            }\n        }\n    }\n    path = parents.concat(children).join(exports.SEPARATOR);\n    return root + path;\n};\n\n/***\n * @returns {Boolean} whether the given path begins at the\n * root of the file system or a drive letter.\n */\nexports.isAbsolute = function (path) {\n    // for absolute paths on any operating system,\n    // the first path component always determines\n    // whether it is relative or absolute.  On Unix,\n    // it is empty, so [\"\", \"foo\"].join(\"/\") == \"/foo\",\n    // \"/foo\".split(\"/\") == [\"\", \"foo\"].\n    var parts = exports.split(path);\n    // split(\"\") == [].  \"\" is not absolute.\n    // split(\"/\") == [\"\", \"\"] is absolute.\n    // split(?) == [\"\"] does not occur.\n    if (parts.length == 0)\n        return false;\n    return exports.isRoot(parts[0]);\n};\n\n/**\n * @returns {Boolean} whether the given path does not begin\n * at the root of the file system or a drive letter.\n */\nexports.isRelative = function (path) {\n    return !exports.isAbsolute(path);\n};\n\n/**\n * @returns {Boolean} whether the given path component\n * corresponds to the root of the file system or a drive\n * letter, as applicable.\n */\nexports.isRoot = function (first) {\n    if (exports.SEPARATOR === \"\\\\\") {\n        return /[a-zA-Z]:$/.test(first);\n    } else {\n        return first == \"\";\n    }\n};\n\n/**\n * @returns {String} the Unix root path or corresponding\n * Windows drive for a given path.\n */\nexports.root = function (path) {\n    if (!exports.isAbsolute(path))\n        path = require(\"./fs\").absolute(path);\n    var parts = exports.split(path);\n    return exports.join(parts[0], \"\");\n};\n\n/**\n * @returns {String} the parent directory of the given path.\n */\nexports.directory = function (path) {\n    path = exports.normal(path);\n    var absolute = exports.isAbsolute(path);\n    var parts = exports.split(path);\n    // XXX needs to be sensitive to the root for\n    // Windows compatibility\n    if (parts.length) {\n        if (parts[parts.length - 1] == \"..\") {\n            parts.push(\"..\");\n        } else {\n            parts.pop();\n        }\n    } else {\n        parts.unshift(\"..\");\n    }\n    return parts.join(exports.SEPARATOR) || (\n        exports.isRelative(path) ?\n        \"\" : exports.ROOT\n    );\n};\n\n/**\n * @returns {String} the last component of a path, without\n * the given extension if the extension is provided and\n * matches the given file.\n * @param {String} path\n * @param {String} extention an optional extention to detect\n * and remove if it exists.\n */\nexports.base = function (path, extension) {\n    var base = path.split(exports.SEPARATORS_RE()).pop();\n    if (extension)\n        base = base.replace(\n            new RegExp(regExpEscape(extension) + \"$\"),\n            \"\"\n        );\n    return base;\n};\n\n/**\n * @returns {String} the extension (e.g., `txt`) of the file\n * at the given path.\n */\nexports.extension = function (path) {\n    path = exports.base(path);\n    path = path.replace(/^\\.*/, \"\");\n    var index = path.lastIndexOf(\".\");\n    return index <= 0 ? \"\" : path.substring(index);\n};\n\n})(typeof exports !== \"undefined\" ? exports : FS_BOOT = {});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":307,"column":60}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":307,"column":59}},"id":1},"2":{"loc":{"start":{"line":18,"column":0},"end":{"line":20,"column":2}},"id":2},"3":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":59}},"id":3},"4":{"loc":{"start":{"line":19,"column":11},"end":{"line":19,"column":58}},"id":4},"5":{"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":27}},"id":5},"6":{"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":26}},"id":6},"7":{"loc":{"start":{"line":42,"column":0},"end":{"line":42,"column":44}},"id":7},"8":{"loc":{"start":{"line":43,"column":4},"end":{"line":43,"column":21}},"id":8},"9":{"loc":{"start":{"line":44,"column":4},"end":{"line":44,"column":32}},"id":9},"10":{"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":38}},"id":10},"11":{"loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":59}},"id":11},"12":{"loc":{"start":{"line":55,"column":0},"end":{"line":77,"column":0}},"id":12},"13":{"loc":{"start":{"line":57,"column":8},"end":{"line":58,"column":52}},"id":13},"14":{"loc":{"start":{"line":57,"column":8},"end":{"line":57,"column":45}},"id":14},"15":{"loc":{"start":{"line":58,"column":8},"end":{"line":58,"column":52}},"id":15},"16":{"loc":{"start":{"line":60,"column":8},"end":{"line":60,"column":44}},"id":16},"17":{"loc":{"start":{"line":61,"column":8},"end":{"line":61,"column":51}},"id":17},"18":{"loc":{"start":{"line":62,"column":8},"end":{"line":65,"column":18}},"id":18},"19":{"loc":{"start":{"line":62,"column":39},"end":{"line":65,"column":11}},"id":19},"20":{"loc":{"start":{"line":62,"column":39},"end":{"line":64,"column":82}},"id":20},"21":{"loc":{"start":{"line":62,"column":39},"end":{"line":63,"column":79}},"id":21},"22":{"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":79}},"id":22},"23":{"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":35}},"id":23},"24":{"loc":{"start":{"line":64,"column":12},"end":{"line":64,"column":82}},"id":24},"25":{"loc":{"start":{"line":64,"column":12},"end":{"line":64,"column":38}},"id":25},"26":{"loc":{"start":{"line":67,"column":4},"end":{"line":67,"column":29}},"id":26},"27":{"loc":{"start":{"line":77,"column":0},"end":{"line":92,"column":2}},"id":27},"28":{"loc":{"start":{"line":78,"column":4},"end":{"line":78,"column":14}},"id":28},"29":{"loc":{"start":{"line":80,"column":8},"end":{"line":80,"column":60}},"id":29},"30":{"loc":{"start":{"line":80,"column":16},"end":{"line":80,"column":59}},"id":30},"31":{"loc":{"start":{"line":80,"column":22},"end":{"line":80,"column":28}},"id":31},"32":{"loc":{"start":{"line":80,"column":35},"end":{"line":80,"column":58}},"id":32},"33":{"loc":{"start":{"line":82,"column":8},"end":{"line":82,"column":87}},"id":33},"34":{"loc":{"start":{"line":82,"column":24},"end":{"line":82,"column":85}},"id":34},"35":{"loc":{"start":{"line":82,"column":24},"end":{"line":82,"column":62}},"id":35},"36":{"loc":{"start":{"line":82,"column":24},"end":{"line":82,"column":55}},"id":36},"37":{"loc":{"start":{"line":82,"column":65},"end":{"line":82,"column":85}},"id":37},"38":{"loc":{"start":{"line":87,"column":8},"end":{"line":87,"column":45}},"id":38},"39":{"loc":{"start":{"line":87,"column":8},"end":{"line":87,"column":26}},"id":39},"40":{"loc":{"start":{"line":87,"column":30},"end":{"line":87,"column":45}},"id":40},"41":{"loc":{"start":{"line":88,"column":8},"end":{"line":88,"column":18}},"id":41},"42":{"loc":{"start":{"line":91,"column":4},"end":{"line":91,"column":17}},"id":42},"43":{"loc":{"start":{"line":102,"column":0},"end":{"line":106,"column":2}},"id":43},"44":{"loc":{"start":{"line":103,"column":8},"end":{"line":103,"column":61}},"id":44},"45":{"loc":{"start":{"line":103,"column":8},"end":{"line":103,"column":30}},"id":45},"46":{"loc":{"start":{"line":103,"column":34},"end":{"line":103,"column":61}},"id":46},"47":{"loc":{"start":{"line":104,"column":8},"end":{"line":104,"column":59}},"id":47},"48":{"loc":{"start":{"line":104,"column":15},"end":{"line":104,"column":58}},"id":48},"49":{"loc":{"start":{"line":105,"column":4},"end":{"line":105,"column":52}},"id":49},"50":{"loc":{"start":{"line":105,"column":11},"end":{"line":105,"column":51}},"id":50},"51":{"loc":{"start":{"line":118,"column":0},"end":{"line":158,"column":2}},"id":51},"52":{"loc":{"start":{"line":119,"column":4},"end":{"line":119,"column":18}},"id":52},"53":{"loc":{"start":{"line":120,"column":4},"end":{"line":120,"column":21}},"id":53},"54":{"loc":{"start":{"line":121,"column":4},"end":{"line":121,"column":22}},"id":54},"55":{"loc":{"start":{"line":122,"column":4},"end":{"line":122,"column":18}},"id":55},"56":{"loc":{"start":{"line":123,"column":20},"end":{"line":123,"column":40}},"id":56},"57":{"loc":{"start":{"line":123,"column":42},"end":{"line":123,"column":45}},"id":57},"58":{"loc":{"start":{"line":124,"column":8},"end":{"line":124,"column":40}},"id":58},"59":{"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":39}},"id":59},"60":{"loc":{"start":{"line":125,"column":12},"end":{"line":125,"column":22}},"id":60},"61":{"loc":{"start":{"line":127,"column":8},"end":{"line":127,"column":56}},"id":61},"62":{"loc":{"start":{"line":127,"column":20},"end":{"line":127,"column":55}},"id":62},"63":{"loc":{"start":{"line":127,"column":31},"end":{"line":127,"column":54}},"id":63},"64":{"loc":{"start":{"line":128,"column":12},"end":{"line":128,"column":36}},"id":64},"65":{"loc":{"start":{"line":129,"column":12},"end":{"line":129,"column":53}},"id":65},"66":{"loc":{"start":{"line":129,"column":19},"end":{"line":129,"column":52}},"id":66},"67":{"loc":{"start":{"line":129,"column":19},"end":{"line":129,"column":32}},"id":67},"68":{"loc":{"start":{"line":130,"column":12},"end":{"line":130,"column":25}},"id":68},"69":{"loc":{"start":{"line":131,"column":12},"end":{"line":131,"column":26}},"id":69},"70":{"loc":{"start":{"line":133,"column":8},"end":{"line":133,"column":27}},"id":70},"71":{"loc":{"start":{"line":133,"column":15},"end":{"line":133,"column":26}},"id":71},"72":{"loc":{"start":{"line":134,"column":12},"end":{"line":134,"column":39}},"id":72},"73":{"loc":{"start":{"line":134,"column":12},"end":{"line":134,"column":23}},"id":73},"74":{"loc":{"start":{"line":134,"column":27},"end":{"line":134,"column":39}},"id":74},"75":{"loc":{"start":{"line":135,"column":12},"end":{"line":135,"column":29}},"id":75},"76":{"loc":{"start":{"line":135,"column":12},"end":{"line":135,"column":28}},"id":76},"77":{"loc":{"start":{"line":136,"column":12},"end":{"line":136,"column":22}},"id":77},"78":{"loc":{"start":{"line":138,"column":24},"end":{"line":138,"column":40}},"id":78},"79":{"loc":{"start":{"line":138,"column":42},"end":{"line":138,"column":45}},"id":79},"80":{"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":32}},"id":80},"81":{"loc":{"start":{"line":140,"column":16},"end":{"line":140,"column":41}},"id":81},"82":{"loc":{"start":{"line":140,"column":16},"end":{"line":140,"column":27}},"id":82},"83":{"loc":{"start":{"line":140,"column":31},"end":{"line":140,"column":41}},"id":83},"84":{"loc":{"start":{"line":141,"column":23},"end":{"line":141,"column":35}},"id":84},"85":{"loc":{"start":{"line":143,"column":20},"end":{"line":143,"column":35}},"id":85},"86":{"loc":{"start":{"line":143,"column":20},"end":{"line":143,"column":34}},"id":86},"87":{"loc":{"start":{"line":147,"column":24},"end":{"line":147,"column":43}},"id":87},"88":{"loc":{"start":{"line":147,"column":24},"end":{"line":147,"column":42}},"id":88},"89":{"loc":{"start":{"line":151,"column":16},"end":{"line":151,"column":36}},"id":89},"90":{"loc":{"start":{"line":151,"column":16},"end":{"line":151,"column":35}},"id":90},"91":{"loc":{"start":{"line":155,"column":4},"end":{"line":155,"column":60}},"id":91},"92":{"loc":{"start":{"line":155,"column":11},"end":{"line":155,"column":59}},"id":92},"93":{"loc":{"start":{"line":155,"column":25},"end":{"line":155,"column":35}},"id":93},"94":{"loc":{"start":{"line":156,"column":14},"end":{"line":156,"column":46}},"id":94},"95":{"loc":{"start":{"line":156,"column":21},"end":{"line":156,"column":45}},"id":95},"96":{"loc":{"start":{"line":157,"column":4},"end":{"line":157,"column":30}},"id":96},"97":{"loc":{"start":{"line":157,"column":11},"end":{"line":157,"column":29}},"id":97},"98":{"loc":{"start":{"line":157,"column":11},"end":{"line":157,"column":22}},"id":98},"99":{"loc":{"start":{"line":167,"column":0},"end":{"line":201,"column":2}},"id":99},"100":{"loc":{"start":{"line":168,"column":4},"end":{"line":168,"column":18}},"id":100},"101":{"loc":{"start":{"line":169,"column":4},"end":{"line":169,"column":21}},"id":101},"102":{"loc":{"start":{"line":170,"column":4},"end":{"line":170,"column":22}},"id":102},"103":{"loc":{"start":{"line":171,"column":43},"end":{"line":171,"column":49}},"id":103},"104":{"loc":{"start":{"line":171,"column":51},"end":{"line":171,"column":54}},"id":104},"105":{"loc":{"start":{"line":172,"column":8},"end":{"line":172,"column":40}},"id":105},"106":{"loc":{"start":{"line":172,"column":19},"end":{"line":172,"column":39}},"id":106},"107":{"loc":{"start":{"line":174,"column":12},"end":{"line":174,"column":23}},"id":107},"108":{"loc":{"start":{"line":176,"column":8},"end":{"line":176,"column":56}},"id":108},"109":{"loc":{"start":{"line":176,"column":20},"end":{"line":176,"column":55}},"id":109},"110":{"loc":{"start":{"line":176,"column":31},"end":{"line":176,"column":54}},"id":110},"111":{"loc":{"start":{"line":177,"column":12},"end":{"line":177,"column":36}},"id":111},"112":{"loc":{"start":{"line":178,"column":12},"end":{"line":178,"column":53}},"id":112},"113":{"loc":{"start":{"line":178,"column":19},"end":{"line":178,"column":52}},"id":113},"114":{"loc":{"start":{"line":178,"column":19},"end":{"line":178,"column":32}},"id":114},"115":{"loc":{"start":{"line":179,"column":12},"end":{"line":179,"column":25}},"id":115},"116":{"loc":{"start":{"line":180,"column":12},"end":{"line":180,"column":26}},"id":116},"117":{"loc":{"start":{"line":182,"column":43},"end":{"line":182,"column":49}},"id":117},"118":{"loc":{"start":{"line":182,"column":51},"end":{"line":182,"column":54}},"id":118},"119":{"loc":{"start":{"line":183,"column":12},"end":{"line":183,"column":32}},"id":119},"120":{"loc":{"start":{"line":184,"column":16},"end":{"line":184,"column":41}},"id":120},"121":{"loc":{"start":{"line":184,"column":16},"end":{"line":184,"column":27}},"id":121},"122":{"loc":{"start":{"line":184,"column":31},"end":{"line":184,"column":41}},"id":122},"123":{"loc":{"start":{"line":185,"column":23},"end":{"line":185,"column":35}},"id":123},"124":{"loc":{"start":{"line":187,"column":20},"end":{"line":187,"column":35}},"id":124},"125":{"loc":{"start":{"line":187,"column":20},"end":{"line":187,"column":34}},"id":125},"126":{"loc":{"start":{"line":191,"column":24},"end":{"line":191,"column":43}},"id":126},"127":{"loc":{"start":{"line":191,"column":24},"end":{"line":191,"column":42}},"id":127},"128":{"loc":{"start":{"line":195,"column":16},"end":{"line":195,"column":36}},"id":128},"129":{"loc":{"start":{"line":195,"column":16},"end":{"line":195,"column":35}},"id":129},"130":{"loc":{"start":{"line":199,"column":4},"end":{"line":199,"column":60}},"id":130},"131":{"loc":{"start":{"line":199,"column":11},"end":{"line":199,"column":59}},"id":131},"132":{"loc":{"start":{"line":199,"column":25},"end":{"line":199,"column":35}},"id":132},"133":{"loc":{"start":{"line":200,"column":4},"end":{"line":200,"column":23}},"id":133},"134":{"loc":{"start":{"line":200,"column":11},"end":{"line":200,"column":22}},"id":134},"135":{"loc":{"start":{"line":207,"column":0},"end":{"line":220,"column":2}},"id":135},"136":{"loc":{"start":{"line":213,"column":4},"end":{"line":213,"column":36}},"id":136},"137":{"loc":{"start":{"line":213,"column":16},"end":{"line":213,"column":35}},"id":137},"138":{"loc":{"start":{"line":217,"column":8},"end":{"line":217,"column":25}},"id":138},"139":{"loc":{"start":{"line":218,"column":8},"end":{"line":218,"column":21}},"id":139},"140":{"loc":{"start":{"line":219,"column":4},"end":{"line":219,"column":36}},"id":140},"141":{"loc":{"start":{"line":219,"column":11},"end":{"line":219,"column":35}},"id":141},"142":{"loc":{"start":{"line":226,"column":0},"end":{"line":228,"column":2}},"id":142},"143":{"loc":{"start":{"line":227,"column":4},"end":{"line":227,"column":37}},"id":143},"144":{"loc":{"start":{"line":227,"column":12},"end":{"line":227,"column":36}},"id":144},"145":{"loc":{"start":{"line":235,"column":0},"end":{"line":241,"column":2}},"id":145},"146":{"loc":{"start":{"line":236,"column":8},"end":{"line":236,"column":34}},"id":146},"147":{"loc":{"start":{"line":237,"column":8},"end":{"line":237,"column":40}},"id":147},"148":{"loc":{"start":{"line":237,"column":15},"end":{"line":237,"column":39}},"id":148},"149":{"loc":{"start":{"line":239,"column":8},"end":{"line":239,"column":27}},"id":149},"150":{"loc":{"start":{"line":239,"column":15},"end":{"line":239,"column":26}},"id":150},"151":{"loc":{"start":{"line":247,"column":0},"end":{"line":252,"column":2}},"id":151},"152":{"loc":{"start":{"line":248,"column":9},"end":{"line":248,"column":33}},"id":152},"153":{"loc":{"start":{"line":249,"column":8},"end":{"line":249,"column":46}},"id":153},"154":{"loc":{"start":{"line":249,"column":15},"end":{"line":249,"column":45}},"id":154},"155":{"loc":{"start":{"line":249,"column":22},"end":{"line":249,"column":30}},"id":155},"156":{"loc":{"start":{"line":250,"column":4},"end":{"line":250,"column":36}},"id":156},"157":{"loc":{"start":{"line":250,"column":16},"end":{"line":250,"column":35}},"id":157},"158":{"loc":{"start":{"line":251,"column":4},"end":{"line":251,"column":38}},"id":158},"159":{"loc":{"start":{"line":251,"column":11},"end":{"line":251,"column":37}},"id":159},"160":{"loc":{"start":{"line":257,"column":0},"end":{"line":276,"column":2}},"id":160},"161":{"loc":{"start":{"line":258,"column":4},"end":{"line":258,"column":32}},"id":161},"162":{"loc":{"start":{"line":258,"column":11},"end":{"line":258,"column":31}},"id":162},"163":{"loc":{"start":{"line":259,"column":4},"end":{"line":259,"column":44}},"id":163},"164":{"loc":{"start":{"line":259,"column":19},"end":{"line":259,"column":43}},"id":164},"165":{"loc":{"start":{"line":260,"column":4},"end":{"line":260,"column":36}},"id":165},"166":{"loc":{"start":{"line":260,"column":16},"end":{"line":260,"column":35}},"id":166},"167":{"loc":{"start":{"line":264,"column":12},"end":{"line":264,"column":43}},"id":167},"168":{"loc":{"start":{"line":264,"column":18},"end":{"line":264,"column":34}},"id":168},"169":{"loc":{"start":{"line":265,"column":12},"end":{"line":265,"column":29}},"id":169},"170":{"loc":{"start":{"line":265,"column":12},"end":{"line":265,"column":28}},"id":170},"171":{"loc":{"start":{"line":267,"column":12},"end":{"line":267,"column":24}},"id":171},"172":{"loc":{"start":{"line":267,"column":12},"end":{"line":267,"column":23}},"id":172},"173":{"loc":{"start":{"line":270,"column":8},"end":{"line":270,"column":28}},"id":173},"174":{"loc":{"start":{"line":270,"column":8},"end":{"line":270,"column":27}},"id":174},"175":{"loc":{"start":{"line":272,"column":4},"end":{"line":275,"column":6}},"id":175},"176":{"loc":{"start":{"line":272,"column":11},"end":{"line":275,"column":5}},"id":176},"177":{"loc":{"start":{"line":272,"column":11},"end":{"line":272,"column":40}},"id":177},"178":{"loc":{"start":{"line":274,"column":8},"end":{"line":274,"column":10}},"id":178},"179":{"loc":{"start":{"line":274,"column":13},"end":{"line":274,"column":25}},"id":179},"180":{"loc":{"start":{"line":273,"column":8},"end":{"line":273,"column":32}},"id":180},"181":{"loc":{"start":{"line":286,"column":0},"end":{"line":294,"column":2}},"id":181},"182":{"loc":{"start":{"line":287,"column":4},"end":{"line":287,"column":57}},"id":182},"183":{"loc":{"start":{"line":287,"column":15},"end":{"line":287,"column":56}},"id":183},"184":{"loc":{"start":{"line":287,"column":25},"end":{"line":287,"column":50}},"id":184},"185":{"loc":{"start":{"line":287,"column":26},"end":{"line":287,"column":49}},"id":185},"186":{"loc":{"start":{"line":289,"column":8},"end":{"line":292,"column":10}},"id":186},"187":{"loc":{"start":{"line":289,"column":15},"end":{"line":292,"column":9}},"id":187},"188":{"loc":{"start":{"line":290,"column":23},"end":{"line":290,"column":52}},"id":188},"189":{"loc":{"start":{"line":290,"column":23},"end":{"line":290,"column":46}},"id":189},"190":{"loc":{"start":{"line":293,"column":4},"end":{"line":293,"column":16}},"id":190},"191":{"loc":{"start":{"line":300,"column":0},"end":{"line":305,"column":2}},"id":191},"192":{"loc":{"start":{"line":301,"column":4},"end":{"line":301,"column":30}},"id":192},"193":{"loc":{"start":{"line":301,"column":11},"end":{"line":301,"column":29}},"id":193},"194":{"loc":{"start":{"line":302,"column":4},"end":{"line":302,"column":36}},"id":194},"195":{"loc":{"start":{"line":302,"column":11},"end":{"line":302,"column":35}},"id":195},"196":{"loc":{"start":{"line":303,"column":4},"end":{"line":303,"column":38}},"id":196},"197":{"loc":{"start":{"line":303,"column":16},"end":{"line":303,"column":37}},"id":197},"198":{"loc":{"start":{"line":304,"column":4},"end":{"line":304,"column":51}},"id":198},"199":{"loc":{"start":{"line":304,"column":24},"end":{"line":304,"column":26}},"id":199},"200":{"loc":{"start":{"line":304,"column":29},"end":{"line":304,"column":50}},"id":202},"201":{"loc":{"start":{"line":304,"column":11},"end":{"line":304,"column":21}},"id":201},"202":{"loc":{"start":{"line":304,"column":29},"end":{"line":304,"column":50}},"id":202},"203":{"loc":{"start":{"line":307,"column":36},"end":{"line":307,"column":43}},"id":203},"204":{"loc":{"start":{"line":307,"column":46},"end":{"line":307,"column":58}},"id":204},"205":{"loc":{"start":{"line":307,"column":3},"end":{"line":307,"column":33}},"id":205}}}},"/Users/kris/q-io/spec/fs/issues/1-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1}},"hash":"947436878d42ebecd4ba9e18e552009c","instrumentor":{"blockCounter":7,"nodeCounter":32,"source":"require(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\n\ndescribe(\"write and remove\", function () {\n\n    it(\"should write and remove a file\", function () {\n\n        var fixture = FS.join(__dirname, \"fixture.txt\");\n\n        return FS.write(fixture, \"1234\")\n        .then(function (result) {\n            expect(result).toBe(undefined);\n        })\n\n        .then(function () {\n            return FS.remove(fixture);\n        })\n        .then(function (result) {\n            expect(result).toBe(undefined);\n        })\n\n        .then(function () {\n            return FS.exists(fixture)\n        })\n        .then(function (exists) {\n            expect(exists).toBe(false);\n        })\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":36}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":21}},"id":2},"3":{"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":20}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"id":4},"5":{"loc":{"start":{"line":3,"column":9},"end":{"line":3,"column":31}},"id":5},"6":{"loc":{"start":{"line":5,"column":0},"end":{"line":31,"column":3}},"id":6},"7":{"loc":{"start":{"line":5,"column":0},"end":{"line":31,"column":2}},"id":7},"8":{"loc":{"start":{"line":7,"column":4},"end":{"line":30,"column":7}},"id":8},"9":{"loc":{"start":{"line":7,"column":4},"end":{"line":30,"column":6}},"id":9},"10":{"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":56}},"id":10},"11":{"loc":{"start":{"line":9,"column":22},"end":{"line":9,"column":55}},"id":11},"12":{"loc":{"start":{"line":11,"column":8},"end":{"line":30,"column":4}},"id":12},"13":{"loc":{"start":{"line":11,"column":15},"end":{"line":28,"column":10}},"id":13},"14":{"loc":{"start":{"line":23,"column":13},"end":{"line":25,"column":10}},"id":14},"15":{"loc":{"start":{"line":19,"column":13},"end":{"line":21,"column":10}},"id":15},"16":{"loc":{"start":{"line":16,"column":13},"end":{"line":18,"column":10}},"id":16},"17":{"loc":{"start":{"line":12,"column":13},"end":{"line":14,"column":10}},"id":17},"18":{"loc":{"start":{"line":11,"column":23},"end":{"line":11,"column":40}},"id":18},"19":{"loc":{"start":{"line":13,"column":12},"end":{"line":13,"column":43}},"id":19},"20":{"loc":{"start":{"line":13,"column":12},"end":{"line":13,"column":42}},"id":20},"21":{"loc":{"start":{"line":13,"column":18},"end":{"line":13,"column":26}},"id":21},"22":{"loc":{"start":{"line":17,"column":12},"end":{"line":17,"column":38}},"id":22},"23":{"loc":{"start":{"line":17,"column":19},"end":{"line":17,"column":37}},"id":23},"24":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":43}},"id":24},"25":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":42}},"id":25},"26":{"loc":{"start":{"line":20,"column":18},"end":{"line":20,"column":26}},"id":26},"27":{"loc":{"start":{"line":24,"column":12},"end":{"line":25,"column":8}},"id":27},"28":{"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":37}},"id":28},"29":{"loc":{"start":{"line":27,"column":12},"end":{"line":27,"column":39}},"id":29},"30":{"loc":{"start":{"line":27,"column":12},"end":{"line":27,"column":38}},"id":30},"31":{"loc":{"start":{"line":27,"column":18},"end":{"line":27,"column":26}},"id":31}}}},"/Users/kris/q-io/spec/lib/jasmine-promise.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":36},"5":{"index":5,"count":36},"6":{"index":6,"count":36},"7":{"index":7,"count":36},"8":{"index":8,"count":21},"9":{"index":9,"count":21},"10":{"index":10,"count":21},"11":{"index":11,"count":21},"12":{"index":12,"count":21},"13":{"index":13,"count":21},"18":{"index":18,"count":15},"19":{"index":19,"count":15},"20":{"index":20,"count":15}},"blocks":{"0":{"index":0,"count":36},"1":{"index":1,"count":36},"2":{"index":2,"count":21},"3":{"index":3,"count":21},"5":{"index":5,"count":15}},"hash":"e72b668dd4c4f55fae785bf5b9a21249","instrumentor":{"blockCounter":7,"nodeCounter":25,"source":"\"use strict\";\n\nvar Q = require(\"q\");\n\n/**\n * Modifies the way that individual specs are run to easily test async\n * code with promises.\n *\n * A spec may return a promise. If it does, then the spec passes if and\n * only if that promise is fulfilled within a very short period of time.\n * If it is rejected, or if it isn't fulfilled quickly, the spec fails.\n *\n * In this way, we can use promise chaining to structure our asynchronous\n * tests. Expectations all down the chain of promises are all checked and\n * guaranteed to be run and resolved or the test fails.\n *\n * This is a big win over the runs() and watches() code that jasmine\n * supports out of the box.\n */\njasmine.Block.prototype.execute = function (onComplete) {\n    var spec = this.spec;\n    try {\n        var result = this.func.call(spec, onComplete);\n\n        // It seems Jasmine likes to return the suite if you pass it anything.\n        // So make sure it's a promise first.\n        if (result && typeof result.then === \"function\") {\n            Q.timeout(result, 500).then(function () {\n                onComplete();\n            }, function (error) {\n                spec.fail(error);\n                onComplete();\n            });\n        } else if (this.func.length === 0) {\n            onComplete();\n        }\n    } catch (error) {\n        spec.fail(error);\n        onComplete();\n    }\n};","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":21}},"id":1},"2":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":20}},"id":2},"3":{"loc":{"start":{"line":20,"column":0},"end":{"line":41,"column":2}},"id":3},"4":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":25}},"id":4},"5":{"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":54}},"id":5},"6":{"loc":{"start":{"line":23,"column":21},"end":{"line":23,"column":53}},"id":6},"7":{"loc":{"start":{"line":27,"column":12},"end":{"line":27,"column":55}},"id":7},"8":{"loc":{"start":{"line":27,"column":22},"end":{"line":27,"column":55}},"id":8},"9":{"loc":{"start":{"line":28,"column":12},"end":{"line":33,"column":15}},"id":9},"10":{"loc":{"start":{"line":28,"column":12},"end":{"line":33,"column":14}},"id":10},"11":{"loc":{"start":{"line":28,"column":21},"end":{"line":28,"column":34}},"id":11},"12":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":29}},"id":12},"13":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":28}},"id":13},"14":{"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":33}},"id":14},"15":{"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":32}},"id":15},"16":{"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":29}},"id":16},"17":{"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":28}},"id":17},"18":{"loc":{"start":{"line":34,"column":19},"end":{"line":34,"column":41}},"id":18},"19":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":25}},"id":19},"20":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":24}},"id":20},"21":{"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":25}},"id":21},"22":{"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":24}},"id":22},"23":{"loc":{"start":{"line":39,"column":8},"end":{"line":39,"column":21}},"id":23},"24":{"loc":{"start":{"line":39,"column":8},"end":{"line":39,"column":20}},"id":24}}}},"/Users/kris/q-io/fs.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":2},"22":{"index":22,"count":29},"23":{"index":23,"count":29},"25":{"index":25,"count":29},"27":{"index":27,"count":29},"28":{"index":28,"count":29},"29":{"index":29,"count":29},"30":{"index":30,"count":29},"31":{"index":31,"count":29},"32":{"index":32,"count":29},"33":{"index":33,"count":29},"34":{"index":34,"count":29},"35":{"index":35,"count":29},"36":{"index":36,"count":29},"44":{"index":44,"count":2},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":22},"48":{"index":48,"count":22},"49":{"index":49,"count":22},"50":{"index":50,"count":22},"51":{"index":51,"count":22},"52":{"index":52,"count":22},"53":{"index":53,"count":22},"54":{"index":54,"count":22},"55":{"index":55,"count":22},"56":{"index":56,"count":22},"57":{"index":57,"count":22},"58":{"index":58,"count":22},"60":{"index":60,"count":22},"62":{"index":62,"count":22},"63":{"index":63,"count":2},"64":{"index":64,"count":2},"65":{"index":65,"count":2},"66":{"index":66,"count":22},"67":{"index":67,"count":22},"70":{"index":70,"count":3},"71":{"index":71,"count":3},"72":{"index":72,"count":22},"73":{"index":73,"count":22},"74":{"index":74,"count":1},"75":{"index":75,"count":1},"76":{"index":76,"count":1},"77":{"index":77,"count":1},"78":{"index":78,"count":1},"79":{"index":79,"count":21},"80":{"index":80,"count":21},"81":{"index":81,"count":21},"82":{"index":82,"count":21},"83":{"index":83,"count":21},"84":{"index":84,"count":1},"85":{"index":85,"count":1},"86":{"index":86,"count":1},"87":{"index":87,"count":1},"88":{"index":88,"count":1},"89":{"index":89,"count":1},"90":{"index":90,"count":1},"98":{"index":98,"count":1},"99":{"index":99,"count":1},"100":{"index":100,"count":1},"101":{"index":101,"count":1},"116":{"index":116,"count":1},"140":{"index":140,"count":1},"157":{"index":157,"count":1},"158":{"index":158,"count":1},"159":{"index":159,"count":7},"160":{"index":160,"count":7},"161":{"index":161,"count":7},"162":{"index":162,"count":7},"163":{"index":163,"count":7},"164":{"index":164,"count":7},"172":{"index":172,"count":7},"173":{"index":173,"count":7},"174":{"index":174,"count":7},"175":{"index":175,"count":1},"176":{"index":176,"count":54},"177":{"index":177,"count":54},"178":{"index":178,"count":54},"179":{"index":179,"count":54},"180":{"index":180,"count":54},"181":{"index":181,"count":54},"182":{"index":182,"count":54},"183":{"index":183,"count":1},"184":{"index":184,"count":1},"185":{"index":185,"count":1},"186":{"index":186,"count":1},"187":{"index":187,"count":1},"188":{"index":188,"count":1},"189":{"index":189,"count":1},"190":{"index":190,"count":53},"191":{"index":191,"count":53},"194":{"index":194,"count":54},"195":{"index":195,"count":1},"196":{"index":196,"count":53},"197":{"index":197,"count":53},"198":{"index":198,"count":1},"199":{"index":199,"count":1},"200":{"index":200,"count":1},"201":{"index":201,"count":7},"202":{"index":202,"count":52},"203":{"index":203,"count":52},"204":{"index":204,"count":1},"205":{"index":205,"count":1},"206":{"index":206,"count":1},"208":{"index":208,"count":1},"227":{"index":227,"count":1},"246":{"index":246,"count":1},"270":{"index":270,"count":1},"271":{"index":271,"count":1},"300":{"index":300,"count":1},"325":{"index":325,"count":1},"349":{"index":349,"count":1},"364":{"index":364,"count":1}},"blocks":{"0":{"index":0,"count":2},"1":{"index":1,"count":29},"2":{"index":2,"count":29},"3":{"index":3,"count":29},"7":{"index":7,"count":22},"8":{"index":8,"count":22},"11":{"index":11,"count":2},"12":{"index":12,"count":19},"14":{"index":14,"count":3},"15":{"index":15,"count":1},"16":{"index":16,"count":21},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"20":{"index":20,"count":1},"31":{"index":31,"count":7},"32":{"index":32,"count":7},"34":{"index":34,"count":7},"35":{"index":35,"count":54},"36":{"index":36,"count":54},"37":{"index":37,"count":54},"38":{"index":38,"count":1},"39":{"index":39,"count":53},"41":{"index":41,"count":53},"42":{"index":42,"count":7},"43":{"index":43,"count":52},"44":{"index":44,"count":1}},"hash":"4732d2925529d6241ce761a2b1ffd281","instrumentor":{"blockCounter":91,"nodeCounter":379,"source":"/**\n * An asynchronous local file system API, based on a subset\n * of the `narwhal/fs` API and the `narwhal/promise` API,\n * such that the method names are the same but some return\n * values are promises instead of fully resolved values.\n * @module\n */\n\n/*whatsupdoc*/\n\nvar FS = require(\"fs\"); // node\nvar Q = require(\"q\");\nvar Reader = require(\"./reader\");\nvar Writer = require(\"./writer\");\nvar Common = require(\"./fs-common\");\nvar Mock = require(\"./fs-mock\");\nvar Root = require(\"./fs-root\");\n\nCommon.update(exports, process.cwd);\nexports.Mock = Mock;\nexports.mock = Mock.mock;\nexports.Root = Root;\n\n// facilitates AIMD (additive increase, multiplicative decrease) for backing off\nvar backOffDelay = 0;\nvar backOffFactor = 1.0001;\nfunction dampen(wrapped, thisp) {\n    var retry = function () {\n        var args = arguments;\n        var ready = backOffDelay ? Q.delay(backOffDelay) : Q.resolve();\n        return ready.then(function () {\n            return Q.when(wrapped.apply(thisp, args), function (stream) {\n                backOffDelay = Math.max(0, backOffDelay - 1);\n                return stream;\n            }, function (error) {\n                if (error.code === \"EMFILE\") {\n                    backOffDelay = (backOffDelay + 1) * backOffFactor;\n                    return retry.apply(null, args);\n                } else {\n                    throw error;\n                }\n            });\n        });\n    };\n    return retry;\n}\n\n/**\n * @param {String} path\n * @param {Object} options (flags, mode, bufferSize, charset, begin, end)\n * @returns {Promise * Stream} a stream from the `q-io` module.\n */\nexports.open = dampen(function (path, flags, charset, options) {\n    var self = this;\n    if (typeof flags == \"object\") {\n        options = flags;\n        flags = options.flags;\n        charset = options.charset;\n    }\n    options = options || {};\n    flags = flags || \"r\";\n    var nodeOptions = {\n        \"flags\": flags.replace(/b/g, \"\")\n    };\n    if (\"bufferSize\" in options) {\n        nodeOptions.bufferSize = options.bufferSize;\n    }\n    if (\"mode\" in options) {\n        nodeOptions.mode = options.mode;\n    }\n    if (\"begin\" in options) {\n        nodeOptions.start = options.begin;\n        nodeOptions.end = options.end - 1;\n    }\n    if (flags.indexOf(\"b\") >= 0) {\n        if (charset) {\n            throw new Error(\"Can't open a binary file with a charset: \" + charset);\n        }\n    } else {\n        charset = charset || 'utf-8';\n    }\n    if (flags.indexOf(\"w\") >= 0) {\n        var stream = FS.createWriteStream(String(path), nodeOptions);\n        return Writer(stream, charset);\n    } else {\n        var stream = FS.createReadStream(String(path), nodeOptions);\n        return Reader(stream, charset);\n    }\n});\n\nexports.remove = function (path) {\n    path = String(path);\n    var done = Q.defer();\n    FS.unlink(path, function (error) {\n        if (error) {\n            error.message = \"Can't remove \" + JSON.stringify(path) + \": \" + error.message;\n            done.reject(error);\n        } else {\n            done.resolve();\n        }\n    });\n    return done.promise;\n};\n\nexports.move = function (source, target) {\n    return Q.ninvoke(FS, \"rename\", String(source), String(target))\n    .fail(function (error) {\n        error.message = (\n            \"Can't move \" + JSON.stringify(source) + \" to \" +\n            JSON.stringify(target) + \" because \" + error.message\n        );\n        throw error;\n    });\n};\n\nexports.makeDirectory = function (path, mode) {\n    path = String(path);\n    var done = Q.defer();\n    mode = mode === undefined ? parseInt('755', 8) : mode;\n    FS.mkdir(path, mode, function (error) {\n        if (error) {\n            error.message = \"Can't makeDirectory \" + JSON.stringify(path) + \" with mode \" + mode + \": \" + error.message;\n            done.reject(error);\n        } else {\n            done.resolve();\n        }\n    });\n    return done.promise;\n};\n\nexports.removeDirectory = function (path) {\n    path = String(path);\n    var done = Q.defer();\n    FS.rmdir(path, function (error) {\n        if (error) {\n            error.message = \"Can't removeDirectory \" + JSON.stringify(path) + \": \" + error.message;\n            done.reject(error);\n        } else {\n            done.resolve();\n        }\n    });\n    return done.promise;\n};\n\n/**\n */\nexports.list = dampen(function (path) {\n    path = String(path);\n    var result = Q.defer();\n    FS.readdir(path, function (error, list) {\n        if (error) {\n            error.message = \"Can't list \" + JSON.stringify(path) + \": \" + error.message;\n            return result.reject(error);\n        } else {\n            result.resolve(list);\n        }\n    });\n    return result.promise;\n});\n\n/**\n * @param {String} path\n * @returns {Promise * Stat}\n */\nexports.stat = function (path) {\n    var self = this;\n    path = String(path);\n    var done = Q.defer();\n    try {\n        FS.stat(path, function (error, stat) {\n            if (error) {\n                error.message = \"Can't stat \" + JSON.stringify(path) + \": \" + error;\n                done.reject(error);\n            } else {\n                done.resolve(new Stats(stat));\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\nvar Stats = function (nodeStat) {\n    this.node = nodeStat;\n    this.size = nodeStat.size;\n};\n\nvar stats = [\n    \"isDirectory\",\n    \"isFile\",\n    \"isBlockDevice\",\n    \"isCharacterDevice\",\n    \"isSymbolicLink\",\n    \"isFIFO\",\n    \"isSocket\"\n];\n\nstats.forEach(function (name) {\n    Stats.prototype[name] = function () {\n        return this.node[name]();\n    };\n});\n\nStats.prototype.lastModified = function () {\n    return new Date(this.node.mtime);\n};\n\nStats.prototype.lastAccessed = function () {\n    return new Date(this.node.atime);\n};\n\nexports.statLink = function (path) {\n    path = String(path);\n    var done = Q.defer();\n    try {\n        FS.lstat(path, function (error, stat) {\n            if (error) {\n                error.message = \"Can't statLink \" + JSON.stringify(path) + \": \" + error.message;\n                done.reject(error);\n            } else {\n                done.resolve(stat);\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\nexports.statFd = function (fd) {\n    fd = Number(fd);\n    var done = Q.defer();\n    try {\n        FS.fstat(fd, function (error, stat) {\n            if (error) {\n                error.message = \"Can't statFd file descriptor \" + JSON.stringify(fd) + \": \" + error.message;\n                done.reject(error);\n            } else {\n                done.resolve(stat);\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\nexports.link = function (source, target) {\n    source = String(source);\n    target = String(target);\n    var done = Q.defer();\n    try {\n        FS.link(source, target, function (error) {\n            if (error) {\n                error.message = \"Can't link \" + JSON.stringify(source) + \" to \" + JSON.stringify(target) + \": \" + error.message;\n                done.reject(error);\n            } else {\n                done.resolve();\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\n// this lookup table translates the link types that Q-IO accepts (which have\n// been normalized to full words to be consistent with the naming convention)\nvar linkTypes = {\n    \"file\": \"file\",\n    \"directory\": \"dir\",\n    \"junction\": \"junction\"\n};\n\nexports.symbolicLink = function (target, relative, type) {\n    if (!linkTypes.hasOwnProperty(type)) {\n        console.warn(new Error(\"For Windows compatibility, symbolicLink must be called with a type argument \\\"file\\\", \\\"directory\\\", or \\\"junction\\\"\"));\n    }\n    type = linkTypes[type];\n    target = String(target);\n    relative = String(relative);\n    var done = Q.defer();\n    try {\n        FS.symlink(relative, target, type || 'file', function (error) {\n            if (error) {\n                error.message = \"Can't create symbolicLink \" + JSON.stringify(target) + \" to relative location \" + JSON.stringify(relative) + \": \" + error.message;\n                done.reject(error);\n            } else {\n                done.resolve();\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\nexports.chown = function (path, uid, gid) {\n    path = String(path);\n    var done = Q.defer();\n    try {\n        FS.chown(path, uid, gid, function (error) {\n            if (error) {\n                error.message = \"Can't chown (change owner) of \" + JSON.stringify(path) + \" to user \" + JSON.stringify(uid) + \" and group \" + JSON.stringify(gid) + \": \" + error.message;\n                done.reject(error);\n            } else {\n                done.resolve();\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\nexports.chmod = function (path, mode) {\n    path = String(path);\n    mode = String(mode);\n    var done = Q.defer();\n    try {\n        FS.chmod(path, mode, function (error) {\n            if (error) {\n                error.message = \"Can't chmod (change permissions mode) of \" + JSON.stringify(path) + \" to (octal number) \" + mode.toString(8) + \": \" + error.message;\n                done.reject(error);\n            } else {\n                done.resolve();\n            }\n        });\n    } catch (error) {\n        done.reject(error);\n    }\n    return done.promise;\n};\n\nexports.canonical = function (path) {\n    var result = Q.defer();\n    FS.realpath(path, function (error, canonicalPath) {\n        if (error) {\n            error.message = \"Can't get canonical path of \" + JSON.stringify(path) + \" by way of C realpath: \" + error.message;\n            result.reject(error);\n        } else {\n            result.resolve(canonicalPath);\n        }\n    });\n    return result.promise;\n};\n\nexports.readLink = function (path) {\n    var result = Q.defer();\n    FS.readlink(path, function (error, path) {\n        if (error) {\n            error.message = \"Can't get link from \" + JSON.stringify(path) + \" by way of C readlink: \" + error.message;\n            result.reject(error);\n        } else {\n            result.resolve(path);\n        }\n    });\n    return result.promise;\n};","nodes":{"0":{"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":23}},"id":0},"1":{"loc":{"start":{"line":11,"column":9},"end":{"line":11,"column":22}},"id":1},"2":{"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":21}},"id":2},"3":{"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":20}},"id":3},"4":{"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":33}},"id":4},"5":{"loc":{"start":{"line":13,"column":13},"end":{"line":13,"column":32}},"id":5},"6":{"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":33}},"id":6},"7":{"loc":{"start":{"line":14,"column":13},"end":{"line":14,"column":32}},"id":7},"8":{"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":36}},"id":8},"9":{"loc":{"start":{"line":15,"column":13},"end":{"line":15,"column":35}},"id":9},"10":{"loc":{"start":{"line":16,"column":0},"end":{"line":16,"column":32}},"id":10},"11":{"loc":{"start":{"line":16,"column":11},"end":{"line":16,"column":31}},"id":11},"12":{"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":32}},"id":12},"13":{"loc":{"start":{"line":17,"column":11},"end":{"line":17,"column":31}},"id":13},"14":{"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":36}},"id":14},"15":{"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":35}},"id":15},"16":{"loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":20}},"id":16},"17":{"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":25}},"id":17},"18":{"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":20}},"id":18},"19":{"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":21}},"id":19},"20":{"loc":{"start":{"line":26,"column":0},"end":{"line":26,"column":27}},"id":20},"21":{"loc":{"start":{"line":28,"column":4},"end":{"line":44,"column":6}},"id":21},"22":{"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":29}},"id":22},"23":{"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":71}},"id":23},"24":{"loc":{"start":{"line":30,"column":35},"end":{"line":30,"column":56}},"id":26},"25":{"loc":{"start":{"line":30,"column":59},"end":{"line":30,"column":70}},"id":27},"26":{"loc":{"start":{"line":30,"column":35},"end":{"line":30,"column":56}},"id":26},"27":{"loc":{"start":{"line":30,"column":59},"end":{"line":30,"column":70}},"id":27},"28":{"loc":{"start":{"line":31,"column":8},"end":{"line":43,"column":11}},"id":28},"29":{"loc":{"start":{"line":31,"column":15},"end":{"line":43,"column":10}},"id":29},"30":{"loc":{"start":{"line":32,"column":12},"end":{"line":42,"column":15}},"id":30},"31":{"loc":{"start":{"line":32,"column":19},"end":{"line":42,"column":14}},"id":31},"32":{"loc":{"start":{"line":32,"column":26},"end":{"line":32,"column":52}},"id":32},"33":{"loc":{"start":{"line":33,"column":16},"end":{"line":33,"column":61}},"id":33},"34":{"loc":{"start":{"line":33,"column":31},"end":{"line":33,"column":60}},"id":34},"35":{"loc":{"start":{"line":33,"column":43},"end":{"line":33,"column":59}},"id":35},"36":{"loc":{"start":{"line":34,"column":16},"end":{"line":34,"column":30}},"id":36},"37":{"loc":{"start":{"line":36,"column":20},"end":{"line":36,"column":43}},"id":37},"38":{"loc":{"start":{"line":37,"column":20},"end":{"line":37,"column":70}},"id":38},"39":{"loc":{"start":{"line":37,"column":35},"end":{"line":37,"column":69}},"id":39},"40":{"loc":{"start":{"line":37,"column":35},"end":{"line":37,"column":53}},"id":40},"41":{"loc":{"start":{"line":38,"column":20},"end":{"line":38,"column":51}},"id":41},"42":{"loc":{"start":{"line":38,"column":27},"end":{"line":38,"column":50}},"id":42},"43":{"loc":{"start":{"line":40,"column":20},"end":{"line":40,"column":32}},"id":43},"44":{"loc":{"start":{"line":45,"column":4},"end":{"line":45,"column":17}},"id":44},"45":{"loc":{"start":{"line":53,"column":0},"end":{"line":89,"column":3}},"id":45},"46":{"loc":{"start":{"line":53,"column":15},"end":{"line":89,"column":2}},"id":46},"47":{"loc":{"start":{"line":54,"column":4},"end":{"line":54,"column":20}},"id":47},"48":{"loc":{"start":{"line":55,"column":8},"end":{"line":55,"column":32}},"id":48},"49":{"loc":{"start":{"line":56,"column":8},"end":{"line":56,"column":24}},"id":49},"50":{"loc":{"start":{"line":57,"column":8},"end":{"line":57,"column":30}},"id":50},"51":{"loc":{"start":{"line":58,"column":8},"end":{"line":58,"column":34}},"id":51},"52":{"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":28}},"id":52},"53":{"loc":{"start":{"line":60,"column":14},"end":{"line":60,"column":27}},"id":53},"54":{"loc":{"start":{"line":61,"column":4},"end":{"line":61,"column":25}},"id":54},"55":{"loc":{"start":{"line":61,"column":12},"end":{"line":61,"column":24}},"id":55},"56":{"loc":{"start":{"line":62,"column":4},"end":{"line":64,"column":6}},"id":56},"57":{"loc":{"start":{"line":63,"column":17},"end":{"line":63,"column":40}},"id":57},"58":{"loc":{"start":{"line":65,"column":8},"end":{"line":65,"column":31}},"id":58},"59":{"loc":{"start":{"line":66,"column":8},"end":{"line":66,"column":52}},"id":59},"60":{"loc":{"start":{"line":68,"column":8},"end":{"line":68,"column":25}},"id":60},"61":{"loc":{"start":{"line":69,"column":8},"end":{"line":69,"column":40}},"id":61},"62":{"loc":{"start":{"line":71,"column":8},"end":{"line":71,"column":26}},"id":62},"63":{"loc":{"start":{"line":72,"column":8},"end":{"line":72,"column":42}},"id":63},"64":{"loc":{"start":{"line":73,"column":8},"end":{"line":73,"column":42}},"id":64},"65":{"loc":{"start":{"line":73,"column":26},"end":{"line":73,"column":41}},"id":65},"66":{"loc":{"start":{"line":75,"column":8},"end":{"line":75,"column":31}},"id":66},"67":{"loc":{"start":{"line":75,"column":8},"end":{"line":75,"column":26}},"id":67},"68":{"loc":{"start":{"line":77,"column":12},"end":{"line":77,"column":83}},"id":68},"69":{"loc":{"start":{"line":77,"column":28},"end":{"line":77,"column":81}},"id":69},"70":{"loc":{"start":{"line":80,"column":8},"end":{"line":80,"column":37}},"id":70},"71":{"loc":{"start":{"line":80,"column":18},"end":{"line":80,"column":36}},"id":71},"72":{"loc":{"start":{"line":82,"column":8},"end":{"line":82,"column":31}},"id":72},"73":{"loc":{"start":{"line":82,"column":8},"end":{"line":82,"column":26}},"id":73},"74":{"loc":{"start":{"line":83,"column":8},"end":{"line":83,"column":69}},"id":74},"75":{"loc":{"start":{"line":83,"column":21},"end":{"line":83,"column":68}},"id":75},"76":{"loc":{"start":{"line":83,"column":42},"end":{"line":83,"column":54}},"id":76},"77":{"loc":{"start":{"line":84,"column":8},"end":{"line":84,"column":39}},"id":77},"78":{"loc":{"start":{"line":84,"column":15},"end":{"line":84,"column":38}},"id":78},"79":{"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":68}},"id":79},"80":{"loc":{"start":{"line":86,"column":21},"end":{"line":86,"column":67}},"id":80},"81":{"loc":{"start":{"line":86,"column":41},"end":{"line":86,"column":53}},"id":81},"82":{"loc":{"start":{"line":87,"column":8},"end":{"line":87,"column":39}},"id":82},"83":{"loc":{"start":{"line":87,"column":15},"end":{"line":87,"column":38}},"id":83},"84":{"loc":{"start":{"line":91,"column":0},"end":{"line":103,"column":2}},"id":84},"85":{"loc":{"start":{"line":92,"column":4},"end":{"line":92,"column":24}},"id":85},"86":{"loc":{"start":{"line":92,"column":11},"end":{"line":92,"column":23}},"id":86},"87":{"loc":{"start":{"line":93,"column":4},"end":{"line":93,"column":25}},"id":87},"88":{"loc":{"start":{"line":93,"column":15},"end":{"line":93,"column":24}},"id":88},"89":{"loc":{"start":{"line":94,"column":4},"end":{"line":101,"column":7}},"id":89},"90":{"loc":{"start":{"line":94,"column":4},"end":{"line":101,"column":6}},"id":90},"91":{"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":90}},"id":91},"92":{"loc":{"start":{"line":96,"column":28},"end":{"line":96,"column":89}},"id":92},"93":{"loc":{"start":{"line":96,"column":28},"end":{"line":96,"column":73}},"id":93},"94":{"loc":{"start":{"line":96,"column":28},"end":{"line":96,"column":66}},"id":94},"95":{"loc":{"start":{"line":96,"column":46},"end":{"line":96,"column":66}},"id":95},"96":{"loc":{"start":{"line":97,"column":12},"end":{"line":97,"column":31}},"id":96},"97":{"loc":{"start":{"line":97,"column":12},"end":{"line":97,"column":30}},"id":97},"98":{"loc":{"start":{"line":99,"column":12},"end":{"line":99,"column":27}},"id":98},"99":{"loc":{"start":{"line":99,"column":12},"end":{"line":99,"column":26}},"id":99},"100":{"loc":{"start":{"line":102,"column":4},"end":{"line":102,"column":24}},"id":100},"101":{"loc":{"start":{"line":105,"column":0},"end":{"line":114,"column":2}},"id":101},"102":{"loc":{"start":{"line":106,"column":4},"end":{"line":113,"column":7}},"id":102},"103":{"loc":{"start":{"line":106,"column":11},"end":{"line":113,"column":6}},"id":103},"104":{"loc":{"start":{"line":106,"column":20},"end":{"line":106,"column":66}},"id":104},"105":{"loc":{"start":{"line":106,"column":35},"end":{"line":106,"column":49}},"id":105},"106":{"loc":{"start":{"line":106,"column":51},"end":{"line":106,"column":65}},"id":106},"107":{"loc":{"start":{"line":108,"column":8},"end":{"line":111,"column":10}},"id":107},"108":{"loc":{"start":{"line":108,"column":24},"end":{"line":111,"column":9}},"id":108},"109":{"loc":{"start":{"line":109,"column":12},"end":{"line":110,"column":48}},"id":109},"110":{"loc":{"start":{"line":109,"column":12},"end":{"line":110,"column":34}},"id":110},"111":{"loc":{"start":{"line":109,"column":12},"end":{"line":109,"column":59}},"id":111},"112":{"loc":{"start":{"line":109,"column":12},"end":{"line":109,"column":50}},"id":112},"113":{"loc":{"start":{"line":109,"column":28},"end":{"line":109,"column":50}},"id":113},"114":{"loc":{"start":{"line":110,"column":12},"end":{"line":110,"column":34}},"id":114},"115":{"loc":{"start":{"line":112,"column":8},"end":{"line":112,"column":20}},"id":115},"116":{"loc":{"start":{"line":116,"column":0},"end":{"line":129,"column":2}},"id":116},"117":{"loc":{"start":{"line":117,"column":4},"end":{"line":117,"column":24}},"id":117},"118":{"loc":{"start":{"line":117,"column":11},"end":{"line":117,"column":23}},"id":118},"119":{"loc":{"start":{"line":118,"column":4},"end":{"line":118,"column":25}},"id":119},"120":{"loc":{"start":{"line":118,"column":15},"end":{"line":118,"column":24}},"id":120},"121":{"loc":{"start":{"line":119,"column":4},"end":{"line":119,"column":58}},"id":121},"122":{"loc":{"start":{"line":119,"column":32},"end":{"line":119,"column":50}},"id":125},"123":{"loc":{"start":{"line":119,"column":53},"end":{"line":119,"column":57}},"id":123},"124":{"loc":{"start":{"line":119,"column":11},"end":{"line":119,"column":29}},"id":124},"125":{"loc":{"start":{"line":119,"column":32},"end":{"line":119,"column":50}},"id":125},"126":{"loc":{"start":{"line":120,"column":4},"end":{"line":127,"column":7}},"id":126},"127":{"loc":{"start":{"line":120,"column":4},"end":{"line":127,"column":6}},"id":127},"128":{"loc":{"start":{"line":122,"column":12},"end":{"line":122,"column":120}},"id":128},"129":{"loc":{"start":{"line":122,"column":28},"end":{"line":122,"column":119}},"id":129},"130":{"loc":{"start":{"line":122,"column":28},"end":{"line":122,"column":103}},"id":130},"131":{"loc":{"start":{"line":122,"column":28},"end":{"line":122,"column":96}},"id":131},"132":{"loc":{"start":{"line":122,"column":28},"end":{"line":122,"column":89}},"id":132},"133":{"loc":{"start":{"line":122,"column":28},"end":{"line":122,"column":73}},"id":133},"134":{"loc":{"start":{"line":122,"column":53},"end":{"line":122,"column":73}},"id":134},"135":{"loc":{"start":{"line":123,"column":12},"end":{"line":123,"column":31}},"id":135},"136":{"loc":{"start":{"line":123,"column":12},"end":{"line":123,"column":30}},"id":136},"137":{"loc":{"start":{"line":125,"column":12},"end":{"line":125,"column":27}},"id":137},"138":{"loc":{"start":{"line":125,"column":12},"end":{"line":125,"column":26}},"id":138},"139":{"loc":{"start":{"line":128,"column":4},"end":{"line":128,"column":24}},"id":139},"140":{"loc":{"start":{"line":131,"column":0},"end":{"line":143,"column":2}},"id":140},"141":{"loc":{"start":{"line":132,"column":4},"end":{"line":132,"column":24}},"id":141},"142":{"loc":{"start":{"line":132,"column":11},"end":{"line":132,"column":23}},"id":142},"143":{"loc":{"start":{"line":133,"column":4},"end":{"line":133,"column":25}},"id":143},"144":{"loc":{"start":{"line":133,"column":15},"end":{"line":133,"column":24}},"id":144},"145":{"loc":{"start":{"line":134,"column":4},"end":{"line":141,"column":7}},"id":145},"146":{"loc":{"start":{"line":134,"column":4},"end":{"line":141,"column":6}},"id":146},"147":{"loc":{"start":{"line":136,"column":12},"end":{"line":136,"column":99}},"id":147},"148":{"loc":{"start":{"line":136,"column":28},"end":{"line":136,"column":98}},"id":148},"149":{"loc":{"start":{"line":136,"column":28},"end":{"line":136,"column":82}},"id":149},"150":{"loc":{"start":{"line":136,"column":28},"end":{"line":136,"column":75}},"id":150},"151":{"loc":{"start":{"line":136,"column":55},"end":{"line":136,"column":75}},"id":151},"152":{"loc":{"start":{"line":137,"column":12},"end":{"line":137,"column":31}},"id":152},"153":{"loc":{"start":{"line":137,"column":12},"end":{"line":137,"column":30}},"id":153},"154":{"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":27}},"id":154},"155":{"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":26}},"id":155},"156":{"loc":{"start":{"line":142,"column":4},"end":{"line":142,"column":24}},"id":156},"157":{"loc":{"start":{"line":147,"column":0},"end":{"line":159,"column":3}},"id":157},"158":{"loc":{"start":{"line":147,"column":15},"end":{"line":159,"column":2}},"id":158},"159":{"loc":{"start":{"line":148,"column":4},"end":{"line":148,"column":24}},"id":159},"160":{"loc":{"start":{"line":148,"column":11},"end":{"line":148,"column":23}},"id":160},"161":{"loc":{"start":{"line":149,"column":4},"end":{"line":149,"column":27}},"id":161},"162":{"loc":{"start":{"line":149,"column":17},"end":{"line":149,"column":26}},"id":162},"163":{"loc":{"start":{"line":150,"column":4},"end":{"line":157,"column":7}},"id":163},"164":{"loc":{"start":{"line":150,"column":4},"end":{"line":157,"column":6}},"id":164},"165":{"loc":{"start":{"line":152,"column":12},"end":{"line":152,"column":88}},"id":165},"166":{"loc":{"start":{"line":152,"column":28},"end":{"line":152,"column":87}},"id":166},"167":{"loc":{"start":{"line":152,"column":28},"end":{"line":152,"column":71}},"id":167},"168":{"loc":{"start":{"line":152,"column":28},"end":{"line":152,"column":64}},"id":168},"169":{"loc":{"start":{"line":152,"column":44},"end":{"line":152,"column":64}},"id":169},"170":{"loc":{"start":{"line":153,"column":12},"end":{"line":153,"column":40}},"id":170},"171":{"loc":{"start":{"line":153,"column":19},"end":{"line":153,"column":39}},"id":171},"172":{"loc":{"start":{"line":155,"column":12},"end":{"line":155,"column":33}},"id":172},"173":{"loc":{"start":{"line":155,"column":12},"end":{"line":155,"column":32}},"id":173},"174":{"loc":{"start":{"line":158,"column":4},"end":{"line":158,"column":26}},"id":174},"175":{"loc":{"start":{"line":165,"column":0},"end":{"line":182,"column":2}},"id":175},"176":{"loc":{"start":{"line":166,"column":4},"end":{"line":166,"column":20}},"id":176},"177":{"loc":{"start":{"line":167,"column":4},"end":{"line":167,"column":24}},"id":177},"178":{"loc":{"start":{"line":167,"column":11},"end":{"line":167,"column":23}},"id":178},"179":{"loc":{"start":{"line":168,"column":4},"end":{"line":168,"column":25}},"id":179},"180":{"loc":{"start":{"line":168,"column":15},"end":{"line":168,"column":24}},"id":180},"181":{"loc":{"start":{"line":170,"column":8},"end":{"line":177,"column":11}},"id":181},"182":{"loc":{"start":{"line":170,"column":8},"end":{"line":177,"column":10}},"id":182},"183":{"loc":{"start":{"line":172,"column":16},"end":{"line":172,"column":84}},"id":183},"184":{"loc":{"start":{"line":172,"column":32},"end":{"line":172,"column":83}},"id":184},"185":{"loc":{"start":{"line":172,"column":32},"end":{"line":172,"column":75}},"id":185},"186":{"loc":{"start":{"line":172,"column":32},"end":{"line":172,"column":68}},"id":186},"187":{"loc":{"start":{"line":172,"column":48},"end":{"line":172,"column":68}},"id":187},"188":{"loc":{"start":{"line":173,"column":16},"end":{"line":173,"column":35}},"id":188},"189":{"loc":{"start":{"line":173,"column":16},"end":{"line":173,"column":34}},"id":189},"190":{"loc":{"start":{"line":175,"column":16},"end":{"line":175,"column":46}},"id":190},"191":{"loc":{"start":{"line":175,"column":16},"end":{"line":175,"column":45}},"id":191},"192":{"loc":{"start":{"line":179,"column":8},"end":{"line":179,"column":27}},"id":192},"193":{"loc":{"start":{"line":179,"column":8},"end":{"line":179,"column":26}},"id":193},"194":{"loc":{"start":{"line":181,"column":4},"end":{"line":181,"column":24}},"id":194},"195":{"loc":{"start":{"line":184,"column":0},"end":{"line":187,"column":2}},"id":195},"196":{"loc":{"start":{"line":185,"column":4},"end":{"line":185,"column":25}},"id":196},"197":{"loc":{"start":{"line":186,"column":4},"end":{"line":186,"column":30}},"id":197},"198":{"loc":{"start":{"line":189,"column":0},"end":{"line":197,"column":2}},"id":198},"199":{"loc":{"start":{"line":199,"column":0},"end":{"line":203,"column":3}},"id":199},"200":{"loc":{"start":{"line":199,"column":0},"end":{"line":203,"column":2}},"id":200},"201":{"loc":{"start":{"line":200,"column":4},"end":{"line":202,"column":6}},"id":201},"202":{"loc":{"start":{"line":201,"column":8},"end":{"line":201,"column":33}},"id":202},"203":{"loc":{"start":{"line":201,"column":15},"end":{"line":201,"column":32}},"id":203},"204":{"loc":{"start":{"line":205,"column":0},"end":{"line":207,"column":2}},"id":204},"205":{"loc":{"start":{"line":206,"column":4},"end":{"line":206,"column":37}},"id":205},"206":{"loc":{"start":{"line":209,"column":0},"end":{"line":211,"column":2}},"id":206},"207":{"loc":{"start":{"line":210,"column":4},"end":{"line":210,"column":37}},"id":207},"208":{"loc":{"start":{"line":213,"column":0},"end":{"line":229,"column":2}},"id":208},"209":{"loc":{"start":{"line":214,"column":4},"end":{"line":214,"column":24}},"id":209},"210":{"loc":{"start":{"line":214,"column":11},"end":{"line":214,"column":23}},"id":210},"211":{"loc":{"start":{"line":215,"column":4},"end":{"line":215,"column":25}},"id":211},"212":{"loc":{"start":{"line":215,"column":15},"end":{"line":215,"column":24}},"id":212},"213":{"loc":{"start":{"line":217,"column":8},"end":{"line":224,"column":11}},"id":213},"214":{"loc":{"start":{"line":217,"column":8},"end":{"line":224,"column":10}},"id":214},"215":{"loc":{"start":{"line":219,"column":16},"end":{"line":219,"column":96}},"id":215},"216":{"loc":{"start":{"line":219,"column":32},"end":{"line":219,"column":95}},"id":216},"217":{"loc":{"start":{"line":219,"column":32},"end":{"line":219,"column":79}},"id":217},"218":{"loc":{"start":{"line":219,"column":32},"end":{"line":219,"column":72}},"id":218},"219":{"loc":{"start":{"line":219,"column":52},"end":{"line":219,"column":72}},"id":219},"220":{"loc":{"start":{"line":220,"column":16},"end":{"line":220,"column":35}},"id":220},"221":{"loc":{"start":{"line":220,"column":16},"end":{"line":220,"column":34}},"id":221},"222":{"loc":{"start":{"line":222,"column":16},"end":{"line":222,"column":35}},"id":222},"223":{"loc":{"start":{"line":222,"column":16},"end":{"line":222,"column":34}},"id":223},"224":{"loc":{"start":{"line":226,"column":8},"end":{"line":226,"column":27}},"id":224},"225":{"loc":{"start":{"line":226,"column":8},"end":{"line":226,"column":26}},"id":225},"226":{"loc":{"start":{"line":228,"column":4},"end":{"line":228,"column":24}},"id":226},"227":{"loc":{"start":{"line":231,"column":0},"end":{"line":247,"column":2}},"id":227},"228":{"loc":{"start":{"line":232,"column":4},"end":{"line":232,"column":20}},"id":228},"229":{"loc":{"start":{"line":232,"column":9},"end":{"line":232,"column":19}},"id":229},"230":{"loc":{"start":{"line":233,"column":4},"end":{"line":233,"column":25}},"id":230},"231":{"loc":{"start":{"line":233,"column":15},"end":{"line":233,"column":24}},"id":231},"232":{"loc":{"start":{"line":235,"column":8},"end":{"line":242,"column":11}},"id":232},"233":{"loc":{"start":{"line":235,"column":8},"end":{"line":242,"column":10}},"id":233},"234":{"loc":{"start":{"line":237,"column":16},"end":{"line":237,"column":108}},"id":234},"235":{"loc":{"start":{"line":237,"column":32},"end":{"line":237,"column":107}},"id":235},"236":{"loc":{"start":{"line":237,"column":32},"end":{"line":237,"column":91}},"id":236},"237":{"loc":{"start":{"line":237,"column":32},"end":{"line":237,"column":84}},"id":237},"238":{"loc":{"start":{"line":237,"column":66},"end":{"line":237,"column":84}},"id":238},"239":{"loc":{"start":{"line":238,"column":16},"end":{"line":238,"column":35}},"id":239},"240":{"loc":{"start":{"line":238,"column":16},"end":{"line":238,"column":34}},"id":240},"241":{"loc":{"start":{"line":240,"column":16},"end":{"line":240,"column":35}},"id":241},"242":{"loc":{"start":{"line":240,"column":16},"end":{"line":240,"column":34}},"id":242},"243":{"loc":{"start":{"line":244,"column":8},"end":{"line":244,"column":27}},"id":243},"244":{"loc":{"start":{"line":244,"column":8},"end":{"line":244,"column":26}},"id":244},"245":{"loc":{"start":{"line":246,"column":4},"end":{"line":246,"column":24}},"id":245},"246":{"loc":{"start":{"line":249,"column":0},"end":{"line":266,"column":2}},"id":246},"247":{"loc":{"start":{"line":250,"column":4},"end":{"line":250,"column":28}},"id":247},"248":{"loc":{"start":{"line":250,"column":13},"end":{"line":250,"column":27}},"id":248},"249":{"loc":{"start":{"line":251,"column":4},"end":{"line":251,"column":28}},"id":249},"250":{"loc":{"start":{"line":251,"column":13},"end":{"line":251,"column":27}},"id":250},"251":{"loc":{"start":{"line":252,"column":4},"end":{"line":252,"column":25}},"id":251},"252":{"loc":{"start":{"line":252,"column":15},"end":{"line":252,"column":24}},"id":252},"253":{"loc":{"start":{"line":254,"column":8},"end":{"line":261,"column":11}},"id":253},"254":{"loc":{"start":{"line":254,"column":8},"end":{"line":261,"column":10}},"id":254},"255":{"loc":{"start":{"line":256,"column":16},"end":{"line":256,"column":128}},"id":255},"256":{"loc":{"start":{"line":256,"column":32},"end":{"line":256,"column":127}},"id":256},"257":{"loc":{"start":{"line":256,"column":32},"end":{"line":256,"column":111}},"id":257},"258":{"loc":{"start":{"line":256,"column":32},"end":{"line":256,"column":104}},"id":258},"259":{"loc":{"start":{"line":256,"column":32},"end":{"line":256,"column":79}},"id":259},"260":{"loc":{"start":{"line":256,"column":32},"end":{"line":256,"column":70}},"id":260},"261":{"loc":{"start":{"line":256,"column":48},"end":{"line":256,"column":70}},"id":261},"262":{"loc":{"start":{"line":256,"column":82},"end":{"line":256,"column":104}},"id":262},"263":{"loc":{"start":{"line":257,"column":16},"end":{"line":257,"column":35}},"id":263},"264":{"loc":{"start":{"line":257,"column":16},"end":{"line":257,"column":34}},"id":264},"265":{"loc":{"start":{"line":259,"column":16},"end":{"line":259,"column":31}},"id":265},"266":{"loc":{"start":{"line":259,"column":16},"end":{"line":259,"column":30}},"id":266},"267":{"loc":{"start":{"line":263,"column":8},"end":{"line":263,"column":27}},"id":267},"268":{"loc":{"start":{"line":263,"column":8},"end":{"line":263,"column":26}},"id":268},"269":{"loc":{"start":{"line":265,"column":4},"end":{"line":265,"column":24}},"id":269},"270":{"loc":{"start":{"line":270,"column":0},"end":{"line":274,"column":2}},"id":270},"271":{"loc":{"start":{"line":276,"column":0},"end":{"line":297,"column":2}},"id":271},"272":{"loc":{"start":{"line":277,"column":9},"end":{"line":277,"column":39}},"id":272},"273":{"loc":{"start":{"line":278,"column":8},"end":{"line":278,"column":152}},"id":273},"274":{"loc":{"start":{"line":278,"column":8},"end":{"line":278,"column":151}},"id":274},"275":{"loc":{"start":{"line":280,"column":4},"end":{"line":280,"column":27}},"id":275},"276":{"loc":{"start":{"line":281,"column":4},"end":{"line":281,"column":28}},"id":276},"277":{"loc":{"start":{"line":281,"column":13},"end":{"line":281,"column":27}},"id":277},"278":{"loc":{"start":{"line":282,"column":4},"end":{"line":282,"column":32}},"id":278},"279":{"loc":{"start":{"line":282,"column":15},"end":{"line":282,"column":31}},"id":279},"280":{"loc":{"start":{"line":283,"column":4},"end":{"line":283,"column":25}},"id":280},"281":{"loc":{"start":{"line":283,"column":15},"end":{"line":283,"column":24}},"id":281},"282":{"loc":{"start":{"line":285,"column":8},"end":{"line":292,"column":11}},"id":282},"283":{"loc":{"start":{"line":285,"column":8},"end":{"line":292,"column":10}},"id":283},"284":{"loc":{"start":{"line":285,"column":37},"end":{"line":285,"column":51}},"id":284},"285":{"loc":{"start":{"line":287,"column":16},"end":{"line":287,"column":163}},"id":285},"286":{"loc":{"start":{"line":287,"column":32},"end":{"line":287,"column":162}},"id":286},"287":{"loc":{"start":{"line":287,"column":32},"end":{"line":287,"column":146}},"id":287},"288":{"loc":{"start":{"line":287,"column":32},"end":{"line":287,"column":139}},"id":288},"289":{"loc":{"start":{"line":287,"column":32},"end":{"line":287,"column":112}},"id":289},"290":{"loc":{"start":{"line":287,"column":32},"end":{"line":287,"column":85}},"id":290},"291":{"loc":{"start":{"line":287,"column":63},"end":{"line":287,"column":85}},"id":291},"292":{"loc":{"start":{"line":287,"column":115},"end":{"line":287,"column":139}},"id":292},"293":{"loc":{"start":{"line":288,"column":16},"end":{"line":288,"column":35}},"id":293},"294":{"loc":{"start":{"line":288,"column":16},"end":{"line":288,"column":34}},"id":294},"295":{"loc":{"start":{"line":290,"column":16},"end":{"line":290,"column":31}},"id":295},"296":{"loc":{"start":{"line":290,"column":16},"end":{"line":290,"column":30}},"id":296},"297":{"loc":{"start":{"line":294,"column":8},"end":{"line":294,"column":27}},"id":297},"298":{"loc":{"start":{"line":294,"column":8},"end":{"line":294,"column":26}},"id":298},"299":{"loc":{"start":{"line":296,"column":4},"end":{"line":296,"column":24}},"id":299},"300":{"loc":{"start":{"line":299,"column":0},"end":{"line":315,"column":2}},"id":300},"301":{"loc":{"start":{"line":300,"column":4},"end":{"line":300,"column":24}},"id":301},"302":{"loc":{"start":{"line":300,"column":11},"end":{"line":300,"column":23}},"id":302},"303":{"loc":{"start":{"line":301,"column":4},"end":{"line":301,"column":25}},"id":303},"304":{"loc":{"start":{"line":301,"column":15},"end":{"line":301,"column":24}},"id":304},"305":{"loc":{"start":{"line":303,"column":8},"end":{"line":310,"column":11}},"id":305},"306":{"loc":{"start":{"line":303,"column":8},"end":{"line":310,"column":10}},"id":306},"307":{"loc":{"start":{"line":305,"column":16},"end":{"line":305,"column":185}},"id":307},"308":{"loc":{"start":{"line":305,"column":32},"end":{"line":305,"column":184}},"id":308},"309":{"loc":{"start":{"line":305,"column":32},"end":{"line":305,"column":168}},"id":309},"310":{"loc":{"start":{"line":305,"column":32},"end":{"line":305,"column":161}},"id":310},"311":{"loc":{"start":{"line":305,"column":32},"end":{"line":305,"column":139}},"id":311},"312":{"loc":{"start":{"line":305,"column":32},"end":{"line":305,"column":123}},"id":312},"313":{"loc":{"start":{"line":305,"column":32},"end":{"line":305,"column":101}},"id":313},"314":{"loc":{"start":{"line":305,"column":32},"end":{"line":305,"column":87}},"id":314},"315":{"loc":{"start":{"line":305,"column":67},"end":{"line":305,"column":87}},"id":315},"316":{"loc":{"start":{"line":305,"column":104},"end":{"line":305,"column":123}},"id":316},"317":{"loc":{"start":{"line":305,"column":142},"end":{"line":305,"column":161}},"id":317},"318":{"loc":{"start":{"line":306,"column":16},"end":{"line":306,"column":35}},"id":318},"319":{"loc":{"start":{"line":306,"column":16},"end":{"line":306,"column":34}},"id":319},"320":{"loc":{"start":{"line":308,"column":16},"end":{"line":308,"column":31}},"id":320},"321":{"loc":{"start":{"line":308,"column":16},"end":{"line":308,"column":30}},"id":321},"322":{"loc":{"start":{"line":312,"column":8},"end":{"line":312,"column":27}},"id":322},"323":{"loc":{"start":{"line":312,"column":8},"end":{"line":312,"column":26}},"id":323},"324":{"loc":{"start":{"line":314,"column":4},"end":{"line":314,"column":24}},"id":324},"325":{"loc":{"start":{"line":317,"column":0},"end":{"line":334,"column":2}},"id":325},"326":{"loc":{"start":{"line":318,"column":4},"end":{"line":318,"column":24}},"id":326},"327":{"loc":{"start":{"line":318,"column":11},"end":{"line":318,"column":23}},"id":327},"328":{"loc":{"start":{"line":319,"column":4},"end":{"line":319,"column":24}},"id":328},"329":{"loc":{"start":{"line":319,"column":11},"end":{"line":319,"column":23}},"id":329},"330":{"loc":{"start":{"line":320,"column":4},"end":{"line":320,"column":25}},"id":330},"331":{"loc":{"start":{"line":320,"column":15},"end":{"line":320,"column":24}},"id":331},"332":{"loc":{"start":{"line":322,"column":8},"end":{"line":329,"column":11}},"id":332},"333":{"loc":{"start":{"line":322,"column":8},"end":{"line":329,"column":10}},"id":333},"334":{"loc":{"start":{"line":324,"column":16},"end":{"line":324,"column":165}},"id":334},"335":{"loc":{"start":{"line":324,"column":32},"end":{"line":324,"column":164}},"id":335},"336":{"loc":{"start":{"line":324,"column":32},"end":{"line":324,"column":148}},"id":336},"337":{"loc":{"start":{"line":324,"column":32},"end":{"line":324,"column":141}},"id":337},"338":{"loc":{"start":{"line":324,"column":32},"end":{"line":324,"column":122}},"id":338},"339":{"loc":{"start":{"line":324,"column":32},"end":{"line":324,"column":98}},"id":339},"340":{"loc":{"start":{"line":324,"column":78},"end":{"line":324,"column":98}},"id":340},"341":{"loc":{"start":{"line":324,"column":125},"end":{"line":324,"column":141}},"id":341},"342":{"loc":{"start":{"line":325,"column":16},"end":{"line":325,"column":35}},"id":342},"343":{"loc":{"start":{"line":325,"column":16},"end":{"line":325,"column":34}},"id":343},"344":{"loc":{"start":{"line":327,"column":16},"end":{"line":327,"column":31}},"id":344},"345":{"loc":{"start":{"line":327,"column":16},"end":{"line":327,"column":30}},"id":345},"346":{"loc":{"start":{"line":331,"column":8},"end":{"line":331,"column":27}},"id":346},"347":{"loc":{"start":{"line":331,"column":8},"end":{"line":331,"column":26}},"id":347},"348":{"loc":{"start":{"line":333,"column":4},"end":{"line":333,"column":24}},"id":348},"349":{"loc":{"start":{"line":336,"column":0},"end":{"line":347,"column":2}},"id":349},"350":{"loc":{"start":{"line":337,"column":4},"end":{"line":337,"column":27}},"id":350},"351":{"loc":{"start":{"line":337,"column":17},"end":{"line":337,"column":26}},"id":351},"352":{"loc":{"start":{"line":338,"column":4},"end":{"line":345,"column":7}},"id":352},"353":{"loc":{"start":{"line":338,"column":4},"end":{"line":345,"column":6}},"id":353},"354":{"loc":{"start":{"line":340,"column":12},"end":{"line":340,"column":126}},"id":354},"355":{"loc":{"start":{"line":340,"column":28},"end":{"line":340,"column":125}},"id":355},"356":{"loc":{"start":{"line":340,"column":28},"end":{"line":340,"column":109}},"id":356},"357":{"loc":{"start":{"line":340,"column":28},"end":{"line":340,"column":81}},"id":357},"358":{"loc":{"start":{"line":340,"column":61},"end":{"line":340,"column":81}},"id":358},"359":{"loc":{"start":{"line":341,"column":12},"end":{"line":341,"column":33}},"id":359},"360":{"loc":{"start":{"line":341,"column":12},"end":{"line":341,"column":32}},"id":360},"361":{"loc":{"start":{"line":343,"column":12},"end":{"line":343,"column":42}},"id":361},"362":{"loc":{"start":{"line":343,"column":12},"end":{"line":343,"column":41}},"id":362},"363":{"loc":{"start":{"line":346,"column":4},"end":{"line":346,"column":26}},"id":363},"364":{"loc":{"start":{"line":349,"column":0},"end":{"line":360,"column":2}},"id":364},"365":{"loc":{"start":{"line":350,"column":4},"end":{"line":350,"column":27}},"id":365},"366":{"loc":{"start":{"line":350,"column":17},"end":{"line":350,"column":26}},"id":366},"367":{"loc":{"start":{"line":351,"column":4},"end":{"line":358,"column":7}},"id":367},"368":{"loc":{"start":{"line":351,"column":4},"end":{"line":358,"column":6}},"id":368},"369":{"loc":{"start":{"line":353,"column":12},"end":{"line":353,"column":118}},"id":369},"370":{"loc":{"start":{"line":353,"column":28},"end":{"line":353,"column":117}},"id":370},"371":{"loc":{"start":{"line":353,"column":28},"end":{"line":353,"column":101}},"id":371},"372":{"loc":{"start":{"line":353,"column":28},"end":{"line":353,"column":73}},"id":372},"373":{"loc":{"start":{"line":353,"column":53},"end":{"line":353,"column":73}},"id":373},"374":{"loc":{"start":{"line":354,"column":12},"end":{"line":354,"column":33}},"id":374},"375":{"loc":{"start":{"line":354,"column":12},"end":{"line":354,"column":32}},"id":375},"376":{"loc":{"start":{"line":356,"column":12},"end":{"line":356,"column":33}},"id":376},"377":{"loc":{"start":{"line":356,"column":12},"end":{"line":356,"column":32}},"id":377},"378":{"loc":{"start":{"line":359,"column":4},"end":{"line":359,"column":26}},"id":378}}}},"/Users/kris/q-io/reader.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":39},"4":{"index":4,"count":39},"5":{"index":5,"count":39},"6":{"index":6,"count":4},"7":{"index":7,"count":4},"8":{"index":8,"count":39},"9":{"index":9,"count":39},"10":{"index":10,"count":39},"11":{"index":11,"count":39},"12":{"index":12,"count":39},"13":{"index":13,"count":39},"16":{"index":16,"count":39},"17":{"index":17,"count":39},"18":{"index":18,"count":39},"19":{"index":19,"count":39},"20":{"index":20,"count":39},"21":{"index":21,"count":39},"22":{"index":22,"count":39},"23":{"index":23,"count":39},"24":{"index":24,"count":39},"25":{"index":25,"count":39},"26":{"index":26,"count":28},"27":{"index":27,"count":28},"30":{"index":30,"count":28},"31":{"index":31,"count":28},"32":{"index":32,"count":30},"33":{"index":33,"count":4},"34":{"index":34,"count":4},"35":{"index":35,"count":26},"36":{"index":36,"count":26},"37":{"index":37,"count":30},"38":{"index":38,"count":30},"39":{"index":39,"count":30},"40":{"index":40,"count":39},"41":{"index":41,"count":28},"42":{"index":42,"count":28},"43":{"index":43,"count":28},"44":{"index":44,"count":28},"45":{"index":45,"count":28},"46":{"index":46,"count":28},"47":{"index":47,"count":28},"48":{"index":48,"count":28},"49":{"index":49,"count":28},"50":{"index":50,"count":39},"51":{"index":51,"count":3},"52":{"index":52,"count":2},"53":{"index":53,"count":2},"54":{"index":54,"count":2},"55":{"index":55,"count":3},"56":{"index":56,"count":3},"57":{"index":57,"count":3},"58":{"index":58,"count":3},"59":{"index":59,"count":39},"62":{"index":62,"count":39},"63":{"index":63,"count":1},"73":{"index":73,"count":1},"74":{"index":74,"count":48},"75":{"index":75,"count":48},"76":{"index":76,"count":48},"77":{"index":77,"count":48},"78":{"index":78,"count":48},"79":{"index":79,"count":48},"80":{"index":80,"count":94},"81":{"index":81,"count":46},"82":{"index":82,"count":46},"83":{"index":83,"count":46},"84":{"index":84,"count":48},"85":{"index":85,"count":48},"86":{"index":86,"count":94},"87":{"index":87,"count":46},"88":{"index":88,"count":46},"89":{"index":89,"count":46},"90":{"index":90,"count":46},"91":{"index":91,"count":46},"92":{"index":92,"count":48},"93":{"index":93,"count":48},"94":{"index":94,"count":48}},"blocks":{"0":{"index":0,"count":39},"1":{"index":1,"count":4},"3":{"index":3,"count":39},"4":{"index":4,"count":28},"6":{"index":6,"count":28},"7":{"index":7,"count":30},"8":{"index":8,"count":4},"9":{"index":9,"count":26},"10":{"index":10,"count":28},"11":{"index":11,"count":28},"12":{"index":12,"count":3},"13":{"index":13,"count":2},"14":{"index":14,"count":3},"20":{"index":20,"count":48},"21":{"index":21,"count":46},"22":{"index":22,"count":46}},"hash":"24c2b103d427c684f91c5cc6d3968af8","instrumentor":{"blockCounter":23,"nodeCounter":95,"source":"var Q = require(\"q\");\n\n/**\n * Wraps a Node readable stream, providing an API similar\n * to a Narwhal synchronous `io` stream except returning\n * Q promises for long latency operations.\n * @param stream any Node readable stream\n * @returns {Promise * Reader} a promise for\n * the text stream reader.\n * @constructor\n */\nmodule.exports = Reader;\nfunction Reader(_stream, charset) {\n    var self = Object.create(Reader.prototype);\n\n    if (charset && _stream.setEncoding) // TODO complain about inconsistency\n        _stream.setEncoding(charset);\n\n    var begin = Q.defer();\n    var end = Q.defer();\n\n    _stream.on(\"error\", function (reason) {\n        begin.reject(reason);\n    });\n\n    var chunks = [];\n    var receiver;\n\n    _stream.on(\"end\", function () {\n        begin.resolve(self);\n        end.resolve()\n    });\n\n    _stream.on(\"data\", function (chunk) {\n        begin.resolve(self);\n        if (receiver) {\n            receiver(chunk);\n        } else {\n            chunks.push(chunk);\n        }\n    });\n\n    function slurp() {\n        var result;\n        if (charset) {\n            result = chunks.join(\"\");\n        } else {\n            result = self.constructor.join(chunks);\n        }\n        chunks.splice(0, chunks.length);\n        return result;\n    }\n\n    /***\n     * Reads all of the remaining data from the stream.\n     * @returns {Promise * String} a promise for a String\n     * containing the entirety the remaining stream.\n     */\n    self.read = function () {\n        receiver = undefined;\n        var deferred = Q.defer();\n        Q.done(end.promise, function () {\n            deferred.resolve(slurp());\n        });\n        return deferred.promise;\n    };\n\n    /***\n     * Reads and writes all of the remaining data from the\n     * stream in chunks.\n     * @param {Function(Promise * String)} write a function\n     * to be called on each chunk of input from this stream.\n     * @returns {Promise * Undefined} a promise that will\n     * be resolved when the input is depleted.\n     */\n    self.forEach = function (write) {\n        if (chunks && chunks.length)\n            write(slurp());\n        receiver = write;\n        return Q.when(end.promise, function () {\n            receiver = undefined;\n        });\n    };\n\n    self.close = function () {\n        _stream.destroy();\n    };\n\n    return begin.promise;\n}\n\n/*\n    Reads an entire forEachable stream of buffers and returns a single buffer.\n*/\nReader.read = read;\nfunction read(stream, charset) {\n    var chunks = [];\n    stream.forEach(function (chunk) {\n        chunks.push(chunk);\n    });\n    if (charset) {\n        return chunks.join(\"\");\n    } else {\n        return join(chunks);\n    }\n}\n\nReader.join = join;\nfunction join(buffers) {\n    var length = 0;\n    var at;\n    var i;\n    var ii = buffers.length;\n    var buffer;\n    var result;\n    for (i = 0; i < ii; i++) {\n        buffer = buffers[i];\n        length += buffer.length;\n    }\n    result = new Buffer(length);\n    at = 0;\n    for (i = 0; i < ii; i++) {\n        buffer = buffers[i];\n        buffer.copy(result, at, 0);\n        at += buffer.length;\n    }\n    buffers.splice(0, ii, result);\n    return result;\n}","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":24}},"id":2},"3":{"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":47}},"id":3},"4":{"loc":{"start":{"line":14,"column":15},"end":{"line":14,"column":46}},"id":4},"5":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":38}},"id":5},"6":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":37}},"id":6},"7":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":36}},"id":7},"8":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":26}},"id":8},"9":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":25}},"id":9},"10":{"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":24}},"id":10},"11":{"loc":{"start":{"line":20,"column":14},"end":{"line":20,"column":23}},"id":11},"12":{"loc":{"start":{"line":22,"column":4},"end":{"line":24,"column":7}},"id":12},"13":{"loc":{"start":{"line":22,"column":4},"end":{"line":24,"column":6}},"id":13},"14":{"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":29}},"id":14},"15":{"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":28}},"id":15},"16":{"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":20}},"id":16},"17":{"loc":{"start":{"line":27,"column":4},"end":{"line":27,"column":17}},"id":17},"18":{"loc":{"start":{"line":29,"column":4},"end":{"line":32,"column":7}},"id":18},"19":{"loc":{"start":{"line":29,"column":4},"end":{"line":32,"column":6}},"id":19},"20":{"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":28}},"id":20},"21":{"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":27}},"id":21},"22":{"loc":{"start":{"line":31,"column":8},"end":{"line":32,"column":4}},"id":22},"23":{"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":21}},"id":23},"24":{"loc":{"start":{"line":34,"column":4},"end":{"line":41,"column":7}},"id":24},"25":{"loc":{"start":{"line":34,"column":4},"end":{"line":41,"column":6}},"id":25},"26":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":28}},"id":26},"27":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":27}},"id":27},"28":{"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":28}},"id":28},"29":{"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":27}},"id":29},"30":{"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":31}},"id":30},"31":{"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":30}},"id":31},"32":{"loc":{"start":{"line":44,"column":8},"end":{"line":44,"column":19}},"id":32},"33":{"loc":{"start":{"line":46,"column":12},"end":{"line":46,"column":37}},"id":33},"34":{"loc":{"start":{"line":46,"column":21},"end":{"line":46,"column":36}},"id":34},"35":{"loc":{"start":{"line":48,"column":12},"end":{"line":48,"column":51}},"id":35},"36":{"loc":{"start":{"line":48,"column":21},"end":{"line":48,"column":50}},"id":36},"37":{"loc":{"start":{"line":50,"column":8},"end":{"line":50,"column":40}},"id":37},"38":{"loc":{"start":{"line":50,"column":8},"end":{"line":50,"column":39}},"id":38},"39":{"loc":{"start":{"line":51,"column":8},"end":{"line":51,"column":22}},"id":39},"40":{"loc":{"start":{"line":59,"column":4},"end":{"line":66,"column":6}},"id":40},"41":{"loc":{"start":{"line":60,"column":8},"end":{"line":60,"column":29}},"id":41},"42":{"loc":{"start":{"line":61,"column":8},"end":{"line":61,"column":33}},"id":42},"43":{"loc":{"start":{"line":61,"column":23},"end":{"line":61,"column":32}},"id":43},"44":{"loc":{"start":{"line":62,"column":8},"end":{"line":64,"column":11}},"id":44},"45":{"loc":{"start":{"line":62,"column":8},"end":{"line":64,"column":10}},"id":45},"46":{"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":38}},"id":46},"47":{"loc":{"start":{"line":63,"column":12},"end":{"line":63,"column":37}},"id":47},"48":{"loc":{"start":{"line":63,"column":29},"end":{"line":63,"column":36}},"id":48},"49":{"loc":{"start":{"line":65,"column":8},"end":{"line":65,"column":32}},"id":49},"50":{"loc":{"start":{"line":76,"column":4},"end":{"line":83,"column":6}},"id":50},"51":{"loc":{"start":{"line":77,"column":12},"end":{"line":77,"column":35}},"id":51},"52":{"loc":{"start":{"line":78,"column":12},"end":{"line":78,"column":27}},"id":52},"53":{"loc":{"start":{"line":78,"column":12},"end":{"line":78,"column":26}},"id":53},"54":{"loc":{"start":{"line":78,"column":18},"end":{"line":78,"column":25}},"id":54},"55":{"loc":{"start":{"line":79,"column":8},"end":{"line":79,"column":25}},"id":55},"56":{"loc":{"start":{"line":80,"column":8},"end":{"line":82,"column":11}},"id":56},"57":{"loc":{"start":{"line":80,"column":15},"end":{"line":82,"column":10}},"id":57},"58":{"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":33}},"id":58},"59":{"loc":{"start":{"line":85,"column":4},"end":{"line":87,"column":6}},"id":59},"60":{"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":26}},"id":60},"61":{"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":25}},"id":61},"62":{"loc":{"start":{"line":89,"column":4},"end":{"line":89,"column":25}},"id":62},"63":{"loc":{"start":{"line":95,"column":0},"end":{"line":95,"column":19}},"id":63},"64":{"loc":{"start":{"line":97,"column":4},"end":{"line":97,"column":20}},"id":64},"65":{"loc":{"start":{"line":98,"column":4},"end":{"line":100,"column":7}},"id":65},"66":{"loc":{"start":{"line":98,"column":4},"end":{"line":100,"column":6}},"id":66},"67":{"loc":{"start":{"line":99,"column":8},"end":{"line":99,"column":27}},"id":67},"68":{"loc":{"start":{"line":99,"column":8},"end":{"line":99,"column":26}},"id":68},"69":{"loc":{"start":{"line":102,"column":8},"end":{"line":102,"column":31}},"id":69},"70":{"loc":{"start":{"line":102,"column":15},"end":{"line":102,"column":30}},"id":70},"71":{"loc":{"start":{"line":104,"column":8},"end":{"line":104,"column":28}},"id":71},"72":{"loc":{"start":{"line":104,"column":15},"end":{"line":104,"column":27}},"id":72},"73":{"loc":{"start":{"line":108,"column":0},"end":{"line":108,"column":19}},"id":73},"74":{"loc":{"start":{"line":110,"column":4},"end":{"line":110,"column":19}},"id":74},"75":{"loc":{"start":{"line":111,"column":4},"end":{"line":111,"column":11}},"id":75},"76":{"loc":{"start":{"line":112,"column":4},"end":{"line":112,"column":10}},"id":76},"77":{"loc":{"start":{"line":113,"column":4},"end":{"line":113,"column":28}},"id":77},"78":{"loc":{"start":{"line":114,"column":4},"end":{"line":114,"column":15}},"id":78},"79":{"loc":{"start":{"line":115,"column":4},"end":{"line":115,"column":15}},"id":79},"80":{"loc":{"start":{"line":116,"column":16},"end":{"line":116,"column":22}},"id":80},"81":{"loc":{"start":{"line":116,"column":24},"end":{"line":116,"column":27}},"id":81},"82":{"loc":{"start":{"line":117,"column":8},"end":{"line":117,"column":28}},"id":82},"83":{"loc":{"start":{"line":118,"column":8},"end":{"line":118,"column":32}},"id":83},"84":{"loc":{"start":{"line":120,"column":4},"end":{"line":120,"column":32}},"id":84},"85":{"loc":{"start":{"line":121,"column":4},"end":{"line":121,"column":11}},"id":85},"86":{"loc":{"start":{"line":122,"column":16},"end":{"line":122,"column":22}},"id":86},"87":{"loc":{"start":{"line":122,"column":24},"end":{"line":122,"column":27}},"id":87},"88":{"loc":{"start":{"line":123,"column":8},"end":{"line":123,"column":28}},"id":88},"89":{"loc":{"start":{"line":124,"column":8},"end":{"line":124,"column":35}},"id":89},"90":{"loc":{"start":{"line":124,"column":8},"end":{"line":124,"column":34}},"id":90},"91":{"loc":{"start":{"line":125,"column":8},"end":{"line":125,"column":28}},"id":91},"92":{"loc":{"start":{"line":127,"column":4},"end":{"line":127,"column":34}},"id":92},"93":{"loc":{"start":{"line":127,"column":4},"end":{"line":127,"column":33}},"id":93},"94":{"loc":{"start":{"line":128,"column":4},"end":{"line":128,"column":18}},"id":94}}}},"/Users/kris/q-io/writer.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"32":{"index":32,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1}},"blocks":{"0":{"index":0,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"6":{"index":6,"count":1},"9":{"index":9,"count":1}},"hash":"17cc8ce63050c0045f908ac78f4f87cd","instrumentor":{"blockCounter":11,"nodeCounter":50,"source":"var Q = require(\"q\");\n\n/**\n * Wraps a Node writable stream, providing an API similar to\n * Narwhal's synchronous `io` streams, except returning and\n * accepting promises for long-latency operations.\n *\n * @param stream any Node writable stream\n * @returns {Promise * Writer} a promise for the\n * text writer.\n */\nmodule.exports = Writer;\nfunction Writer(_stream, charset) {\n    var self = Object.create(Writer.prototype);\n\n    if (charset && _stream.setEncoding) // TODO complain about inconsistency\n        _stream.setEncoding(charset);\n\n    var begin = Q.defer();\n    var drained = Q.defer();\n\n    _stream.on(\"error\", function (reason) {\n        begin.reject(reason);\n    });\n\n    _stream.on(\"drain\", function () {\n        begin.resolve(self);\n        drained.resolve();\n        drained = Q.defer();\n    });\n\n    /***\n     * Writes content to the stream.\n     * @param {String} content\n     * @returns {Promise * Undefined} a promise that will\n     * be resolved when the buffer is empty, meaning\n     * that all of the content has been sent.\n     */\n    self.write = function (content) {\n        if (!_stream.writeable && !_stream.writable)\n            return Q.reject(new Error(\"Can't write to non-writable (possibly closed) stream\"));\n        if (!_stream.write(content)) {\n            return drained.promise;\n        } else {\n            return Q.resolve();\n        }\n    };\n\n    /***\n     * Waits for all data to flush on the stream.\n     *\n     * @returns {Promise * Undefined} a promise that will\n     * be resolved when the buffer is empty\n     */\n    self.flush = function () {\n        return drained.promise;\n    };\n\n    /***\n     * Closes the stream, waiting for the internal buffer\n     * to flush.\n     *\n     * @returns {Promise * Undefined} a promise that will\n     * be resolved when the stream has finished writing,\n     * flushing, and closed.\n     */\n    self.close = function () {\n        _stream.end();\n        drained.resolve(); // we will get no further drain events\n        return Q.resolve(); // closing not explicitly observable\n    };\n\n    /***\n     * Terminates writing on a stream, closing before\n     * the internal buffer drains.\n     *\n     * @returns {Promise * Undefined} a promise that will\n     * be resolved when the stream has finished closing.\n     */\n    self.destroy = function () {\n        _stream.destroy();\n        drained.resolve(); // we will get no further drain events\n        return Q.resolve(); // destruction not explicitly observable\n    };\n\n    return Q.resolve(self); // todo returns the begin.promise\n}","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":24}},"id":2},"3":{"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":47}},"id":3},"4":{"loc":{"start":{"line":14,"column":15},"end":{"line":14,"column":46}},"id":4},"5":{"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":38}},"id":5},"6":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":37}},"id":6},"7":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":36}},"id":7},"8":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":26}},"id":8},"9":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":25}},"id":9},"10":{"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":28}},"id":10},"11":{"loc":{"start":{"line":20,"column":18},"end":{"line":20,"column":27}},"id":11},"12":{"loc":{"start":{"line":22,"column":4},"end":{"line":24,"column":7}},"id":12},"13":{"loc":{"start":{"line":22,"column":4},"end":{"line":24,"column":6}},"id":13},"14":{"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":29}},"id":14},"15":{"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":28}},"id":15},"16":{"loc":{"start":{"line":26,"column":4},"end":{"line":30,"column":7}},"id":16},"17":{"loc":{"start":{"line":26,"column":4},"end":{"line":30,"column":6}},"id":17},"18":{"loc":{"start":{"line":27,"column":8},"end":{"line":27,"column":28}},"id":18},"19":{"loc":{"start":{"line":27,"column":8},"end":{"line":27,"column":27}},"id":19},"20":{"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":26}},"id":20},"21":{"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":25}},"id":21},"22":{"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":28}},"id":22},"23":{"loc":{"start":{"line":29,"column":18},"end":{"line":29,"column":27}},"id":23},"24":{"loc":{"start":{"line":39,"column":4},"end":{"line":47,"column":6}},"id":24},"25":{"loc":{"start":{"line":40,"column":12},"end":{"line":40,"column":51}},"id":25},"26":{"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":95}},"id":26},"27":{"loc":{"start":{"line":41,"column":19},"end":{"line":41,"column":94}},"id":27},"28":{"loc":{"start":{"line":42,"column":13},"end":{"line":42,"column":35}},"id":28},"29":{"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":35}},"id":29},"30":{"loc":{"start":{"line":45,"column":12},"end":{"line":45,"column":31}},"id":30},"31":{"loc":{"start":{"line":45,"column":19},"end":{"line":45,"column":30}},"id":31},"32":{"loc":{"start":{"line":55,"column":4},"end":{"line":57,"column":6}},"id":32},"33":{"loc":{"start":{"line":56,"column":8},"end":{"line":56,"column":31}},"id":33},"34":{"loc":{"start":{"line":67,"column":4},"end":{"line":71,"column":6}},"id":34},"35":{"loc":{"start":{"line":68,"column":8},"end":{"line":68,"column":22}},"id":35},"36":{"loc":{"start":{"line":68,"column":8},"end":{"line":68,"column":21}},"id":36},"37":{"loc":{"start":{"line":69,"column":8},"end":{"line":69,"column":26}},"id":37},"38":{"loc":{"start":{"line":69,"column":8},"end":{"line":69,"column":25}},"id":38},"39":{"loc":{"start":{"line":70,"column":8},"end":{"line":70,"column":27}},"id":39},"40":{"loc":{"start":{"line":70,"column":15},"end":{"line":70,"column":26}},"id":40},"41":{"loc":{"start":{"line":80,"column":4},"end":{"line":84,"column":6}},"id":41},"42":{"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":26}},"id":42},"43":{"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":25}},"id":43},"44":{"loc":{"start":{"line":82,"column":8},"end":{"line":82,"column":26}},"id":44},"45":{"loc":{"start":{"line":82,"column":8},"end":{"line":82,"column":25}},"id":45},"46":{"loc":{"start":{"line":83,"column":8},"end":{"line":83,"column":27}},"id":46},"47":{"loc":{"start":{"line":83,"column":15},"end":{"line":83,"column":26}},"id":47},"48":{"loc":{"start":{"line":86,"column":4},"end":{"line":86,"column":27}},"id":48},"49":{"loc":{"start":{"line":86,"column":11},"end":{"line":86,"column":26}},"id":49}}}},"/Users/kris/q-io/fs-common.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":83},"10":{"index":10,"count":83},"11":{"index":11,"count":1},"12":{"index":12,"count":270},"13":{"index":13,"count":18},"14":{"index":14,"count":40},"15":{"index":15,"count":1},"16":{"index":16,"count":39},"17":{"index":17,"count":39},"18":{"index":18,"count":39},"19":{"index":19,"count":39},"20":{"index":20,"count":40},"21":{"index":21,"count":40},"22":{"index":22,"count":40},"23":{"index":23,"count":40},"24":{"index":24,"count":40},"25":{"index":25,"count":40},"26":{"index":26,"count":40},"27":{"index":27,"count":40},"28":{"index":28,"count":40},"37":{"index":37,"count":18},"38":{"index":38,"count":4},"39":{"index":39,"count":4},"41":{"index":41,"count":4},"42":{"index":42,"count":4},"43":{"index":43,"count":4},"44":{"index":44,"count":4},"45":{"index":45,"count":4},"46":{"index":46,"count":4},"47":{"index":47,"count":4},"48":{"index":48,"count":4},"49":{"index":49,"count":4},"50":{"index":50,"count":4},"51":{"index":51,"count":4},"52":{"index":52,"count":4},"53":{"index":53,"count":4},"54":{"index":54,"count":4},"55":{"index":55,"count":4},"56":{"index":56,"count":4},"57":{"index":57,"count":18},"77":{"index":77,"count":18},"78":{"index":78,"count":2},"79":{"index":79,"count":2},"80":{"index":80,"count":2},"81":{"index":81,"count":2},"82":{"index":82,"count":2},"83":{"index":83,"count":2},"84":{"index":84,"count":2},"85":{"index":85,"count":2},"86":{"index":86,"count":2},"87":{"index":87,"count":2},"88":{"index":88,"count":2},"89":{"index":89,"count":2},"90":{"index":90,"count":2},"91":{"index":91,"count":2},"92":{"index":92,"count":18},"93":{"index":93,"count":4},"94":{"index":94,"count":4},"95":{"index":95,"count":4},"96":{"index":96,"count":4},"97":{"index":97,"count":4},"98":{"index":98,"count":2},"99":{"index":99,"count":2},"100":{"index":100,"count":2},"101":{"index":101,"count":2},"102":{"index":102,"count":2},"103":{"index":103,"count":2},"104":{"index":104,"count":2},"105":{"index":105,"count":2},"106":{"index":106,"count":2},"107":{"index":107,"count":2},"108":{"index":108,"count":2},"109":{"index":109,"count":2},"110":{"index":110,"count":3},"111":{"index":111,"count":3},"112":{"index":112,"count":3},"113":{"index":113,"count":3},"117":{"index":117,"count":18},"118":{"index":118,"count":83},"119":{"index":119,"count":83},"120":{"index":120,"count":83},"121":{"index":121,"count":83},"122":{"index":122,"count":13},"123":{"index":123,"count":83},"124":{"index":124,"count":83},"125":{"index":125,"count":69},"126":{"index":126,"count":83},"127":{"index":127,"count":83},"128":{"index":128,"count":83},"129":{"index":129,"count":83},"130":{"index":130,"count":83},"131":{"index":131,"count":83},"132":{"index":132,"count":83},"133":{"index":133,"count":83},"134":{"index":134,"count":83},"135":{"index":135,"count":83},"138":{"index":138,"count":83},"139":{"index":139,"count":83},"140":{"index":140,"count":77},"141":{"index":141,"count":77},"142":{"index":142,"count":83},"143":{"index":143,"count":83},"144":{"index":144,"count":83},"145":{"index":145,"count":38},"146":{"index":146,"count":38},"147":{"index":147,"count":38},"148":{"index":148,"count":38},"149":{"index":149,"count":38},"150":{"index":150,"count":38},"151":{"index":151,"count":64},"152":{"index":152,"count":64},"153":{"index":153,"count":64},"154":{"index":154,"count":64},"155":{"index":155,"count":38},"156":{"index":156,"count":45},"158":{"index":158,"count":18},"163":{"index":163,"count":18},"164":{"index":164,"count":3},"165":{"index":165,"count":3},"166":{"index":166,"count":3},"167":{"index":167,"count":3},"168":{"index":168,"count":3},"171":{"index":171,"count":3},"172":{"index":172,"count":3},"173":{"index":173,"count":7},"174":{"index":174,"count":7},"175":{"index":175,"count":7},"176":{"index":176,"count":7},"177":{"index":177,"count":7},"178":{"index":178,"count":7},"179":{"index":179,"count":7},"180":{"index":180,"count":7},"181":{"index":181,"count":7},"182":{"index":182,"count":7},"189":{"index":189,"count":18},"190":{"index":190,"count":3},"191":{"index":191,"count":3},"192":{"index":192,"count":3},"193":{"index":193,"count":3},"194":{"index":194,"count":3},"197":{"index":197,"count":3},"198":{"index":198,"count":1},"199":{"index":199,"count":1},"200":{"index":200,"count":1},"201":{"index":201,"count":1},"202":{"index":202,"count":1},"203":{"index":203,"count":1},"204":{"index":204,"count":1},"205":{"index":205,"count":2},"206":{"index":206,"count":2},"207":{"index":207,"count":2},"208":{"index":208,"count":1},"209":{"index":209,"count":1},"210":{"index":210,"count":2},"211":{"index":211,"count":2},"212":{"index":212,"count":18},"213":{"index":213,"count":1},"214":{"index":214,"count":1},"215":{"index":215,"count":1},"216":{"index":216,"count":1},"217":{"index":217,"count":1},"218":{"index":218,"count":1},"219":{"index":219,"count":18},"220":{"index":220,"count":3},"221":{"index":221,"count":3},"222":{"index":222,"count":3},"223":{"index":223,"count":2},"224":{"index":224,"count":1},"225":{"index":225,"count":18},"226":{"index":226,"count":3},"227":{"index":227,"count":3},"228":{"index":228,"count":3},"229":{"index":229,"count":3},"230":{"index":230,"count":3},"232":{"index":232,"count":18},"233":{"index":233,"count":5},"234":{"index":234,"count":5},"235":{"index":235,"count":5},"236":{"index":236,"count":3},"237":{"index":237,"count":3},"238":{"index":238,"count":2},"239":{"index":239,"count":18},"240":{"index":240,"count":2},"241":{"index":241,"count":2},"242":{"index":242,"count":2},"243":{"index":243,"count":1},"244":{"index":244,"count":1},"245":{"index":245,"count":1},"246":{"index":246,"count":18},"251":{"index":251,"count":18},"256":{"index":256,"count":18},"257":{"index":257,"count":251},"258":{"index":258,"count":95},"259":{"index":259,"count":156},"260":{"index":260,"count":156},"261":{"index":261,"count":156},"262":{"index":262,"count":18},"263":{"index":263,"count":1},"264":{"index":264,"count":1},"265":{"index":265,"count":1},"266":{"index":266,"count":1},"269":{"index":269,"count":1},"270":{"index":270,"count":1},"271":{"index":271,"count":18},"272":{"index":272,"count":1},"273":{"index":273,"count":1},"274":{"index":274,"count":1},"275":{"index":275,"count":1},"276":{"index":276,"count":1},"277":{"index":277,"count":1},"278":{"index":278,"count":1},"279":{"index":279,"count":1},"280":{"index":280,"count":1},"281":{"index":281,"count":1},"282":{"index":282,"count":1},"283":{"index":283,"count":1},"284":{"index":284,"count":1},"285":{"index":285,"count":4},"286":{"index":286,"count":4},"287":{"index":287,"count":3},"288":{"index":288,"count":3},"289":{"index":289,"count":3},"290":{"index":290,"count":3},"291":{"index":291,"count":3},"296":{"index":296,"count":1},"297":{"index":297,"count":1},"298":{"index":298,"count":18},"302":{"index":302,"count":37},"303":{"index":303,"count":37},"304":{"index":304,"count":37},"305":{"index":305,"count":37},"306":{"index":306,"count":37},"307":{"index":307,"count":37},"308":{"index":308,"count":37},"309":{"index":309,"count":37},"310":{"index":310,"count":37},"311":{"index":311,"count":37},"312":{"index":312,"count":37},"313":{"index":313,"count":37},"314":{"index":314,"count":6},"315":{"index":315,"count":6},"316":{"index":316,"count":6},"317":{"index":317,"count":250},"318":{"index":318,"count":250},"319":{"index":319,"count":213},"320":{"index":320,"count":213},"321":{"index":321,"count":213},"322":{"index":322,"count":213},"323":{"index":323,"count":213},"328":{"index":328,"count":37},"329":{"index":329,"count":37},"330":{"index":330,"count":18},"331":{"index":331,"count":5},"332":{"index":332,"count":5},"333":{"index":333,"count":5},"334":{"index":334,"count":5},"335":{"index":335,"count":5},"336":{"index":336,"count":5},"337":{"index":337,"count":5},"338":{"index":338,"count":5},"339":{"index":339,"count":5},"340":{"index":340,"count":5},"341":{"index":341,"count":5},"342":{"index":342,"count":5},"343":{"index":343,"count":5},"347":{"index":347,"count":5},"349":{"index":349,"count":20},"350":{"index":350,"count":15},"351":{"index":351,"count":15},"352":{"index":352,"count":5},"353":{"index":353,"count":5},"354":{"index":354,"count":18},"374":{"index":374,"count":18},"375":{"index":375,"count":1},"376":{"index":376,"count":1},"377":{"index":377,"count":1},"378":{"index":378,"count":1},"379":{"index":379,"count":2},"380":{"index":380,"count":2},"381":{"index":381,"count":1},"382":{"index":382,"count":1},"383":{"index":383,"count":1},"384":{"index":384,"count":1},"385":{"index":385,"count":1},"386":{"index":386,"count":1},"387":{"index":387,"count":1},"388":{"index":388,"count":1},"389":{"index":389,"count":1},"390":{"index":390,"count":1},"391":{"index":391,"count":1},"392":{"index":392,"count":1},"393":{"index":393,"count":18},"394":{"index":394,"count":1},"395":{"index":395,"count":1},"396":{"index":396,"count":1},"397":{"index":397,"count":1},"398":{"index":398,"count":3},"399":{"index":399,"count":3},"400":{"index":400,"count":3},"401":{"index":401,"count":3},"402":{"index":402,"count":3},"403":{"index":403,"count":12},"404":{"index":404,"count":12},"405":{"index":405,"count":3},"406":{"index":406,"count":3},"407":{"index":407,"count":3},"408":{"index":408,"count":7},"409":{"index":409,"count":7},"410":{"index":410,"count":7},"411":{"index":411,"count":7},"412":{"index":412,"count":1},"413":{"index":413,"count":1},"414":{"index":414,"count":1},"415":{"index":415,"count":1}},"blocks":{"0":{"index":0,"count":83},"1":{"index":1,"count":18},"2":{"index":2,"count":270},"3":{"index":3,"count":40},"4":{"index":4,"count":1},"5":{"index":5,"count":39},"6":{"index":6,"count":40},"8":{"index":8,"count":4},"10":{"index":10,"count":4},"11":{"index":11,"count":4},"12":{"index":12,"count":4},"18":{"index":18,"count":2},"19":{"index":19,"count":2},"20":{"index":20,"count":2},"21":{"index":21,"count":2},"22":{"index":22,"count":4},"23":{"index":23,"count":4},"24":{"index":24,"count":2},"25":{"index":25,"count":2},"26":{"index":26,"count":2},"27":{"index":27,"count":2},"28":{"index":28,"count":3},"30":{"index":30,"count":83},"31":{"index":31,"count":13},"32":{"index":32,"count":69},"33":{"index":33,"count":83},"34":{"index":34,"count":83},"36":{"index":36,"count":83},"37":{"index":37,"count":77},"38":{"index":38,"count":38},"39":{"index":39,"count":38},"40":{"index":40,"count":64},"41":{"index":41,"count":45},"45":{"index":45,"count":3},"47":{"index":47,"count":7},"48":{"index":48,"count":7},"52":{"index":52,"count":3},"53":{"index":53,"count":3},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":2},"58":{"index":58,"count":1},"59":{"index":59,"count":2},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":3},"63":{"index":63,"count":2},"64":{"index":64,"count":1},"65":{"index":65,"count":3},"66":{"index":66,"count":3},"68":{"index":68,"count":5},"69":{"index":69,"count":3},"70":{"index":70,"count":2},"71":{"index":71,"count":2},"72":{"index":72,"count":1},"73":{"index":73,"count":1},"76":{"index":76,"count":251},"77":{"index":77,"count":95},"78":{"index":78,"count":1},"79":{"index":79,"count":1},"81":{"index":81,"count":1},"82":{"index":82,"count":1},"83":{"index":83,"count":3},"85":{"index":85,"count":37},"87":{"index":87,"count":6},"88":{"index":88,"count":213},"90":{"index":90,"count":5},"93":{"index":93,"count":15},"101":{"index":101,"count":1},"102":{"index":102,"count":2},"103":{"index":103,"count":1},"104":{"index":104,"count":1},"105":{"index":105,"count":1},"106":{"index":106,"count":1},"107":{"index":107,"count":1},"108":{"index":108,"count":3},"109":{"index":109,"count":3},"110":{"index":110,"count":12},"111":{"index":111,"count":3},"112":{"index":112,"count":7},"113":{"index":113,"count":7},"114":{"index":114,"count":1}},"hash":"5909370009a071fcd6319bf4f1c214d4","instrumentor":{"blockCounter":115,"nodeCounter":416,"source":"var Q = require(\"q\");\nvar Boot = require(\"./fs-boot\");\nvar RootFs = require(\"./fs-root\");\nvar MockFs = require(\"./fs-mock\");\n\n// TODO patternToRegExp\n// TODO glob\n// TODO match\n\nvar concat = function (arrays) {\n    return Array.prototype.concat.apply([], arrays);\n};\n\nexports.update = function (exports, workingDirectory) {\n\n    for (var name in Boot) {\n        exports[name] = Boot[name];\n    }\n\n    /**\n     * @param {String} path\n     * @param {Object} options\n     * @returns {Promise * (String || Buffer)}\n     */\n    exports.read = function (path, flags, charset, options) {\n        if (typeof flags == \"object\") {\n            options = flags;\n        } else {\n            options = options || {};\n            options.flags = flags;\n            options.carset = charset;\n        }\n        options.flags = \"r\" + (options.flags || \"\").replace(/r/g, \"\");\n        return Q.when(this.open(path, options), function (stream) {\n            return stream.read();\n        }, function (error) {\n            error.message = \"Can't read \" + path + \" because \" + error.message;\n            error.path = path;\n            error.flags = flags;\n            error.charset = charset;\n            throw error;\n        });\n    };\n\n    /**\n     * @param {String} path\n     * @param {String || Buffer} content\n     * @param {Object} options\n     * @returns {Promise * Undefined} a promise that resolves\n     * when the writing is complete.\n     */\n    exports.write = function (path, content, flags, charset, options) {\n        var self = this;\n        if (typeof flags == \"object\") {\n            options = flags;\n        } else {\n            options = options || {};\n            options.flags = flags;\n            options.carset = charset;\n        }\n        options.flags = \"w\" + (options.flags || \"\").replace(/w/g, \"\");\n        return Q.when(self.open(path, options), function (stream) {\n            return Q.when(stream.write(content), function () {\n                return stream.close();\n            });\n        });\n    };\n\n    exports.append = function (path, content, flags, charset, options) {\n        var self = this;\n        if (typeof flags == \"object\") {\n            options = flags;\n        } else {\n            options = options || {};\n            options.flags = flags;\n            options.carset = charset;\n        }\n        options.flags = \"w+\" + (options.flags || \"\").replace(/[w\\+]/g, \"\");\n        return Q.when(self.open(path, options), function (stream) {\n            return Q.when(stream.write(content), function () {\n                return stream.close();\n            });\n        });\n    };\n\n    exports.copy = function (source, target) {\n        var self = this;\n        return Q.spread([\n            self.open(source, {flags: \"rb\"}),\n            self.open(target, {flags: \"wb\"})\n        ], function (reader, writer) {\n            return Q.when(reader.forEach(function (block) {\n                return writer.write(block);\n            }), function () {\n                return Q.all([\n                    reader.close(),\n                    writer.close()\n                ]);\n            });\n        });\n    };\n\n    exports.copyTree = function (source, target) {\n        var self = this;\n        return Q.when(self.stat(source), function (stat) {\n            if (stat.isFile()) {\n                return self.copy(source, target);\n            } else if (stat.isDirectory()) {\n                return Q.when(self.makeDirectory(target), function () {\n                    return Q.when(self.list(source), function (list) {\n                        return Q.all(list.map(function (child) {\n                            return self.copyTree(\n                                self.join(source, child),\n                                self.join(target, child)\n                            );\n                        }));\n                    });\n                });\n            } else if (stat.isSymbolicLink()) {\n                return self.symbolicCopy(source, target);\n            }\n        });\n    };\n\n    exports.listTree = function (basePath, guard) {\n        var self = this;\n        basePath = String(basePath || '');\n        if (!basePath)\n            basePath = \".\";\n        guard = guard || function () {\n            return true;\n        };\n        var stat = self.stat(basePath);\n        return Q.when(stat, function (stat) {\n            var paths = [];\n            var mode; // true:include, false:exclude, null:no-recur\n            try {\n                var include = guard(basePath, stat);\n            } catch (exception) {\n                return Q.reject(exception);\n            }\n            return Q.when(include, function (include) {\n                if (include) {\n                    paths.push([basePath]);\n                }\n                if (include !== null && stat.isDirectory()) {\n                    return Q.when(self.list(basePath), function (children) {\n                        paths.push.apply(paths, children.map(function (child) {\n                            var path = self.join(basePath, child);\n                            return self.listTree(path, guard);\n                        }));\n                        return paths;\n                    });\n                } else {\n                    return paths;\n                }\n            });\n        }, function noSuchFile(reason) {\n            return [];\n        }).then(Q.all).then(concat);\n    };\n\n    exports.listDirectoryTree = function (path) {\n        return this.listTree(path, function (path, stat) {\n            return stat.isDirectory();\n        });\n    };\n\n    exports.makeTree = function (path, mode) {\n        var self = this;\n        var parts = self.split(path);\n        var at = [];\n        if (self.isAbsolute(path))\n            at.push(self.ROOT);\n        return parts.reduce(function (parent, part) {\n            return Q.when(parent, function () {\n                at.push(part);\n                var parts = self.join(at);\n                var made = self.makeDirectory(parts, mode);\n                return Q.when(made, null, function rejected(reason) {\n                    // throw away errors for already made directories\n                    if (reason.code == \"EEXIST\" || reason.code == \"EISDIR\") {\n                        return;\n                    } else {\n                        return Q.reject(reason);\n                    }\n                });\n            });\n        }, undefined);\n    };\n\n    exports.removeTree = function (path) {\n        var self = this;\n        return Q.when(self.stat(path), function (stat) {\n            if (stat.isSymbolicLink()) {\n                return self.remove(path);\n            } else if (stat.isDirectory()) {\n                return self.list(path)\n                .then(function (list) {\n                    // asynchronously remove every subtree\n                    return Q.all(list.map(function (name) {\n                        return self.removeTree(self.join(path, name));\n                    }))\n                    .then(function () {\n                        return self.removeDirectory(path);\n                    });\n                });\n            } else {\n                return self.remove(path);\n            }\n        });\n    };\n\n    exports.symbolicCopy = function (source, target) {\n        var self = this;\n        return Q.when(self.relative(target, source), function (relative) {\n            return self.symbolicLink(target, relative, \"file\");\n        });\n    };\n\n    exports.exists = function (path) {\n        return Q.when(this.stat(path), function () {\n            return true;\n        }, function () {\n            return false;\n        });\n    };\n\n    exports.isFile = function (path) {\n        return Q.when(this.stat(path), function (stat) {\n            return stat.isFile();\n        }, function (reason) {\n            return false;\n        });\n    };\n\n    exports.isDirectory = function (path) {\n        return Q.when(this.stat(path), function (stat) {\n            return stat.isDirectory();\n        }, function (reason) {\n            return false;\n        });\n    };\n\n    exports.isSymbolicLink = function (path) {\n        return Q.when(this.statLink(path), function (stat) {\n            return stat.isSymbolicLink();\n        }, function (reason) {\n            return false;\n        });\n    };\n\n    exports.lastModified = function (path) {\n        var self = this;\n        return self.stat(path).invoke('lastModified');\n    };\n\n    exports.lastAccessed = function (path) {\n        var self = this;\n        return self.stat(path).invoke('lastAccessed');\n    };\n\n    exports.absolute = function (path) {\n        if (this.isAbsolute(path))\n            return path;\n        return this.join(workingDirectory(), path);\n    };\n\n    exports.relative = function (source, target) {\n        var self = this;\n        return Q.when(this.isDirectory(source), function (isDirectory) {\n            if (isDirectory) {\n                return self.relativeFromDirectory(source, target);\n            } else {\n                return self.relativeFromFile(source, target);\n            }\n        });\n    };\n\n    exports.relativeFromFile = function (source, target) {\n        var self = this;\n        source = self.absolute(source);\n        target = self.absolute(target);\n        source = source.split(self.SEPARATORS_RE());\n        target = target.split(self.SEPARATORS_RE());\n        source.pop();\n        while (\n            source.length &&\n            target.length &&\n            target[0] == source[0]\n        ) {\n            source.shift();\n            target.shift();\n        }\n        while (source.length) {\n            source.shift();\n            target.unshift(\"..\");\n        }\n        return target.join(self.SEPARATOR);\n    };\n\n    exports.relativeFromDirectory = function (source, target) {\n        if (!target) {\n            target = source;\n            source = workingDirectory();\n        }\n        source = this.absolute(source);\n        target = this.absolute(target);\n        source = source.split(this.SEPARATORS_RE());\n        target = target.split(this.SEPARATORS_RE());\n        if (source.length === 2 && source[1] === \"\")\n            source.pop();\n        while (\n            source.length &&\n            target.length &&\n            target[0] == source[0]\n        ) {\n            source.shift();\n            target.shift();\n        }\n        while (source.length) {\n            source.shift();\n            target.unshift(\"..\");\n        }\n        return target.join(this.SEPARATOR);\n    };\n\n    exports.contains = function (parent, child) {\n        var i, ii;\n        parent = this.absolute(parent);\n        child = this.absolute(child);\n        parent = parent.split(this.SEPARATORS_RE());\n        child = child.split(this.SEPARATORS_RE());\n        if (parent.length === 2 && parent[1] === \"\")\n            parent.pop();\n        if (parent.length > child.length)\n            return false;\n        for (i = 0, ii = parent.length; i < ii; i++) {\n            if (parent[i] !== child[i])\n                break;\n        }\n        return i == ii;\n    };\n\n    exports.reroot = reroot;\n    function reroot(path) {\n        var self = this;\n        path = path || this.ROOT;\n        return Q.when(this.list(path), function (list) {\n            if (list.length !== 1)\n                return RootFs(self, path);\n            var nextPath = self.join(path, list[0]);\n            return Q.when(self.stat(nextPath), function (stat) {\n                if (stat.isDirectory()) {\n                    return reroot(nextPath);\n                } else {\n                    return RootFs(self, path);\n                }\n            });\n        });\n    }\n\n    exports.toObject = function (path) {\n        var self = this;\n        var list = self.listTree(path || \"\", function (path, stat) {\n            return stat.isFile();\n        });\n        return Q.when(list, function (list) {\n            var tree = {};\n            return Q.all(list.map(function (path) {\n                return Q.when(self.read(path, \"rb\"), function (content) {\n                    tree[path] = content;\n                });\n            })).then(function () {\n                return tree;\n            });\n        });\n    };\n\n    exports.merge = function (fss) {\n        var tree = {};\n        var done;\n        fss.forEach(function (fs) {\n            done = Q.when(done, function () {\n                return fs.listTree(\"\", function (path, stat) {\n                    return stat.isFile();\n                })\n                .then(function (list) {\n                    return Q.all(list.map(function (path) {\n                        return Q.when(fs.read(path, \"rb\"), function (content) {\n                            tree[path] = content;\n                        });\n                    }));\n                });\n            });\n        })\n        return Q.when(done, function () {\n            return MockFs(tree);\n        });\n    };\n\n}","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":32}},"id":2},"3":{"loc":{"start":{"line":2,"column":11},"end":{"line":2,"column":31}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"id":4},"5":{"loc":{"start":{"line":3,"column":13},"end":{"line":3,"column":33}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":34}},"id":6},"7":{"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":33}},"id":7},"8":{"loc":{"start":{"line":10,"column":0},"end":{"line":12,"column":2}},"id":8},"9":{"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":52}},"id":9},"10":{"loc":{"start":{"line":11,"column":11},"end":{"line":11,"column":51}},"id":10},"11":{"loc":{"start":{"line":14,"column":0},"end":{"line":403,"column":0}},"id":11},"12":{"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":35}},"id":12},"13":{"loc":{"start":{"line":25,"column":4},"end":{"line":43,"column":6}},"id":13},"14":{"loc":{"start":{"line":26,"column":12},"end":{"line":26,"column":36}},"id":14},"15":{"loc":{"start":{"line":27,"column":12},"end":{"line":27,"column":28}},"id":15},"16":{"loc":{"start":{"line":29,"column":12},"end":{"line":29,"column":36}},"id":16},"17":{"loc":{"start":{"line":29,"column":22},"end":{"line":29,"column":35}},"id":17},"18":{"loc":{"start":{"line":30,"column":12},"end":{"line":30,"column":34}},"id":18},"19":{"loc":{"start":{"line":31,"column":12},"end":{"line":31,"column":37}},"id":19},"20":{"loc":{"start":{"line":33,"column":8},"end":{"line":33,"column":70}},"id":20},"21":{"loc":{"start":{"line":33,"column":24},"end":{"line":33,"column":69}},"id":21},"22":{"loc":{"start":{"line":33,"column":30},"end":{"line":33,"column":69}},"id":22},"23":{"loc":{"start":{"line":33,"column":30},"end":{"line":33,"column":51}},"id":23},"24":{"loc":{"start":{"line":34,"column":8},"end":{"line":42,"column":11}},"id":24},"25":{"loc":{"start":{"line":34,"column":15},"end":{"line":42,"column":10}},"id":25},"26":{"loc":{"start":{"line":34,"column":22},"end":{"line":34,"column":46}},"id":26},"27":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"id":27},"28":{"loc":{"start":{"line":35,"column":19},"end":{"line":35,"column":32}},"id":28},"29":{"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":79}},"id":29},"30":{"loc":{"start":{"line":37,"column":28},"end":{"line":37,"column":78}},"id":30},"31":{"loc":{"start":{"line":37,"column":28},"end":{"line":37,"column":62}},"id":31},"32":{"loc":{"start":{"line":37,"column":28},"end":{"line":37,"column":48}},"id":32},"33":{"loc":{"start":{"line":38,"column":12},"end":{"line":38,"column":30}},"id":33},"34":{"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":32}},"id":34},"35":{"loc":{"start":{"line":40,"column":12},"end":{"line":40,"column":36}},"id":35},"36":{"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":24}},"id":36},"37":{"loc":{"start":{"line":52,"column":4},"end":{"line":67,"column":6}},"id":37},"38":{"loc":{"start":{"line":53,"column":8},"end":{"line":53,"column":24}},"id":38},"39":{"loc":{"start":{"line":54,"column":12},"end":{"line":54,"column":36}},"id":39},"40":{"loc":{"start":{"line":55,"column":12},"end":{"line":55,"column":28}},"id":40},"41":{"loc":{"start":{"line":57,"column":12},"end":{"line":57,"column":36}},"id":41},"42":{"loc":{"start":{"line":57,"column":22},"end":{"line":57,"column":35}},"id":42},"43":{"loc":{"start":{"line":58,"column":12},"end":{"line":58,"column":34}},"id":43},"44":{"loc":{"start":{"line":59,"column":12},"end":{"line":59,"column":37}},"id":44},"45":{"loc":{"start":{"line":61,"column":8},"end":{"line":61,"column":70}},"id":45},"46":{"loc":{"start":{"line":61,"column":24},"end":{"line":61,"column":69}},"id":46},"47":{"loc":{"start":{"line":61,"column":30},"end":{"line":61,"column":69}},"id":47},"48":{"loc":{"start":{"line":61,"column":30},"end":{"line":61,"column":51}},"id":48},"49":{"loc":{"start":{"line":62,"column":8},"end":{"line":66,"column":11}},"id":49},"50":{"loc":{"start":{"line":62,"column":15},"end":{"line":66,"column":10}},"id":50},"51":{"loc":{"start":{"line":62,"column":22},"end":{"line":62,"column":46}},"id":51},"52":{"loc":{"start":{"line":63,"column":12},"end":{"line":65,"column":15}},"id":52},"53":{"loc":{"start":{"line":63,"column":19},"end":{"line":65,"column":14}},"id":53},"54":{"loc":{"start":{"line":63,"column":26},"end":{"line":63,"column":47}},"id":54},"55":{"loc":{"start":{"line":64,"column":16},"end":{"line":64,"column":38}},"id":55},"56":{"loc":{"start":{"line":64,"column":23},"end":{"line":64,"column":37}},"id":56},"57":{"loc":{"start":{"line":69,"column":4},"end":{"line":84,"column":6}},"id":57},"58":{"loc":{"start":{"line":70,"column":8},"end":{"line":70,"column":24}},"id":58},"59":{"loc":{"start":{"line":71,"column":12},"end":{"line":71,"column":36}},"id":59},"60":{"loc":{"start":{"line":72,"column":12},"end":{"line":72,"column":28}},"id":60},"61":{"loc":{"start":{"line":74,"column":12},"end":{"line":74,"column":36}},"id":61},"62":{"loc":{"start":{"line":74,"column":22},"end":{"line":74,"column":35}},"id":62},"63":{"loc":{"start":{"line":75,"column":12},"end":{"line":75,"column":34}},"id":63},"64":{"loc":{"start":{"line":76,"column":12},"end":{"line":76,"column":37}},"id":64},"65":{"loc":{"start":{"line":78,"column":8},"end":{"line":78,"column":75}},"id":65},"66":{"loc":{"start":{"line":78,"column":24},"end":{"line":78,"column":74}},"id":66},"67":{"loc":{"start":{"line":78,"column":31},"end":{"line":78,"column":74}},"id":67},"68":{"loc":{"start":{"line":78,"column":31},"end":{"line":78,"column":52}},"id":68},"69":{"loc":{"start":{"line":79,"column":8},"end":{"line":83,"column":11}},"id":69},"70":{"loc":{"start":{"line":79,"column":15},"end":{"line":83,"column":10}},"id":70},"71":{"loc":{"start":{"line":79,"column":22},"end":{"line":79,"column":46}},"id":71},"72":{"loc":{"start":{"line":80,"column":12},"end":{"line":82,"column":15}},"id":72},"73":{"loc":{"start":{"line":80,"column":19},"end":{"line":82,"column":14}},"id":73},"74":{"loc":{"start":{"line":80,"column":26},"end":{"line":80,"column":47}},"id":74},"75":{"loc":{"start":{"line":81,"column":16},"end":{"line":81,"column":38}},"id":75},"76":{"loc":{"start":{"line":81,"column":23},"end":{"line":81,"column":37}},"id":76},"77":{"loc":{"start":{"line":86,"column":4},"end":{"line":101,"column":6}},"id":77},"78":{"loc":{"start":{"line":87,"column":8},"end":{"line":87,"column":24}},"id":78},"79":{"loc":{"start":{"line":88,"column":8},"end":{"line":100,"column":11}},"id":79},"80":{"loc":{"start":{"line":88,"column":15},"end":{"line":100,"column":10}},"id":80},"81":{"loc":{"start":{"line":89,"column":12},"end":{"line":89,"column":44}},"id":81},"82":{"loc":{"start":{"line":90,"column":12},"end":{"line":90,"column":44}},"id":82},"83":{"loc":{"start":{"line":92,"column":12},"end":{"line":99,"column":15}},"id":83},"84":{"loc":{"start":{"line":92,"column":19},"end":{"line":99,"column":14}},"id":84},"85":{"loc":{"start":{"line":92,"column":26},"end":{"line":94,"column":14}},"id":85},"86":{"loc":{"start":{"line":93,"column":16},"end":{"line":93,"column":43}},"id":86},"87":{"loc":{"start":{"line":93,"column":23},"end":{"line":93,"column":42}},"id":87},"88":{"loc":{"start":{"line":95,"column":16},"end":{"line":98,"column":19}},"id":88},"89":{"loc":{"start":{"line":95,"column":23},"end":{"line":98,"column":18}},"id":89},"90":{"loc":{"start":{"line":96,"column":20},"end":{"line":96,"column":34}},"id":90},"91":{"loc":{"start":{"line":97,"column":20},"end":{"line":97,"column":34}},"id":91},"92":{"loc":{"start":{"line":103,"column":4},"end":{"line":123,"column":6}},"id":92},"93":{"loc":{"start":{"line":104,"column":8},"end":{"line":104,"column":24}},"id":93},"94":{"loc":{"start":{"line":105,"column":8},"end":{"line":122,"column":11}},"id":94},"95":{"loc":{"start":{"line":105,"column":15},"end":{"line":122,"column":10}},"id":95},"96":{"loc":{"start":{"line":105,"column":22},"end":{"line":105,"column":39}},"id":96},"97":{"loc":{"start":{"line":106,"column":16},"end":{"line":106,"column":29}},"id":97},"98":{"loc":{"start":{"line":107,"column":16},"end":{"line":107,"column":49}},"id":98},"99":{"loc":{"start":{"line":107,"column":23},"end":{"line":107,"column":48}},"id":99},"100":{"loc":{"start":{"line":108,"column":23},"end":{"line":108,"column":41}},"id":100},"101":{"loc":{"start":{"line":109,"column":16},"end":{"line":118,"column":19}},"id":101},"102":{"loc":{"start":{"line":109,"column":23},"end":{"line":118,"column":18}},"id":102},"103":{"loc":{"start":{"line":109,"column":30},"end":{"line":109,"column":56}},"id":103},"104":{"loc":{"start":{"line":110,"column":20},"end":{"line":117,"column":23}},"id":104},"105":{"loc":{"start":{"line":110,"column":27},"end":{"line":117,"column":22}},"id":105},"106":{"loc":{"start":{"line":110,"column":34},"end":{"line":110,"column":51}},"id":106},"107":{"loc":{"start":{"line":111,"column":24},"end":{"line":116,"column":28}},"id":107},"108":{"loc":{"start":{"line":111,"column":31},"end":{"line":116,"column":27}},"id":108},"109":{"loc":{"start":{"line":111,"column":37},"end":{"line":116,"column":26}},"id":109},"110":{"loc":{"start":{"line":112,"column":28},"end":{"line":115,"column":30}},"id":110},"111":{"loc":{"start":{"line":112,"column":35},"end":{"line":115,"column":29}},"id":111},"112":{"loc":{"start":{"line":113,"column":32},"end":{"line":113,"column":56}},"id":112},"113":{"loc":{"start":{"line":114,"column":32},"end":{"line":114,"column":56}},"id":113},"114":{"loc":{"start":{"line":119,"column":23},"end":{"line":119,"column":44}},"id":114},"115":{"loc":{"start":{"line":120,"column":16},"end":{"line":120,"column":57}},"id":115},"116":{"loc":{"start":{"line":120,"column":23},"end":{"line":120,"column":56}},"id":116},"117":{"loc":{"start":{"line":125,"column":4},"end":{"line":161,"column":6}},"id":117},"118":{"loc":{"start":{"line":126,"column":8},"end":{"line":126,"column":24}},"id":118},"119":{"loc":{"start":{"line":127,"column":8},"end":{"line":127,"column":42}},"id":119},"120":{"loc":{"start":{"line":127,"column":19},"end":{"line":127,"column":41}},"id":120},"121":{"loc":{"start":{"line":127,"column":26},"end":{"line":127,"column":40}},"id":121},"122":{"loc":{"start":{"line":129,"column":12},"end":{"line":129,"column":27}},"id":122},"123":{"loc":{"start":{"line":130,"column":8},"end":{"line":132,"column":10}},"id":123},"124":{"loc":{"start":{"line":130,"column":16},"end":{"line":132,"column":9}},"id":124},"125":{"loc":{"start":{"line":131,"column":12},"end":{"line":131,"column":24}},"id":125},"126":{"loc":{"start":{"line":133,"column":8},"end":{"line":133,"column":39}},"id":126},"127":{"loc":{"start":{"line":133,"column":19},"end":{"line":133,"column":38}},"id":127},"128":{"loc":{"start":{"line":134,"column":8},"end":{"line":160,"column":36}},"id":128},"129":{"loc":{"start":{"line":134,"column":15},"end":{"line":160,"column":35}},"id":129},"130":{"loc":{"start":{"line":160,"column":15},"end":{"line":160,"column":22}},"id":130},"131":{"loc":{"start":{"line":134,"column":21},"end":{"line":160,"column":10}},"id":131},"132":{"loc":{"start":{"line":135,"column":12},"end":{"line":135,"column":27}},"id":132},"133":{"loc":{"start":{"line":136,"column":12},"end":{"line":136,"column":21}},"id":133},"134":{"loc":{"start":{"line":138,"column":16},"end":{"line":138,"column":52}},"id":134},"135":{"loc":{"start":{"line":138,"column":30},"end":{"line":138,"column":51}},"id":135},"136":{"loc":{"start":{"line":140,"column":16},"end":{"line":140,"column":43}},"id":136},"137":{"loc":{"start":{"line":140,"column":23},"end":{"line":140,"column":42}},"id":137},"138":{"loc":{"start":{"line":142,"column":12},"end":{"line":157,"column":15}},"id":138},"139":{"loc":{"start":{"line":142,"column":19},"end":{"line":157,"column":14}},"id":139},"140":{"loc":{"start":{"line":144,"column":20},"end":{"line":144,"column":43}},"id":140},"141":{"loc":{"start":{"line":144,"column":20},"end":{"line":144,"column":42}},"id":141},"142":{"loc":{"start":{"line":146,"column":20},"end":{"line":146,"column":58}},"id":142},"143":{"loc":{"start":{"line":146,"column":20},"end":{"line":146,"column":36}},"id":143},"144":{"loc":{"start":{"line":146,"column":40},"end":{"line":146,"column":58}},"id":144},"145":{"loc":{"start":{"line":147,"column":20},"end":{"line":153,"column":23}},"id":145},"146":{"loc":{"start":{"line":147,"column":27},"end":{"line":153,"column":22}},"id":146},"147":{"loc":{"start":{"line":147,"column":34},"end":{"line":147,"column":53}},"id":147},"148":{"loc":{"start":{"line":148,"column":24},"end":{"line":151,"column":28}},"id":148},"149":{"loc":{"start":{"line":148,"column":24},"end":{"line":151,"column":27}},"id":149},"150":{"loc":{"start":{"line":148,"column":48},"end":{"line":151,"column":26}},"id":150},"151":{"loc":{"start":{"line":149,"column":28},"end":{"line":149,"column":66}},"id":151},"152":{"loc":{"start":{"line":149,"column":39},"end":{"line":149,"column":65}},"id":152},"153":{"loc":{"start":{"line":150,"column":28},"end":{"line":150,"column":62}},"id":153},"154":{"loc":{"start":{"line":150,"column":35},"end":{"line":150,"column":61}},"id":154},"155":{"loc":{"start":{"line":152,"column":24},"end":{"line":152,"column":37}},"id":155},"156":{"loc":{"start":{"line":155,"column":20},"end":{"line":155,"column":33}},"id":156},"157":{"loc":{"start":{"line":159,"column":12},"end":{"line":159,"column":22}},"id":157},"158":{"loc":{"start":{"line":163,"column":4},"end":{"line":167,"column":6}},"id":158},"159":{"loc":{"start":{"line":164,"column":8},"end":{"line":166,"column":11}},"id":159},"160":{"loc":{"start":{"line":164,"column":15},"end":{"line":166,"column":10}},"id":160},"161":{"loc":{"start":{"line":165,"column":12},"end":{"line":165,"column":38}},"id":161},"162":{"loc":{"start":{"line":165,"column":19},"end":{"line":165,"column":37}},"id":162},"163":{"loc":{"start":{"line":169,"column":4},"end":{"line":190,"column":6}},"id":163},"164":{"loc":{"start":{"line":170,"column":8},"end":{"line":170,"column":24}},"id":164},"165":{"loc":{"start":{"line":171,"column":8},"end":{"line":171,"column":37}},"id":165},"166":{"loc":{"start":{"line":171,"column":20},"end":{"line":171,"column":36}},"id":166},"167":{"loc":{"start":{"line":172,"column":8},"end":{"line":172,"column":20}},"id":167},"168":{"loc":{"start":{"line":173,"column":12},"end":{"line":173,"column":33}},"id":168},"169":{"loc":{"start":{"line":174,"column":12},"end":{"line":174,"column":31}},"id":169},"170":{"loc":{"start":{"line":174,"column":12},"end":{"line":174,"column":30}},"id":170},"171":{"loc":{"start":{"line":175,"column":8},"end":{"line":189,"column":22}},"id":171},"172":{"loc":{"start":{"line":175,"column":15},"end":{"line":189,"column":21}},"id":172},"173":{"loc":{"start":{"line":176,"column":12},"end":{"line":188,"column":15}},"id":173},"174":{"loc":{"start":{"line":176,"column":19},"end":{"line":188,"column":14}},"id":174},"175":{"loc":{"start":{"line":177,"column":16},"end":{"line":177,"column":30}},"id":175},"176":{"loc":{"start":{"line":177,"column":16},"end":{"line":177,"column":29}},"id":176},"177":{"loc":{"start":{"line":178,"column":16},"end":{"line":178,"column":42}},"id":177},"178":{"loc":{"start":{"line":178,"column":28},"end":{"line":178,"column":41}},"id":178},"179":{"loc":{"start":{"line":179,"column":16},"end":{"line":179,"column":59}},"id":179},"180":{"loc":{"start":{"line":179,"column":27},"end":{"line":179,"column":58}},"id":180},"181":{"loc":{"start":{"line":180,"column":16},"end":{"line":187,"column":19}},"id":181},"182":{"loc":{"start":{"line":180,"column":23},"end":{"line":187,"column":18}},"id":182},"183":{"loc":{"start":{"line":182,"column":24},"end":{"line":182,"column":74}},"id":183},"184":{"loc":{"start":{"line":182,"column":24},"end":{"line":182,"column":47}},"id":184},"185":{"loc":{"start":{"line":182,"column":51},"end":{"line":182,"column":74}},"id":185},"186":{"loc":{"start":{"line":183,"column":24},"end":{"line":183,"column":31}},"id":186},"187":{"loc":{"start":{"line":185,"column":24},"end":{"line":185,"column":48}},"id":187},"188":{"loc":{"start":{"line":185,"column":31},"end":{"line":185,"column":47}},"id":188},"189":{"loc":{"start":{"line":192,"column":4},"end":{"line":212,"column":6}},"id":189},"190":{"loc":{"start":{"line":193,"column":8},"end":{"line":193,"column":24}},"id":190},"191":{"loc":{"start":{"line":194,"column":8},"end":{"line":211,"column":11}},"id":191},"192":{"loc":{"start":{"line":194,"column":15},"end":{"line":211,"column":10}},"id":192},"193":{"loc":{"start":{"line":194,"column":22},"end":{"line":194,"column":37}},"id":193},"194":{"loc":{"start":{"line":195,"column":16},"end":{"line":195,"column":37}},"id":194},"195":{"loc":{"start":{"line":196,"column":16},"end":{"line":196,"column":41}},"id":195},"196":{"loc":{"start":{"line":196,"column":23},"end":{"line":196,"column":40}},"id":196},"197":{"loc":{"start":{"line":197,"column":23},"end":{"line":197,"column":41}},"id":197},"198":{"loc":{"start":{"line":198,"column":16},"end":{"line":207,"column":19}},"id":198},"199":{"loc":{"start":{"line":198,"column":23},"end":{"line":207,"column":18}},"id":199},"200":{"loc":{"start":{"line":198,"column":32},"end":{"line":198,"column":38}},"id":200},"201":{"loc":{"start":{"line":201,"column":20},"end":{"line":206,"column":23}},"id":201},"202":{"loc":{"start":{"line":201,"column":27},"end":{"line":206,"column":22}},"id":202},"203":{"loc":{"start":{"line":201,"column":32},"end":{"line":203,"column":23}},"id":203},"204":{"loc":{"start":{"line":201,"column":33},"end":{"line":203,"column":22}},"id":204},"205":{"loc":{"start":{"line":202,"column":24},"end":{"line":202,"column":70}},"id":205},"206":{"loc":{"start":{"line":202,"column":31},"end":{"line":202,"column":69}},"id":206},"207":{"loc":{"start":{"line":202,"column":47},"end":{"line":202,"column":68}},"id":207},"208":{"loc":{"start":{"line":205,"column":24},"end":{"line":205,"column":58}},"id":208},"209":{"loc":{"start":{"line":205,"column":31},"end":{"line":205,"column":57}},"id":209},"210":{"loc":{"start":{"line":209,"column":16},"end":{"line":209,"column":41}},"id":210},"211":{"loc":{"start":{"line":209,"column":23},"end":{"line":209,"column":40}},"id":211},"212":{"loc":{"start":{"line":214,"column":4},"end":{"line":219,"column":6}},"id":212},"213":{"loc":{"start":{"line":215,"column":8},"end":{"line":215,"column":24}},"id":213},"214":{"loc":{"start":{"line":216,"column":8},"end":{"line":218,"column":11}},"id":214},"215":{"loc":{"start":{"line":216,"column":15},"end":{"line":218,"column":10}},"id":215},"216":{"loc":{"start":{"line":216,"column":22},"end":{"line":216,"column":51}},"id":216},"217":{"loc":{"start":{"line":217,"column":12},"end":{"line":217,"column":63}},"id":217},"218":{"loc":{"start":{"line":217,"column":19},"end":{"line":217,"column":62}},"id":218},"219":{"loc":{"start":{"line":221,"column":4},"end":{"line":227,"column":6}},"id":219},"220":{"loc":{"start":{"line":222,"column":8},"end":{"line":226,"column":11}},"id":220},"221":{"loc":{"start":{"line":222,"column":15},"end":{"line":226,"column":10}},"id":221},"222":{"loc":{"start":{"line":222,"column":22},"end":{"line":222,"column":37}},"id":222},"223":{"loc":{"start":{"line":223,"column":12},"end":{"line":223,"column":24}},"id":223},"224":{"loc":{"start":{"line":225,"column":12},"end":{"line":225,"column":25}},"id":224},"225":{"loc":{"start":{"line":229,"column":4},"end":{"line":235,"column":6}},"id":225},"226":{"loc":{"start":{"line":230,"column":8},"end":{"line":234,"column":11}},"id":226},"227":{"loc":{"start":{"line":230,"column":15},"end":{"line":234,"column":10}},"id":227},"228":{"loc":{"start":{"line":230,"column":22},"end":{"line":230,"column":37}},"id":228},"229":{"loc":{"start":{"line":231,"column":12},"end":{"line":231,"column":33}},"id":229},"230":{"loc":{"start":{"line":231,"column":19},"end":{"line":231,"column":32}},"id":230},"231":{"loc":{"start":{"line":233,"column":12},"end":{"line":233,"column":25}},"id":231},"232":{"loc":{"start":{"line":237,"column":4},"end":{"line":243,"column":6}},"id":232},"233":{"loc":{"start":{"line":238,"column":8},"end":{"line":242,"column":11}},"id":233},"234":{"loc":{"start":{"line":238,"column":15},"end":{"line":242,"column":10}},"id":234},"235":{"loc":{"start":{"line":238,"column":22},"end":{"line":238,"column":37}},"id":235},"236":{"loc":{"start":{"line":239,"column":12},"end":{"line":239,"column":38}},"id":236},"237":{"loc":{"start":{"line":239,"column":19},"end":{"line":239,"column":37}},"id":237},"238":{"loc":{"start":{"line":241,"column":12},"end":{"line":241,"column":25}},"id":238},"239":{"loc":{"start":{"line":245,"column":4},"end":{"line":251,"column":6}},"id":239},"240":{"loc":{"start":{"line":246,"column":8},"end":{"line":250,"column":11}},"id":240},"241":{"loc":{"start":{"line":246,"column":15},"end":{"line":250,"column":10}},"id":241},"242":{"loc":{"start":{"line":246,"column":22},"end":{"line":246,"column":41}},"id":242},"243":{"loc":{"start":{"line":247,"column":12},"end":{"line":247,"column":41}},"id":243},"244":{"loc":{"start":{"line":247,"column":19},"end":{"line":247,"column":40}},"id":244},"245":{"loc":{"start":{"line":249,"column":12},"end":{"line":249,"column":25}},"id":245},"246":{"loc":{"start":{"line":253,"column":4},"end":{"line":256,"column":6}},"id":246},"247":{"loc":{"start":{"line":254,"column":8},"end":{"line":254,"column":24}},"id":247},"248":{"loc":{"start":{"line":255,"column":8},"end":{"line":255,"column":54}},"id":248},"249":{"loc":{"start":{"line":255,"column":15},"end":{"line":255,"column":53}},"id":249},"250":{"loc":{"start":{"line":255,"column":24},"end":{"line":255,"column":30}},"id":250},"251":{"loc":{"start":{"line":258,"column":4},"end":{"line":261,"column":6}},"id":251},"252":{"loc":{"start":{"line":259,"column":8},"end":{"line":259,"column":24}},"id":252},"253":{"loc":{"start":{"line":260,"column":8},"end":{"line":260,"column":54}},"id":253},"254":{"loc":{"start":{"line":260,"column":15},"end":{"line":260,"column":53}},"id":254},"255":{"loc":{"start":{"line":260,"column":24},"end":{"line":260,"column":30}},"id":255},"256":{"loc":{"start":{"line":263,"column":4},"end":{"line":267,"column":6}},"id":256},"257":{"loc":{"start":{"line":264,"column":12},"end":{"line":264,"column":33}},"id":257},"258":{"loc":{"start":{"line":265,"column":12},"end":{"line":265,"column":24}},"id":258},"259":{"loc":{"start":{"line":266,"column":8},"end":{"line":266,"column":51}},"id":259},"260":{"loc":{"start":{"line":266,"column":15},"end":{"line":266,"column":50}},"id":260},"261":{"loc":{"start":{"line":266,"column":25},"end":{"line":266,"column":43}},"id":261},"262":{"loc":{"start":{"line":269,"column":4},"end":{"line":278,"column":6}},"id":262},"263":{"loc":{"start":{"line":270,"column":8},"end":{"line":270,"column":24}},"id":263},"264":{"loc":{"start":{"line":271,"column":8},"end":{"line":277,"column":11}},"id":264},"265":{"loc":{"start":{"line":271,"column":15},"end":{"line":277,"column":10}},"id":265},"266":{"loc":{"start":{"line":271,"column":22},"end":{"line":271,"column":46}},"id":266},"267":{"loc":{"start":{"line":273,"column":16},"end":{"line":273,"column":66}},"id":267},"268":{"loc":{"start":{"line":273,"column":23},"end":{"line":273,"column":65}},"id":268},"269":{"loc":{"start":{"line":275,"column":16},"end":{"line":275,"column":61}},"id":269},"270":{"loc":{"start":{"line":275,"column":23},"end":{"line":275,"column":60}},"id":270},"271":{"loc":{"start":{"line":280,"column":4},"end":{"line":300,"column":6}},"id":271},"272":{"loc":{"start":{"line":281,"column":8},"end":{"line":281,"column":24}},"id":272},"273":{"loc":{"start":{"line":282,"column":8},"end":{"line":282,"column":39}},"id":273},"274":{"loc":{"start":{"line":282,"column":17},"end":{"line":282,"column":38}},"id":274},"275":{"loc":{"start":{"line":283,"column":8},"end":{"line":283,"column":39}},"id":275},"276":{"loc":{"start":{"line":283,"column":17},"end":{"line":283,"column":38}},"id":276},"277":{"loc":{"start":{"line":284,"column":8},"end":{"line":284,"column":52}},"id":277},"278":{"loc":{"start":{"line":284,"column":17},"end":{"line":284,"column":51}},"id":278},"279":{"loc":{"start":{"line":284,"column":30},"end":{"line":284,"column":50}},"id":279},"280":{"loc":{"start":{"line":285,"column":8},"end":{"line":285,"column":52}},"id":280},"281":{"loc":{"start":{"line":285,"column":17},"end":{"line":285,"column":51}},"id":281},"282":{"loc":{"start":{"line":285,"column":30},"end":{"line":285,"column":50}},"id":282},"283":{"loc":{"start":{"line":286,"column":8},"end":{"line":286,"column":21}},"id":283},"284":{"loc":{"start":{"line":286,"column":8},"end":{"line":286,"column":20}},"id":284},"285":{"loc":{"start":{"line":288,"column":12},"end":{"line":290,"column":34}},"id":285},"286":{"loc":{"start":{"line":288,"column":12},"end":{"line":289,"column":25}},"id":286},"287":{"loc":{"start":{"line":290,"column":12},"end":{"line":290,"column":34}},"id":287},"288":{"loc":{"start":{"line":292,"column":12},"end":{"line":292,"column":27}},"id":288},"289":{"loc":{"start":{"line":292,"column":12},"end":{"line":292,"column":26}},"id":289},"290":{"loc":{"start":{"line":293,"column":12},"end":{"line":293,"column":27}},"id":290},"291":{"loc":{"start":{"line":293,"column":12},"end":{"line":293,"column":26}},"id":291},"292":{"loc":{"start":{"line":296,"column":12},"end":{"line":296,"column":27}},"id":292},"293":{"loc":{"start":{"line":296,"column":12},"end":{"line":296,"column":26}},"id":293},"294":{"loc":{"start":{"line":297,"column":12},"end":{"line":297,"column":33}},"id":294},"295":{"loc":{"start":{"line":297,"column":12},"end":{"line":297,"column":32}},"id":295},"296":{"loc":{"start":{"line":299,"column":8},"end":{"line":299,"column":43}},"id":296},"297":{"loc":{"start":{"line":299,"column":15},"end":{"line":299,"column":42}},"id":297},"298":{"loc":{"start":{"line":302,"column":4},"end":{"line":326,"column":6}},"id":298},"299":{"loc":{"start":{"line":304,"column":12},"end":{"line":304,"column":28}},"id":299},"300":{"loc":{"start":{"line":305,"column":12},"end":{"line":305,"column":40}},"id":300},"301":{"loc":{"start":{"line":305,"column":21},"end":{"line":305,"column":39}},"id":301},"302":{"loc":{"start":{"line":307,"column":8},"end":{"line":307,"column":39}},"id":302},"303":{"loc":{"start":{"line":307,"column":17},"end":{"line":307,"column":38}},"id":303},"304":{"loc":{"start":{"line":308,"column":8},"end":{"line":308,"column":39}},"id":304},"305":{"loc":{"start":{"line":308,"column":17},"end":{"line":308,"column":38}},"id":305},"306":{"loc":{"start":{"line":309,"column":8},"end":{"line":309,"column":52}},"id":306},"307":{"loc":{"start":{"line":309,"column":17},"end":{"line":309,"column":51}},"id":307},"308":{"loc":{"start":{"line":309,"column":30},"end":{"line":309,"column":50}},"id":308},"309":{"loc":{"start":{"line":310,"column":8},"end":{"line":310,"column":52}},"id":309},"310":{"loc":{"start":{"line":310,"column":17},"end":{"line":310,"column":51}},"id":310},"311":{"loc":{"start":{"line":310,"column":30},"end":{"line":310,"column":50}},"id":311},"312":{"loc":{"start":{"line":311,"column":12},"end":{"line":311,"column":51}},"id":312},"313":{"loc":{"start":{"line":311,"column":12},"end":{"line":311,"column":31}},"id":313},"314":{"loc":{"start":{"line":311,"column":35},"end":{"line":311,"column":51}},"id":314},"315":{"loc":{"start":{"line":312,"column":12},"end":{"line":312,"column":25}},"id":315},"316":{"loc":{"start":{"line":312,"column":12},"end":{"line":312,"column":24}},"id":316},"317":{"loc":{"start":{"line":314,"column":12},"end":{"line":316,"column":34}},"id":317},"318":{"loc":{"start":{"line":314,"column":12},"end":{"line":315,"column":25}},"id":318},"319":{"loc":{"start":{"line":316,"column":12},"end":{"line":316,"column":34}},"id":319},"320":{"loc":{"start":{"line":318,"column":12},"end":{"line":318,"column":27}},"id":320},"321":{"loc":{"start":{"line":318,"column":12},"end":{"line":318,"column":26}},"id":321},"322":{"loc":{"start":{"line":319,"column":12},"end":{"line":319,"column":27}},"id":322},"323":{"loc":{"start":{"line":319,"column":12},"end":{"line":319,"column":26}},"id":323},"324":{"loc":{"start":{"line":322,"column":12},"end":{"line":322,"column":27}},"id":324},"325":{"loc":{"start":{"line":322,"column":12},"end":{"line":322,"column":26}},"id":325},"326":{"loc":{"start":{"line":323,"column":12},"end":{"line":323,"column":33}},"id":326},"327":{"loc":{"start":{"line":323,"column":12},"end":{"line":323,"column":32}},"id":327},"328":{"loc":{"start":{"line":325,"column":8},"end":{"line":325,"column":43}},"id":328},"329":{"loc":{"start":{"line":325,"column":15},"end":{"line":325,"column":42}},"id":329},"330":{"loc":{"start":{"line":328,"column":4},"end":{"line":343,"column":6}},"id":330},"331":{"loc":{"start":{"line":329,"column":8},"end":{"line":329,"column":18}},"id":331},"332":{"loc":{"start":{"line":330,"column":8},"end":{"line":330,"column":39}},"id":332},"333":{"loc":{"start":{"line":330,"column":17},"end":{"line":330,"column":38}},"id":333},"334":{"loc":{"start":{"line":331,"column":8},"end":{"line":331,"column":37}},"id":334},"335":{"loc":{"start":{"line":331,"column":16},"end":{"line":331,"column":36}},"id":335},"336":{"loc":{"start":{"line":332,"column":8},"end":{"line":332,"column":52}},"id":336},"337":{"loc":{"start":{"line":332,"column":17},"end":{"line":332,"column":51}},"id":337},"338":{"loc":{"start":{"line":332,"column":30},"end":{"line":332,"column":50}},"id":338},"339":{"loc":{"start":{"line":333,"column":8},"end":{"line":333,"column":50}},"id":339},"340":{"loc":{"start":{"line":333,"column":16},"end":{"line":333,"column":49}},"id":340},"341":{"loc":{"start":{"line":333,"column":28},"end":{"line":333,"column":48}},"id":341},"342":{"loc":{"start":{"line":334,"column":12},"end":{"line":334,"column":51}},"id":342},"343":{"loc":{"start":{"line":334,"column":12},"end":{"line":334,"column":31}},"id":343},"344":{"loc":{"start":{"line":334,"column":35},"end":{"line":334,"column":51}},"id":344},"345":{"loc":{"start":{"line":335,"column":12},"end":{"line":335,"column":25}},"id":345},"346":{"loc":{"start":{"line":335,"column":12},"end":{"line":335,"column":24}},"id":346},"347":{"loc":{"start":{"line":336,"column":12},"end":{"line":336,"column":40}},"id":347},"348":{"loc":{"start":{"line":337,"column":12},"end":{"line":337,"column":25}},"id":348},"349":{"loc":{"start":{"line":338,"column":40},"end":{"line":338,"column":46}},"id":349},"350":{"loc":{"start":{"line":338,"column":48},"end":{"line":338,"column":51}},"id":350},"351":{"loc":{"start":{"line":339,"column":16},"end":{"line":339,"column":38}},"id":351},"352":{"loc":{"start":{"line":342,"column":8},"end":{"line":342,"column":23}},"id":352},"353":{"loc":{"start":{"line":342,"column":15},"end":{"line":342,"column":22}},"id":353},"354":{"loc":{"start":{"line":345,"column":4},"end":{"line":345,"column":28}},"id":354},"355":{"loc":{"start":{"line":347,"column":8},"end":{"line":347,"column":24}},"id":355},"356":{"loc":{"start":{"line":348,"column":8},"end":{"line":348,"column":33}},"id":356},"357":{"loc":{"start":{"line":348,"column":15},"end":{"line":348,"column":32}},"id":357},"358":{"loc":{"start":{"line":349,"column":8},"end":{"line":360,"column":11}},"id":358},"359":{"loc":{"start":{"line":349,"column":15},"end":{"line":360,"column":10}},"id":359},"360":{"loc":{"start":{"line":349,"column":22},"end":{"line":349,"column":37}},"id":360},"361":{"loc":{"start":{"line":350,"column":16},"end":{"line":350,"column":33}},"id":361},"362":{"loc":{"start":{"line":351,"column":16},"end":{"line":351,"column":42}},"id":362},"363":{"loc":{"start":{"line":351,"column":23},"end":{"line":351,"column":41}},"id":363},"364":{"loc":{"start":{"line":352,"column":12},"end":{"line":352,"column":52}},"id":364},"365":{"loc":{"start":{"line":352,"column":27},"end":{"line":352,"column":51}},"id":365},"366":{"loc":{"start":{"line":353,"column":12},"end":{"line":359,"column":15}},"id":366},"367":{"loc":{"start":{"line":353,"column":19},"end":{"line":359,"column":14}},"id":367},"368":{"loc":{"start":{"line":353,"column":26},"end":{"line":353,"column":45}},"id":368},"369":{"loc":{"start":{"line":354,"column":20},"end":{"line":354,"column":38}},"id":369},"370":{"loc":{"start":{"line":355,"column":20},"end":{"line":355,"column":44}},"id":370},"371":{"loc":{"start":{"line":355,"column":27},"end":{"line":355,"column":43}},"id":371},"372":{"loc":{"start":{"line":357,"column":20},"end":{"line":357,"column":46}},"id":372},"373":{"loc":{"start":{"line":357,"column":27},"end":{"line":357,"column":45}},"id":373},"374":{"loc":{"start":{"line":363,"column":4},"end":{"line":378,"column":6}},"id":374},"375":{"loc":{"start":{"line":364,"column":8},"end":{"line":364,"column":24}},"id":375},"376":{"loc":{"start":{"line":365,"column":8},"end":{"line":367,"column":11}},"id":376},"377":{"loc":{"start":{"line":365,"column":19},"end":{"line":367,"column":10}},"id":377},"378":{"loc":{"start":{"line":365,"column":33},"end":{"line":365,"column":43}},"id":378},"379":{"loc":{"start":{"line":366,"column":12},"end":{"line":366,"column":33}},"id":379},"380":{"loc":{"start":{"line":366,"column":19},"end":{"line":366,"column":32}},"id":380},"381":{"loc":{"start":{"line":368,"column":8},"end":{"line":377,"column":11}},"id":381},"382":{"loc":{"start":{"line":368,"column":15},"end":{"line":377,"column":10}},"id":382},"383":{"loc":{"start":{"line":369,"column":12},"end":{"line":369,"column":26}},"id":383},"384":{"loc":{"start":{"line":370,"column":12},"end":{"line":376,"column":15}},"id":384},"385":{"loc":{"start":{"line":370,"column":19},"end":{"line":376,"column":14}},"id":385},"386":{"loc":{"start":{"line":370,"column":24},"end":{"line":374,"column":15}},"id":386},"387":{"loc":{"start":{"line":370,"column":25},"end":{"line":374,"column":14}},"id":387},"388":{"loc":{"start":{"line":371,"column":16},"end":{"line":373,"column":19}},"id":388},"389":{"loc":{"start":{"line":371,"column":23},"end":{"line":373,"column":18}},"id":389},"390":{"loc":{"start":{"line":371,"column":30},"end":{"line":371,"column":51}},"id":390},"391":{"loc":{"start":{"line":372,"column":20},"end":{"line":372,"column":41}},"id":391},"392":{"loc":{"start":{"line":375,"column":16},"end":{"line":375,"column":28}},"id":392},"393":{"loc":{"start":{"line":380,"column":4},"end":{"line":400,"column":6}},"id":393},"394":{"loc":{"start":{"line":381,"column":8},"end":{"line":381,"column":22}},"id":394},"395":{"loc":{"start":{"line":382,"column":8},"end":{"line":382,"column":17}},"id":395},"396":{"loc":{"start":{"line":383,"column":8},"end":{"line":397,"column":8}},"id":396},"397":{"loc":{"start":{"line":383,"column":8},"end":{"line":396,"column":10}},"id":397},"398":{"loc":{"start":{"line":384,"column":12},"end":{"line":395,"column":15}},"id":398},"399":{"loc":{"start":{"line":384,"column":19},"end":{"line":395,"column":14}},"id":399},"400":{"loc":{"start":{"line":385,"column":16},"end":{"line":394,"column":19}},"id":400},"401":{"loc":{"start":{"line":385,"column":23},"end":{"line":394,"column":18}},"id":401},"402":{"loc":{"start":{"line":385,"column":34},"end":{"line":387,"column":18}},"id":402},"403":{"loc":{"start":{"line":386,"column":20},"end":{"line":386,"column":41}},"id":403},"404":{"loc":{"start":{"line":386,"column":27},"end":{"line":386,"column":40}},"id":404},"405":{"loc":{"start":{"line":389,"column":20},"end":{"line":393,"column":24}},"id":405},"406":{"loc":{"start":{"line":389,"column":27},"end":{"line":393,"column":23}},"id":406},"407":{"loc":{"start":{"line":389,"column":33},"end":{"line":393,"column":22}},"id":407},"408":{"loc":{"start":{"line":390,"column":24},"end":{"line":392,"column":27}},"id":408},"409":{"loc":{"start":{"line":390,"column":31},"end":{"line":392,"column":26}},"id":409},"410":{"loc":{"start":{"line":390,"column":38},"end":{"line":390,"column":57}},"id":410},"411":{"loc":{"start":{"line":391,"column":28},"end":{"line":391,"column":49}},"id":411},"412":{"loc":{"start":{"line":397,"column":8},"end":{"line":399,"column":11}},"id":412},"413":{"loc":{"start":{"line":397,"column":15},"end":{"line":399,"column":10}},"id":413},"414":{"loc":{"start":{"line":398,"column":12},"end":{"line":398,"column":32}},"id":414},"415":{"loc":{"start":{"line":398,"column":19},"end":{"line":398,"column":31}},"id":415}}}},"/Users/kris/q-io/fs-root.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":5},"10":{"index":10,"count":5},"13":{"index":13,"count":5},"14":{"index":14,"count":5},"15":{"index":15,"count":5},"16":{"index":16,"count":5},"17":{"index":17,"count":5},"18":{"index":18,"count":5},"19":{"index":19,"count":5},"20":{"index":20,"count":5},"21":{"index":21,"count":5},"22":{"index":22,"count":5},"23":{"index":23,"count":5},"24":{"index":24,"count":5},"25":{"index":25,"count":5},"26":{"index":26,"count":5},"27":{"index":27,"count":5},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"46":{"index":46,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":4},"59":{"index":59,"count":4},"60":{"index":60,"count":4},"61":{"index":61,"count":4},"62":{"index":62,"count":4},"63":{"index":63,"count":4},"68":{"index":68,"count":1},"78":{"index":78,"count":1},"79":{"index":79,"count":1},"80":{"index":80,"count":1},"81":{"index":81,"count":1},"82":{"index":82,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":5},"3":{"index":3,"count":5},"4":{"index":4,"count":5},"5":{"index":5,"count":5},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"14":{"index":14,"count":4},"15":{"index":15,"count":4},"20":{"index":20,"count":1}},"hash":"0f5b78a15cb9d4d170bc48f1df919a3a","instrumentor":{"blockCounter":21,"nodeCounter":83,"source":"var Q = require(\"q\");\nvar BOOT = require(\"./fs-boot\");\nvar COMMON = require(\"./fs-common\");\n\nmodule.exports = RootFs;\n\nfunction RootFs(outer, root) {\n    var inner = Object.create(BOOT);\n\n    function attenuate(path) {\n\n        // the machinations of projecting a path inside a\n        // subroot\n        var actual;\n        // if it's absolute, we want the path relative to\n        // the root of the inner file system\n        if (outer.isAbsolute(path)) {\n            actual = outer.relativeFromDirectory(outer.ROOT, path);\n        } else {\n            actual = path;\n        }\n        // we join the path onto the root of the inner file\n        // system so that parent references from the root\n        // return to the root, emulating standard unix\n        // behavior\n        actual = outer.join(outer.ROOT, actual);\n        // then we reconstruct the path relative to the\n        // inner root\n        actual = outer.relativeFromDirectory(outer.ROOT, actual);\n        // and rejoin it on the outer root\n        actual = outer.join(root, actual);\n        // and find the corresponding real path\n        actual = outer.canonical(actual);\n        return Q.when(actual, function (actual) {\n            // and verify that the outer canonical path is\n            // actually inside the inner canonical path, to\n            // prevent break-outs\n            if (outer.contains(root, actual)) {\n                return {\n                    \"inner\": outer.join(outer.ROOT, outer.relativeFromDirectory(root, actual)),\n                    \"outer\": actual\n                };\n            } else {\n                return Q.reject(\"Can't find: \" + JSON.stringify(path));\n            }\n        });\n    }\n\n    function workingDirectory() {\n        return outer.ROOT;\n    }\n\n    COMMON.update(inner, workingDirectory);\n\n    inner.list = function (path) {\n        return Q.when(attenuate(path), function (path) {\n            return outer.list(path.outer);\n        }).then(null, function (reason) {\n            return Q.reject(\"Can't list \" + JSON.stringify(path));\n        });\n    };\n\n    inner.open = function (path, flags, charset) {\n        return Q.when(attenuate(path), function (path) {\n            return outer.open(path.outer, flags, charset);\n        }).then(null, function (reason) {\n            return Q.reject(\"Can't open \" + JSON.stringify(path));\n        });\n    };\n\n    inner.stat = function (path) {\n        return Q.when(attenuate(path), function (path) {\n            return outer.stat(path.outer);\n        }).then(null, function (reason) {\n            return Q.reject(\"Can't stat \" + JSON.stringify(path));\n        });\n    };\n\n    inner.canonical = function (path) {\n        return Q.when(attenuate(path), function (path) {\n            return path.inner;\n        }).then(null, function (reason) {\n            return Q.reject(\"Can't find canonical of \" + JSON.stringify(path));\n        });\n    };\n\n    return Q.when(outer.canonical(root), function (_root) {\n        root = _root;\n        return inner;\n    });\n}","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":32}},"id":2},"3":{"loc":{"start":{"line":2,"column":11},"end":{"line":2,"column":31}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":4},"5":{"loc":{"start":{"line":3,"column":13},"end":{"line":3,"column":35}},"id":5},"6":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":24}},"id":6},"7":{"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":36}},"id":7},"8":{"loc":{"start":{"line":8,"column":16},"end":{"line":8,"column":35}},"id":8},"9":{"loc":{"start":{"line":14,"column":8},"end":{"line":14,"column":19}},"id":9},"10":{"loc":{"start":{"line":17,"column":12},"end":{"line":17,"column":34}},"id":10},"11":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":67}},"id":11},"12":{"loc":{"start":{"line":18,"column":21},"end":{"line":18,"column":66}},"id":12},"13":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":26}},"id":13},"14":{"loc":{"start":{"line":26,"column":8},"end":{"line":26,"column":48}},"id":14},"15":{"loc":{"start":{"line":26,"column":17},"end":{"line":26,"column":47}},"id":15},"16":{"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":65}},"id":16},"17":{"loc":{"start":{"line":29,"column":17},"end":{"line":29,"column":64}},"id":17},"18":{"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":42}},"id":18},"19":{"loc":{"start":{"line":31,"column":17},"end":{"line":31,"column":41}},"id":19},"20":{"loc":{"start":{"line":33,"column":8},"end":{"line":33,"column":41}},"id":20},"21":{"loc":{"start":{"line":33,"column":17},"end":{"line":33,"column":40}},"id":21},"22":{"loc":{"start":{"line":34,"column":8},"end":{"line":46,"column":11}},"id":22},"23":{"loc":{"start":{"line":34,"column":15},"end":{"line":46,"column":10}},"id":23},"24":{"loc":{"start":{"line":38,"column":16},"end":{"line":38,"column":44}},"id":24},"25":{"loc":{"start":{"line":39,"column":16},"end":{"line":42,"column":18}},"id":25},"26":{"loc":{"start":{"line":40,"column":29},"end":{"line":40,"column":94}},"id":26},"27":{"loc":{"start":{"line":40,"column":52},"end":{"line":40,"column":93}},"id":27},"28":{"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":71}},"id":28},"29":{"loc":{"start":{"line":44,"column":23},"end":{"line":44,"column":70}},"id":29},"30":{"loc":{"start":{"line":44,"column":32},"end":{"line":44,"column":69}},"id":30},"31":{"loc":{"start":{"line":44,"column":49},"end":{"line":44,"column":69}},"id":31},"32":{"loc":{"start":{"line":50,"column":8},"end":{"line":50,"column":26}},"id":32},"33":{"loc":{"start":{"line":53,"column":4},"end":{"line":53,"column":43}},"id":33},"34":{"loc":{"start":{"line":53,"column":4},"end":{"line":53,"column":42}},"id":34},"35":{"loc":{"start":{"line":55,"column":4},"end":{"line":61,"column":6}},"id":35},"36":{"loc":{"start":{"line":56,"column":8},"end":{"line":60,"column":11}},"id":36},"37":{"loc":{"start":{"line":56,"column":15},"end":{"line":60,"column":10}},"id":37},"38":{"loc":{"start":{"line":56,"column":21},"end":{"line":58,"column":10}},"id":38},"39":{"loc":{"start":{"line":56,"column":22},"end":{"line":56,"column":37}},"id":39},"40":{"loc":{"start":{"line":57,"column":12},"end":{"line":57,"column":42}},"id":40},"41":{"loc":{"start":{"line":57,"column":19},"end":{"line":57,"column":41}},"id":41},"42":{"loc":{"start":{"line":59,"column":12},"end":{"line":59,"column":66}},"id":42},"43":{"loc":{"start":{"line":59,"column":19},"end":{"line":59,"column":65}},"id":43},"44":{"loc":{"start":{"line":59,"column":28},"end":{"line":59,"column":64}},"id":44},"45":{"loc":{"start":{"line":59,"column":44},"end":{"line":59,"column":64}},"id":45},"46":{"loc":{"start":{"line":63,"column":4},"end":{"line":69,"column":6}},"id":46},"47":{"loc":{"start":{"line":64,"column":8},"end":{"line":68,"column":11}},"id":47},"48":{"loc":{"start":{"line":64,"column":15},"end":{"line":68,"column":10}},"id":48},"49":{"loc":{"start":{"line":64,"column":21},"end":{"line":66,"column":10}},"id":49},"50":{"loc":{"start":{"line":64,"column":22},"end":{"line":64,"column":37}},"id":50},"51":{"loc":{"start":{"line":65,"column":12},"end":{"line":65,"column":58}},"id":51},"52":{"loc":{"start":{"line":65,"column":19},"end":{"line":65,"column":57}},"id":52},"53":{"loc":{"start":{"line":67,"column":12},"end":{"line":67,"column":66}},"id":53},"54":{"loc":{"start":{"line":67,"column":19},"end":{"line":67,"column":65}},"id":54},"55":{"loc":{"start":{"line":67,"column":28},"end":{"line":67,"column":64}},"id":55},"56":{"loc":{"start":{"line":67,"column":44},"end":{"line":67,"column":64}},"id":56},"57":{"loc":{"start":{"line":71,"column":4},"end":{"line":77,"column":6}},"id":57},"58":{"loc":{"start":{"line":72,"column":8},"end":{"line":76,"column":11}},"id":58},"59":{"loc":{"start":{"line":72,"column":15},"end":{"line":76,"column":10}},"id":59},"60":{"loc":{"start":{"line":72,"column":21},"end":{"line":74,"column":10}},"id":60},"61":{"loc":{"start":{"line":72,"column":22},"end":{"line":72,"column":37}},"id":61},"62":{"loc":{"start":{"line":73,"column":12},"end":{"line":73,"column":42}},"id":62},"63":{"loc":{"start":{"line":73,"column":19},"end":{"line":73,"column":41}},"id":63},"64":{"loc":{"start":{"line":75,"column":12},"end":{"line":75,"column":66}},"id":64},"65":{"loc":{"start":{"line":75,"column":19},"end":{"line":75,"column":65}},"id":65},"66":{"loc":{"start":{"line":75,"column":28},"end":{"line":75,"column":64}},"id":66},"67":{"loc":{"start":{"line":75,"column":44},"end":{"line":75,"column":64}},"id":67},"68":{"loc":{"start":{"line":79,"column":4},"end":{"line":85,"column":6}},"id":68},"69":{"loc":{"start":{"line":80,"column":8},"end":{"line":84,"column":11}},"id":69},"70":{"loc":{"start":{"line":80,"column":15},"end":{"line":84,"column":10}},"id":70},"71":{"loc":{"start":{"line":80,"column":21},"end":{"line":82,"column":10}},"id":71},"72":{"loc":{"start":{"line":80,"column":22},"end":{"line":80,"column":37}},"id":72},"73":{"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":30}},"id":73},"74":{"loc":{"start":{"line":83,"column":12},"end":{"line":83,"column":79}},"id":74},"75":{"loc":{"start":{"line":83,"column":19},"end":{"line":83,"column":78}},"id":75},"76":{"loc":{"start":{"line":83,"column":28},"end":{"line":83,"column":77}},"id":76},"77":{"loc":{"start":{"line":83,"column":57},"end":{"line":83,"column":77}},"id":77},"78":{"loc":{"start":{"line":87,"column":4},"end":{"line":90,"column":7}},"id":78},"79":{"loc":{"start":{"line":87,"column":11},"end":{"line":90,"column":6}},"id":79},"80":{"loc":{"start":{"line":87,"column":18},"end":{"line":87,"column":39}},"id":80},"81":{"loc":{"start":{"line":88,"column":8},"end":{"line":88,"column":21}},"id":81},"82":{"loc":{"start":{"line":89,"column":8},"end":{"line":89,"column":21}},"id":82}}}},"/Users/kris/q-io/fs-mock.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":32},"14":{"index":14,"count":16},"15":{"index":15,"count":16},"16":{"index":16,"count":16},"17":{"index":17,"count":16},"18":{"index":18,"count":156},"19":{"index":19,"count":16},"20":{"index":20,"count":14},"21":{"index":21,"count":14},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":19},"26":{"index":26,"count":19},"27":{"index":27,"count":19},"28":{"index":28,"count":19},"29":{"index":29,"count":19},"30":{"index":30,"count":43},"31":{"index":31,"count":43},"32":{"index":32,"count":43},"33":{"index":33,"count":43},"34":{"index":34,"count":43},"35":{"index":35,"count":43},"36":{"index":36,"count":43},"37":{"index":37,"count":43},"38":{"index":38,"count":43},"39":{"index":39,"count":43},"40":{"index":40,"count":43},"41":{"index":41,"count":19},"42":{"index":42,"count":5},"43":{"index":43,"count":5},"44":{"index":44,"count":5},"45":{"index":45,"count":14},"46":{"index":46,"count":14},"47":{"index":47,"count":38},"48":{"index":48,"count":38},"49":{"index":49,"count":1},"50":{"index":50,"count":34},"51":{"index":51,"count":34},"52":{"index":52,"count":34},"53":{"index":53,"count":34},"54":{"index":54,"count":34},"55":{"index":55,"count":34},"56":{"index":56,"count":34},"57":{"index":57,"count":34},"58":{"index":58,"count":34},"62":{"index":62,"count":34},"63":{"index":63,"count":34},"64":{"index":64,"count":34},"65":{"index":65,"count":1},"66":{"index":66,"count":28},"67":{"index":67,"count":28},"68":{"index":68,"count":28},"69":{"index":69,"count":28},"70":{"index":70,"count":28},"71":{"index":71,"count":28},"72":{"index":72,"count":28},"73":{"index":73,"count":28},"74":{"index":74,"count":28},"75":{"index":75,"count":28},"76":{"index":76,"count":28},"77":{"index":77,"count":28},"83":{"index":83,"count":28},"84":{"index":84,"count":28},"85":{"index":85,"count":28},"86":{"index":86,"count":28},"89":{"index":89,"count":28},"90":{"index":90,"count":28},"91":{"index":91,"count":28},"92":{"index":92,"count":28},"93":{"index":93,"count":28},"94":{"index":94,"count":28},"95":{"index":95,"count":28},"96":{"index":96,"count":28},"97":{"index":97,"count":16},"98":{"index":98,"count":16},"99":{"index":99,"count":4},"100":{"index":100,"count":5},"101":{"index":101,"count":5},"102":{"index":102,"count":5},"105":{"index":105,"count":5},"106":{"index":106,"count":5},"107":{"index":107,"count":5},"110":{"index":110,"count":23},"111":{"index":111,"count":23},"112":{"index":112,"count":23},"115":{"index":115,"count":23},"116":{"index":116,"count":23},"117":{"index":117,"count":23},"118":{"index":118,"count":1},"119":{"index":119,"count":1},"120":{"index":120,"count":1},"121":{"index":121,"count":1},"122":{"index":122,"count":22},"123":{"index":123,"count":1},"124":{"index":124,"count":2},"125":{"index":125,"count":2},"126":{"index":126,"count":2},"127":{"index":127,"count":2},"128":{"index":128,"count":2},"129":{"index":129,"count":2},"130":{"index":130,"count":2},"131":{"index":131,"count":2},"132":{"index":132,"count":2},"133":{"index":133,"count":2},"134":{"index":134,"count":2},"135":{"index":135,"count":2},"140":{"index":140,"count":2},"143":{"index":143,"count":2},"144":{"index":144,"count":1},"145":{"index":145,"count":9},"146":{"index":146,"count":9},"147":{"index":147,"count":9},"148":{"index":148,"count":9},"149":{"index":149,"count":9},"150":{"index":150,"count":9},"151":{"index":151,"count":9},"152":{"index":152,"count":9},"153":{"index":153,"count":9},"154":{"index":154,"count":9},"155":{"index":155,"count":9},"156":{"index":156,"count":9},"161":{"index":161,"count":9},"162":{"index":162,"count":1},"163":{"index":163,"count":2},"164":{"index":164,"count":2},"165":{"index":165,"count":2},"166":{"index":166,"count":2},"167":{"index":167,"count":2},"168":{"index":168,"count":2},"169":{"index":169,"count":2},"170":{"index":170,"count":2},"171":{"index":171,"count":2},"172":{"index":172,"count":2},"173":{"index":173,"count":2},"174":{"index":174,"count":2},"179":{"index":179,"count":2},"182":{"index":182,"count":2},"183":{"index":183,"count":1},"184":{"index":184,"count":74},"185":{"index":185,"count":74},"186":{"index":186,"count":74},"187":{"index":187,"count":74},"188":{"index":188,"count":74},"189":{"index":189,"count":74},"190":{"index":190,"count":74},"191":{"index":191,"count":74},"192":{"index":192,"count":1},"193":{"index":193,"count":2},"194":{"index":194,"count":2},"195":{"index":195,"count":2},"196":{"index":196,"count":2},"197":{"index":197,"count":2},"198":{"index":198,"count":2},"199":{"index":199,"count":2},"200":{"index":200,"count":1},"204":{"index":204,"count":1},"205":{"index":205,"count":1},"206":{"index":206,"count":1},"207":{"index":207,"count":1},"208":{"index":208,"count":1},"209":{"index":209,"count":1},"210":{"index":210,"count":1},"211":{"index":211,"count":1},"212":{"index":212,"count":1},"213":{"index":213,"count":1},"214":{"index":214,"count":1},"215":{"index":215,"count":1},"216":{"index":216,"count":1},"219":{"index":219,"count":1},"220":{"index":220,"count":1},"221":{"index":221,"count":1},"222":{"index":222,"count":1},"223":{"index":223,"count":1},"224":{"index":224,"count":1},"225":{"index":225,"count":1},"226":{"index":226,"count":1},"229":{"index":229,"count":1},"233":{"index":233,"count":1},"234":{"index":234,"count":1},"235":{"index":235,"count":1},"236":{"index":236,"count":1},"237":{"index":237,"count":1},"238":{"index":238,"count":1},"239":{"index":239,"count":1},"240":{"index":240,"count":1},"241":{"index":241,"count":1},"242":{"index":242,"count":1},"243":{"index":243,"count":1},"244":{"index":244,"count":1},"245":{"index":245,"count":1},"246":{"index":246,"count":1},"250":{"index":250,"count":1},"251":{"index":251,"count":1},"260":{"index":260,"count":1},"269":{"index":269,"count":1},"270":{"index":270,"count":1},"271":{"index":271,"count":1},"272":{"index":272,"count":1},"273":{"index":273,"count":1},"274":{"index":274,"count":1},"275":{"index":275,"count":1},"276":{"index":276,"count":1},"277":{"index":277,"count":1},"278":{"index":278,"count":1},"279":{"index":279,"count":1},"280":{"index":280,"count":1},"281":{"index":281,"count":1},"282":{"index":282,"count":1},"283":{"index":283,"count":1},"284":{"index":284,"count":1},"285":{"index":285,"count":1},"286":{"index":286,"count":1},"287":{"index":287,"count":1},"288":{"index":288,"count":1},"289":{"index":289,"count":1},"290":{"index":290,"count":1},"291":{"index":291,"count":1},"292":{"index":292,"count":1},"296":{"index":296,"count":1},"297":{"index":297,"count":1},"298":{"index":298,"count":1},"299":{"index":299,"count":1},"300":{"index":300,"count":1},"301":{"index":301,"count":1},"302":{"index":302,"count":1},"303":{"index":303,"count":1},"304":{"index":304,"count":1},"305":{"index":305,"count":1},"306":{"index":306,"count":1},"309":{"index":309,"count":1},"310":{"index":310,"count":1},"311":{"index":311,"count":7},"312":{"index":312,"count":7},"313":{"index":313,"count":7},"314":{"index":314,"count":7},"315":{"index":315,"count":7},"316":{"index":316,"count":7},"317":{"index":317,"count":7},"318":{"index":318,"count":1},"319":{"index":319,"count":6},"320":{"index":320,"count":6},"321":{"index":321,"count":6},"322":{"index":322,"count":6},"323":{"index":323,"count":6},"324":{"index":324,"count":6},"325":{"index":325,"count":6},"326":{"index":326,"count":6},"327":{"index":327,"count":26},"328":{"index":328,"count":26},"329":{"index":329,"count":26},"330":{"index":330,"count":26},"331":{"index":331,"count":26},"332":{"index":332,"count":26},"333":{"index":333,"count":26},"334":{"index":334,"count":26},"335":{"index":335,"count":19},"336":{"index":336,"count":19},"337":{"index":337,"count":19},"338":{"index":338,"count":19},"339":{"index":339,"count":6},"340":{"index":340,"count":6},"342":{"index":342,"count":86},"343":{"index":343,"count":86},"344":{"index":344,"count":86},"345":{"index":345,"count":86},"346":{"index":346,"count":86},"347":{"index":347,"count":1},"348":{"index":348,"count":202},"349":{"index":349,"count":202},"350":{"index":350,"count":202},"351":{"index":351,"count":202},"352":{"index":352,"count":202},"353":{"index":353,"count":202},"354":{"index":354,"count":202},"358":{"index":358,"count":1},"359":{"index":359,"count":38},"360":{"index":360,"count":38},"375":{"index":375,"count":1},"376":{"index":376,"count":8},"379":{"index":379,"count":8},"380":{"index":380,"count":8},"381":{"index":381,"count":8},"382":{"index":382,"count":8},"383":{"index":383,"count":8},"384":{"index":384,"count":8},"385":{"index":385,"count":8},"386":{"index":386,"count":8},"387":{"index":387,"count":1},"388":{"index":388,"count":4},"389":{"index":389,"count":4},"393":{"index":393,"count":1},"394":{"index":394,"count":138},"395":{"index":395,"count":1},"397":{"index":397,"count":1},"398":{"index":398,"count":1},"399":{"index":399,"count":1},"400":{"index":400,"count":7},"401":{"index":401,"count":41},"402":{"index":402,"count":1},"404":{"index":404,"count":1},"406":{"index":406,"count":47},"407":{"index":407,"count":47},"408":{"index":408,"count":47},"409":{"index":409,"count":1},"410":{"index":410,"count":1},"411":{"index":411,"count":1},"412":{"index":412,"count":42},"413":{"index":413,"count":38},"414":{"index":414,"count":38},"415":{"index":415,"count":38},"416":{"index":416,"count":38},"417":{"index":417,"count":38},"418":{"index":418,"count":38},"419":{"index":419,"count":1},"420":{"index":420,"count":1},"421":{"index":421,"count":1},"422":{"index":422,"count":115},"423":{"index":423,"count":1},"424":{"index":424,"count":512},"425":{"index":425,"count":512},"426":{"index":426,"count":512},"427":{"index":427,"count":161},"428":{"index":428,"count":351},"429":{"index":429,"count":351},"430":{"index":430,"count":351},"431":{"index":431,"count":73},"432":{"index":432,"count":73},"433":{"index":433,"count":73},"434":{"index":434,"count":13},"435":{"index":435,"count":3},"436":{"index":436,"count":3},"437":{"index":437,"count":3},"438":{"index":438,"count":3},"439":{"index":439,"count":3},"440":{"index":440,"count":3},"441":{"index":441,"count":3},"442":{"index":442,"count":275},"443":{"index":443,"count":275},"444":{"index":444,"count":275},"445":{"index":445,"count":1},"446":{"index":446,"count":24},"447":{"index":447,"count":3},"448":{"index":448,"count":21},"449":{"index":449,"count":21},"450":{"index":450,"count":21},"452":{"index":452,"count":21},"453":{"index":453,"count":8},"457":{"index":457,"count":21},"458":{"index":458,"count":21},"459":{"index":459,"count":21},"460":{"index":460,"count":1},"461":{"index":461,"count":1},"462":{"index":462,"count":1},"463":{"index":463,"count":1},"464":{"index":464,"count":1},"465":{"index":465,"count":1},"466":{"index":466,"count":2},"467":{"index":467,"count":1},"468":{"index":468,"count":2},"469":{"index":469,"count":2},"470":{"index":470,"count":2},"471":{"index":471,"count":2},"475":{"index":475,"count":2},"476":{"index":476,"count":2},"477":{"index":477,"count":2},"478":{"index":478,"count":2},"479":{"index":479,"count":2},"480":{"index":480,"count":2},"481":{"index":481,"count":2},"482":{"index":482,"count":1},"483":{"index":483,"count":1},"484":{"index":484,"count":1},"485":{"index":485,"count":1},"486":{"index":486,"count":1},"487":{"index":487,"count":1},"488":{"index":488,"count":1},"489":{"index":489,"count":1}},"blocks":{"0":{"index":0,"count":32},"1":{"index":1,"count":16},"3":{"index":3,"count":156},"4":{"index":4,"count":14},"5":{"index":5,"count":19},"6":{"index":6,"count":43},"7":{"index":7,"count":19},"8":{"index":8,"count":5},"9":{"index":9,"count":14},"10":{"index":10,"count":34},"11":{"index":11,"count":34},"13":{"index":13,"count":28},"14":{"index":14,"count":28},"16":{"index":16,"count":28},"18":{"index":18,"count":16},"19":{"index":19,"count":5},"20":{"index":20,"count":4},"22":{"index":22,"count":23},"25":{"index":25,"count":1},"26":{"index":26,"count":22},"27":{"index":27,"count":2},"28":{"index":28,"count":2},"32":{"index":32,"count":9},"33":{"index":33,"count":9},"36":{"index":36,"count":2},"37":{"index":37,"count":2},"41":{"index":41,"count":74},"42":{"index":42,"count":74},"43":{"index":43,"count":2},"44":{"index":44,"count":2},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"64":{"index":64,"count":7},"65":{"index":65,"count":7},"66":{"index":66,"count":6},"67":{"index":67,"count":6},"68":{"index":68,"count":26},"69":{"index":69,"count":26},"70":{"index":70,"count":19},"71":{"index":71,"count":19},"72":{"index":72,"count":6},"73":{"index":73,"count":86},"75":{"index":75,"count":202},"76":{"index":76,"count":202},"78":{"index":78,"count":38},"79":{"index":79,"count":38},"83":{"index":83,"count":8},"85":{"index":85,"count":4},"86":{"index":86,"count":4},"87":{"index":87,"count":138},"89":{"index":89,"count":7},"90":{"index":90,"count":41},"93":{"index":93,"count":47},"94":{"index":94,"count":42},"95":{"index":95,"count":38},"96":{"index":96,"count":115},"97":{"index":97,"count":512},"98":{"index":98,"count":161},"99":{"index":99,"count":73},"100":{"index":100,"count":16},"101":{"index":101,"count":13},"102":{"index":102,"count":3},"103":{"index":103,"count":24},"104":{"index":104,"count":3},"106":{"index":106,"count":8},"108":{"index":108,"count":1},"109":{"index":109,"count":2},"110":{"index":110,"count":2},"112":{"index":112,"count":1}},"hash":"b677abd706df5d4c2a0d47bc9b739d1a","instrumentor":{"blockCounter":113,"nodeCounter":490,"source":"var Q = require(\"q\");\nvar Boot = require(\"./fs-boot\");\nvar Common = require(\"./fs-common\");\nvar BufferStream = require(\"./buffer-stream\");\nvar Reader = require(\"./reader\");\nvar Set = require(\"collections/set\");\n\nmodule.exports = MockFs;\n\nfunction MockFs(files) {\n    if (!(this instanceof MockFs)) {\n        return new MockFs(files);\n    }\n    this._root = new DirectoryNode(this, \"/\");\n\n    function init() {\n        // construct a file tree\n    }\n\n    Common.update(this, function () {\n        return workingDirectory;\n    });\n\n    var workingDirectory = this.ROOT;\n    if (files) {\n        this._init(files);\n    }\n}\n\nMockFs.prototype = Object.create(Boot);\n\nMockFs.prototype._init = function (files, tree) {\n    tree = tree || this.ROOT;\n    Object.keys(files).forEach(function (path) {\n        var content = files[path];\n        path = this.join(tree, path);\n        var directory = this.directory(path);\n        var base = this.base(path);\n        var directoryNode = this._root._walk(directory, true);\n        var fileNode = new FileNode(this);\n        if (!(content instanceof Buffer)) {\n            if (typeof content === \"object\") {\n                this._init(content, path);\n                return;\n            } else {\n                content = new Buffer(String(content), \"utf-8\");\n            }\n        }\n        directoryNode._entries[base] = fileNode;\n        fileNode._chunks = [content];\n    }, this);\n};\n\nMockFs.prototype.list = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var node = self._root._walk(path)._follow(path);\n        if (!node.isDirectory()) {\n            new Error(\"Can't list non-directory: \" + JSON.stringify(path));\n        }\n        return Object.keys(node._entries).sort();\n    });\n};\n\nMockFs.prototype.open = function (path, flags, charset, options) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var directory = self.directory(path);\n        var base = self.base(path);\n        var node = self._root._walk(directory);\n        if (!node.isDirectory()) {\n            throw new Error(\"Can't find \" + path + \" because \" + directory + \" is not a directory\");\n        }\n        if (typeof flags == \"object\") {\n            options = flags;\n            flags = options.flags;\n            charset = options.charset;\n        } else {\n            options = options || {};\n        }\n        flags = flags || \"r\";\n        var binary = flags.indexOf(\"b\") >= 0;\n        var write = flags.indexOf(\"w\") >= 0;\n        if (!binary) {\n            charset = charset || \"utf-8\";\n        }\n        if (write) {\n            if (!node._entries[base]) {\n                node._entries[base] = new FileNode(this);\n            }\n            var fileNode = node._entries[base]._follow(path);\n            if (!fileNode.isFile()) {\n                throw new Error(\"Can't write non-file \" + path);\n            }\n            fileNode._lastModified = new Date();\n            fileNode._lastAccessed = new Date();\n            return new BufferStream(fileNode._chunks, charset);\n        } else { // read\n            if (!node._entries[base]) {\n                throw new Error(\"Can't read non-existant \" + path);\n            }\n            var fileNode = node._entries[base]._follow(path);\n            if (!fileNode.isFile()) {\n                throw new Error(\"Can't read non-file \" + path);\n            }\n            fileNode._lastAccessed = new Date();\n            if (\"begin\" in options && \"end\" in options) {\n                return new BufferStream(\n                    [\n                        Reader.join(fileNode._chunks)\n                        .slice(options.begin, options.end)\n                    ],\n                    charset\n                );\n            } else {\n                return new BufferStream(fileNode._chunks, charset);\n            }\n        }\n    });\n};\n\nMockFs.prototype.remove = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var directory = self.directory(path);\n        var name = self.base(path);\n        var node = self._root._walk(directory);\n        if (!node.isDirectory()) {\n            throw new Error(\"Can't remove file from non-directory: \" + path);\n        }\n        if (!node._entries[name]) {\n            throw new Error(\"Can't remove non-existant file: \" + path);\n        }\n        if (node._entries[name].isDirectory()) {\n            throw new Error(\"Can't remove directory. Use removeDirectory: \" + path);\n        }\n        delete node._entries[name];\n    });\n};\n\nMockFs.prototype.makeDirectory = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var directory = self.directory(path);\n        var name = self.base(path);\n        var node = self._root._walk(directory);\n        if (!node.isDirectory()) {\n            throw new Error(\"Can't make directory in non-directory: \" + path);\n        }\n        if (node._entries[name]) {\n            throw new Error(\"Can't make directory. Entry exists: \" + path);\n        }\n        node._entries[name] = new DirectoryNode(self);\n    });\n};\n\nMockFs.prototype.removeDirectory = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var directory = self.directory(path);\n        var name = self.base(path);\n        var node = self._root._walk(directory);\n        if (!node.isDirectory()) {\n            throw new Error(\"Can't remove directory from non-directory: \" + path);\n        }\n        if (!node._entries[name]) {\n            throw new Error(\"Can't remove non-existant directory: \" + path);\n        }\n        if (!node._entries[name].isDirectory()) {\n            throw new Error(\"Can't remove non-directory: \" + path);\n        }\n        delete node._entries[name];\n    });\n};\n\nMockFs.prototype.stat = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        return self._root._walk(path)._follow(path);\n    });\n};\n\nMockFs.prototype.statLink = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var node = self._root._walk(path);\n        if (!node.isSymbolicLink()) {\n            throw new Error(\"Path is not symbolic link: \" + JSON.stringify(path));\n        }\n        return node;\n    });\n};\n\nMockFs.prototype.link = function (source, target) {\n    var self = this;\n    return Q.fcall(function () {\n        source = self.absolute(source);\n        target = self.absolute(target);\n        var sourceNode = self._root._walk(source)._follow(source);\n        if (!sourceNode.isFile()) {\n            throw new Error(\"Can't link non-file: \" + source);\n        }\n        var directory = self.directory(target);\n        var base = self.base(target);\n        var targetNode = self._root._walk(directory)._follow(directory);\n        if (!targetNode.isDirectory()) {\n            throw new Error(\"Can't create link in non-directory: \" + target);\n        }\n        if (targetNode._entries[base] && targetNode._entries[base].isDirectory()) {\n            throw new Error(\"Can't overwrite existing directory with hard link: \" + target);\n        }\n        targetNode._entries[base] = sourceNode;\n    });\n};\n\nMockFs.prototype.symbolicLink = function (target, relative, type) {\n    var self = this;\n    return Q.fcall(function () {\n        target = self.absolute(target);\n        var directory = self.directory(target);\n        var base = self.base(target);\n        var node = self._root._walk(directory);\n        if (node._entries[base] && node._entries[base].isDirectory()) {\n            throw new Error(\"Can't overwrite existing directory with symbolic link: \" + target);\n        }\n        node._entries[base] = new LinkNode(self, relative);\n    });\n};\n\nMockFs.prototype.chown = function (path, owner) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        self._root._walk(path)._follow(path)._owner = owner;\n    });\n};\n\nMockFs.prototype.chmod = function (path, mode) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        self._root._walk(path)._follow(path)._mode = mode;\n    });\n};\n\nMockFs.prototype.move = function (source, target) {\n    var self = this;\n    return Q.fcall(function () {\n        source = self.absolute(source);\n        target = self.absolute(target);\n        var sourceDirectory = self.directory(source);\n        var sourceDirectoryNode = self._root._walk(sourceDirectory)._follow(sourceDirectory);\n        var sourceName = self.base(source);\n        var sourceNode = sourceDirectoryNode._entries[sourceName]; // not followed\n        var targetDirectory = self.directory(target);\n        var targetDirectoryNode = self._root._walk(targetDirectory)._follow(targetDirectory);\n        var targetName = self.base(target);\n        if (targetDirectoryNode._entries[targetName] && targetDirectoryNode._entires[targetName].isDirectory()) {\n            // move the node into the directory\n            targetDirectoryNode = targetDirectoryNode._entries[targetName]._follow(target);\n        }\n        targetDirectoryNode._entries[targetName] = sourceNode;\n        delete sourceDirectoryNode._entries[sourceName];\n    });\n};\n\nMockFs.prototype.readLink = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        var node = self._root._walk(path);\n        if (!self.isSymbolicLink()) {\n            throw new Error(\"Can't read non-symbolic link: \" + path);\n        }\n        return node._link;\n    });\n};\n\nMockFs.prototype.canonical = function (path) {\n    var self = this;\n    return Q.fcall(function () {\n        path = self.absolute(path);\n        return self._root._canonical(path);\n    });\n};\n\nMockFs.mock = mock;\nfunction mock(fs, root) {\n    return Q.when(fs.listTree(root), function (list) {\n        var tree = {};\n        return Q.all(list.map(function (path) {\n            var actual = fs.join(root, path);\n            var relative = fs.relativeFromDirectory(root, actual);\n            return Q.when(fs.stat(actual), function (stat) {\n                if (stat.isFile()) {\n                    return Q.when(fs.read(path, \"rb\"), function (content) {\n                        tree[relative] = content;\n                    });\n                }\n            });\n        })).then(function () {\n            return MockFs(tree);\n        });\n    });\n}\n\nfunction Node(fs) {\n    if (!fs)\n        throw new Error(\"FS required argument\");\n    this._fs = fs;\n    this._accessed = this._modified = new Date();\n    this._mode = parseInt(\"0644\", 8);\n    this._owner = null;\n}\n\nNode.prototype._walk = function (path, make, via) {\n    var parts = this._fs.split(path);\n    if (this._fs.isAbsolute(path)) {\n        parts.shift();\n        return this._fs._root._walkParts(parts, make, this._fs.ROOT);\n    } else {\n        return this._walkParts(parts, make, via || this._fs.ROOT);\n    }\n};\n\nNode.prototype._walkParts = function (parts, make, via) {\n    if (parts.length === 0) {\n        return this;\n    } else {\n        var part = parts.shift();\n        if (part === \"\") {\n            return this._walkParts(parts, make, this._fs.join(via, part));\n        } else {\n            throw new Error(\"Can't find \" + JSON.stringify(this._fs.resolve(part, this._fs.join(parts))) + \" via \" + JSON.stringify(via));\n        }\n    }\n};\n\nNode.prototype._canonical = function (path) {\n    if (!this._fs.isAbsolute(path)) {\n        throw new Error(\"Path must be absolute for _canonical: \" + path);\n    }\n    var parts = this._fs.split(path);\n    parts.shift();\n    var via = this._fs.ROOT;\n    return via + this._fs._root._canonicalParts(parts, via);\n};\n\nNode.prototype._canonicalParts = function (parts, via) {\n    if (parts.length === 0) {\n        return via;\n    }\n    return this._fs.join(via, this._fs.join(parts));\n};\n\nNode.prototype._follow = function () {\n    return this;\n};\n\nNode.prototype._touch = function () {\n    this._modified = new Date();\n};\n\nvar stats = [\n    \"isDirectory\",\n    \"isFile\",\n    \"isBlockDevice\",\n    \"isCharacterDevice\",\n    \"isSymbolicLink\",\n    \"isFIFO\",\n    \"isSocket\"\n];\n\nstats.forEach(function (name) {\n    Node.prototype[name] = function () {\n        return false;\n    };\n});\n\nNode.prototype.lastAccessed = function () {\n    return this._accessed;\n};\n\nNode.prototype.lastModified = function () {\n    return this._modified;\n};\n\nfunction FileNode(fs) {\n    Node.call(this, fs);\n    this._chunks = [];\n}\n\nFileNode.prototype = Object.create(Node.prototype);\n\nFileNode.prototype.isFile = function () {\n    return true;\n};\n\nfunction DirectoryNode(fs) {\n    Node.call(this, fs);\n    this._entries = Object.create(null);\n    this._mode = parseInt(\"0755\", 8);\n}\n\nDirectoryNode.prototype = Object.create(Node.prototype);\n\nDirectoryNode.prototype.isDirectory = function () {\n    return true;\n};\n\nDirectoryNode.prototype._walkParts = function (parts, make, via) {\n    via = via || this._fs.ROOT;\n    if (parts.length === 0) {\n        return this;\n    }\n    var part = parts.shift();\n    if (part === \"\") {\n        return this._walkParts(parts, make, this._fs.join(via, part));\n    }\n    if (!this._entries[part]) {\n        if (make) {\n            this._entries[part] = new DirectoryNode(this._fs);\n        } else {\n            throw new Error(\"Can't find \" + JSON.stringify(this._fs.join(parts)) + \" via \" + JSON.stringify(via));\n        }\n    }\n    return this._entries[part]._walkParts(parts, make, this._fs.join(via, part));\n};\n\nDirectoryNode.prototype._canonicalParts = function (parts, via) {\n    if (parts.length === 0) {\n        return via;\n    }\n    var part = parts.shift();\n    if (part === \"\") {\n        return via;\n    }\n    if (via === this._fs.ROOT) {\n        via = \"\";\n    }\n    if (!this._entries[part]) {\n        return this._fs.join(via, part, this._fs.join(parts));\n    }\n    return this._entries[part]._canonicalParts(\n        parts,\n        this._fs.join(via, part)\n    );\n};\n\nfunction LinkNode(fs, link) {\n    Node.call(this, fs);\n    this._link = link;\n}\n\nLinkNode.prototype = Object.create(Node.prototype);\n\nLinkNode.prototype.isSymbolicLink = function () {\n    return true;\n};\n\nLinkNode.prototype._follow = function (via, memo) {\n    memo = memo || Set();\n    if (memo.has(this)) {\n        throw new Error(\"Can't follow symbolic link cycle at \" + JSON.stringify(via));\n    }\n    memo.add(this);\n    var link = this._fs.join(via, \"..\", this._link);\n    return this._walk(link, null, \"<link>\")._follow(link, memo);\n};\n\nLinkNode.prototype._canonicalParts = function (parts, via) {\n    return this._fs.relativeFromDirectory(this._fs.ROOT,\n        this._fs._root._canonical(\n            this._fs.absolute(this._fs.join(via, \"..\", this._link))\n        )\n    );\n};\n\n// cycle breaking\nvar FS = require(\"./fs\");","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":32}},"id":2},"3":{"loc":{"start":{"line":2,"column":11},"end":{"line":2,"column":31}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":4},"5":{"loc":{"start":{"line":3,"column":13},"end":{"line":3,"column":35}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":46}},"id":6},"7":{"loc":{"start":{"line":4,"column":19},"end":{"line":4,"column":45}},"id":7},"8":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":33}},"id":8},"9":{"loc":{"start":{"line":5,"column":13},"end":{"line":5,"column":32}},"id":9},"10":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":37}},"id":10},"11":{"loc":{"start":{"line":6,"column":10},"end":{"line":6,"column":36}},"id":11},"12":{"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":24}},"id":12},"13":{"loc":{"start":{"line":11,"column":9},"end":{"line":11,"column":33}},"id":13},"14":{"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":33}},"id":14},"15":{"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":46}},"id":15},"16":{"loc":{"start":{"line":20,"column":4},"end":{"line":22,"column":7}},"id":16},"17":{"loc":{"start":{"line":20,"column":4},"end":{"line":22,"column":6}},"id":17},"18":{"loc":{"start":{"line":21,"column":8},"end":{"line":21,"column":32}},"id":18},"19":{"loc":{"start":{"line":24,"column":4},"end":{"line":24,"column":37}},"id":19},"20":{"loc":{"start":{"line":26,"column":8},"end":{"line":26,"column":26}},"id":20},"21":{"loc":{"start":{"line":26,"column":8},"end":{"line":26,"column":25}},"id":21},"22":{"loc":{"start":{"line":30,"column":0},"end":{"line":30,"column":39}},"id":22},"23":{"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":38}},"id":23},"24":{"loc":{"start":{"line":32,"column":0},"end":{"line":52,"column":2}},"id":24},"25":{"loc":{"start":{"line":33,"column":4},"end":{"line":33,"column":29}},"id":25},"26":{"loc":{"start":{"line":33,"column":11},"end":{"line":33,"column":28}},"id":26},"27":{"loc":{"start":{"line":34,"column":4},"end":{"line":51,"column":13}},"id":27},"28":{"loc":{"start":{"line":34,"column":4},"end":{"line":51,"column":12}},"id":28},"29":{"loc":{"start":{"line":34,"column":15},"end":{"line":34,"column":22}},"id":29},"30":{"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":34}},"id":30},"31":{"loc":{"start":{"line":36,"column":8},"end":{"line":36,"column":37}},"id":31},"32":{"loc":{"start":{"line":36,"column":15},"end":{"line":36,"column":36}},"id":32},"33":{"loc":{"start":{"line":37,"column":8},"end":{"line":37,"column":45}},"id":33},"34":{"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":44}},"id":34},"35":{"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":35}},"id":35},"36":{"loc":{"start":{"line":38,"column":19},"end":{"line":38,"column":34}},"id":36},"37":{"loc":{"start":{"line":39,"column":8},"end":{"line":39,"column":62}},"id":37},"38":{"loc":{"start":{"line":39,"column":28},"end":{"line":39,"column":61}},"id":38},"39":{"loc":{"start":{"line":40,"column":8},"end":{"line":40,"column":42}},"id":39},"40":{"loc":{"start":{"line":41,"column":13},"end":{"line":41,"column":40}},"id":40},"41":{"loc":{"start":{"line":42,"column":16},"end":{"line":42,"column":43}},"id":41},"42":{"loc":{"start":{"line":43,"column":16},"end":{"line":43,"column":42}},"id":42},"43":{"loc":{"start":{"line":43,"column":16},"end":{"line":43,"column":41}},"id":43},"44":{"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":23}},"id":44},"45":{"loc":{"start":{"line":46,"column":16},"end":{"line":46,"column":63}},"id":45},"46":{"loc":{"start":{"line":46,"column":37},"end":{"line":46,"column":52}},"id":46},"47":{"loc":{"start":{"line":49,"column":8},"end":{"line":49,"column":48}},"id":47},"48":{"loc":{"start":{"line":50,"column":8},"end":{"line":50,"column":37}},"id":48},"49":{"loc":{"start":{"line":54,"column":0},"end":{"line":64,"column":2}},"id":49},"50":{"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":20}},"id":50},"51":{"loc":{"start":{"line":56,"column":4},"end":{"line":63,"column":7}},"id":51},"52":{"loc":{"start":{"line":56,"column":11},"end":{"line":63,"column":6}},"id":52},"53":{"loc":{"start":{"line":57,"column":8},"end":{"line":57,"column":35}},"id":53},"54":{"loc":{"start":{"line":57,"column":15},"end":{"line":57,"column":34}},"id":54},"55":{"loc":{"start":{"line":58,"column":8},"end":{"line":58,"column":56}},"id":55},"56":{"loc":{"start":{"line":58,"column":19},"end":{"line":58,"column":55}},"id":56},"57":{"loc":{"start":{"line":58,"column":35},"end":{"line":58,"column":41}},"id":57},"58":{"loc":{"start":{"line":59,"column":13},"end":{"line":59,"column":31}},"id":58},"59":{"loc":{"start":{"line":60,"column":12},"end":{"line":60,"column":75}},"id":59},"60":{"loc":{"start":{"line":60,"column":22},"end":{"line":60,"column":73}},"id":60},"61":{"loc":{"start":{"line":60,"column":53},"end":{"line":60,"column":73}},"id":61},"62":{"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":49}},"id":62},"63":{"loc":{"start":{"line":62,"column":15},"end":{"line":62,"column":48}},"id":63},"64":{"loc":{"start":{"line":62,"column":26},"end":{"line":62,"column":41}},"id":64},"65":{"loc":{"start":{"line":66,"column":0},"end":{"line":122,"column":2}},"id":65},"66":{"loc":{"start":{"line":67,"column":4},"end":{"line":67,"column":20}},"id":66},"67":{"loc":{"start":{"line":68,"column":4},"end":{"line":121,"column":7}},"id":67},"68":{"loc":{"start":{"line":68,"column":11},"end":{"line":121,"column":6}},"id":68},"69":{"loc":{"start":{"line":69,"column":8},"end":{"line":69,"column":35}},"id":69},"70":{"loc":{"start":{"line":69,"column":15},"end":{"line":69,"column":34}},"id":70},"71":{"loc":{"start":{"line":70,"column":8},"end":{"line":70,"column":45}},"id":71},"72":{"loc":{"start":{"line":70,"column":24},"end":{"line":70,"column":44}},"id":72},"73":{"loc":{"start":{"line":71,"column":8},"end":{"line":71,"column":35}},"id":73},"74":{"loc":{"start":{"line":71,"column":19},"end":{"line":71,"column":34}},"id":74},"75":{"loc":{"start":{"line":72,"column":8},"end":{"line":72,"column":47}},"id":75},"76":{"loc":{"start":{"line":72,"column":19},"end":{"line":72,"column":46}},"id":76},"77":{"loc":{"start":{"line":73,"column":13},"end":{"line":73,"column":31}},"id":77},"78":{"loc":{"start":{"line":74,"column":12},"end":{"line":74,"column":100}},"id":78},"79":{"loc":{"start":{"line":74,"column":28},"end":{"line":74,"column":98}},"id":79},"80":{"loc":{"start":{"line":74,"column":28},"end":{"line":74,"column":74}},"id":80},"81":{"loc":{"start":{"line":74,"column":28},"end":{"line":74,"column":62}},"id":81},"82":{"loc":{"start":{"line":74,"column":28},"end":{"line":74,"column":48}},"id":82},"83":{"loc":{"start":{"line":76,"column":12},"end":{"line":76,"column":36}},"id":83},"84":{"loc":{"start":{"line":77,"column":12},"end":{"line":77,"column":28}},"id":84},"85":{"loc":{"start":{"line":78,"column":12},"end":{"line":78,"column":34}},"id":85},"86":{"loc":{"start":{"line":79,"column":12},"end":{"line":79,"column":38}},"id":86},"87":{"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":36}},"id":87},"88":{"loc":{"start":{"line":81,"column":22},"end":{"line":81,"column":35}},"id":88},"89":{"loc":{"start":{"line":83,"column":8},"end":{"line":83,"column":29}},"id":89},"90":{"loc":{"start":{"line":83,"column":16},"end":{"line":83,"column":28}},"id":90},"91":{"loc":{"start":{"line":84,"column":8},"end":{"line":84,"column":45}},"id":91},"92":{"loc":{"start":{"line":84,"column":21},"end":{"line":84,"column":44}},"id":92},"93":{"loc":{"start":{"line":84,"column":21},"end":{"line":84,"column":39}},"id":93},"94":{"loc":{"start":{"line":85,"column":8},"end":{"line":85,"column":44}},"id":94},"95":{"loc":{"start":{"line":85,"column":20},"end":{"line":85,"column":43}},"id":95},"96":{"loc":{"start":{"line":85,"column":20},"end":{"line":85,"column":38}},"id":96},"97":{"loc":{"start":{"line":87,"column":12},"end":{"line":87,"column":41}},"id":97},"98":{"loc":{"start":{"line":87,"column":22},"end":{"line":87,"column":40}},"id":98},"99":{"loc":{"start":{"line":91,"column":16},"end":{"line":91,"column":57}},"id":99},"100":{"loc":{"start":{"line":93,"column":12},"end":{"line":93,"column":61}},"id":100},"101":{"loc":{"start":{"line":93,"column":27},"end":{"line":93,"column":60}},"id":101},"102":{"loc":{"start":{"line":94,"column":17},"end":{"line":94,"column":34}},"id":102},"103":{"loc":{"start":{"line":95,"column":16},"end":{"line":95,"column":64}},"id":103},"104":{"loc":{"start":{"line":95,"column":32},"end":{"line":95,"column":62}},"id":104},"105":{"loc":{"start":{"line":97,"column":12},"end":{"line":97,"column":48}},"id":105},"106":{"loc":{"start":{"line":98,"column":12},"end":{"line":98,"column":48}},"id":106},"107":{"loc":{"start":{"line":99,"column":12},"end":{"line":99,"column":63}},"id":107},"108":{"loc":{"start":{"line":102,"column":16},"end":{"line":102,"column":67}},"id":108},"109":{"loc":{"start":{"line":102,"column":32},"end":{"line":102,"column":65}},"id":109},"110":{"loc":{"start":{"line":104,"column":12},"end":{"line":104,"column":61}},"id":110},"111":{"loc":{"start":{"line":104,"column":27},"end":{"line":104,"column":60}},"id":111},"112":{"loc":{"start":{"line":105,"column":17},"end":{"line":105,"column":34}},"id":112},"113":{"loc":{"start":{"line":106,"column":16},"end":{"line":106,"column":63}},"id":113},"114":{"loc":{"start":{"line":106,"column":32},"end":{"line":106,"column":61}},"id":114},"115":{"loc":{"start":{"line":108,"column":12},"end":{"line":108,"column":48}},"id":115},"116":{"loc":{"start":{"line":109,"column":16},"end":{"line":109,"column":54}},"id":116},"117":{"loc":{"start":{"line":109,"column":16},"end":{"line":109,"column":34}},"id":117},"118":{"loc":{"start":{"line":109,"column":38},"end":{"line":109,"column":54}},"id":118},"119":{"loc":{"start":{"line":110,"column":16},"end":{"line":116,"column":18}},"id":119},"120":{"loc":{"start":{"line":112,"column":24},"end":{"line":113,"column":58}},"id":120},"121":{"loc":{"start":{"line":112,"column":35},"end":{"line":112,"column":53}},"id":121},"122":{"loc":{"start":{"line":118,"column":16},"end":{"line":118,"column":67}},"id":122},"123":{"loc":{"start":{"line":124,"column":0},"end":{"line":142,"column":2}},"id":123},"124":{"loc":{"start":{"line":125,"column":4},"end":{"line":125,"column":20}},"id":124},"125":{"loc":{"start":{"line":126,"column":4},"end":{"line":141,"column":7}},"id":125},"126":{"loc":{"start":{"line":126,"column":11},"end":{"line":141,"column":6}},"id":126},"127":{"loc":{"start":{"line":127,"column":8},"end":{"line":127,"column":35}},"id":127},"128":{"loc":{"start":{"line":127,"column":15},"end":{"line":127,"column":34}},"id":128},"129":{"loc":{"start":{"line":128,"column":8},"end":{"line":128,"column":45}},"id":129},"130":{"loc":{"start":{"line":128,"column":24},"end":{"line":128,"column":44}},"id":130},"131":{"loc":{"start":{"line":129,"column":8},"end":{"line":129,"column":35}},"id":131},"132":{"loc":{"start":{"line":129,"column":19},"end":{"line":129,"column":34}},"id":132},"133":{"loc":{"start":{"line":130,"column":8},"end":{"line":130,"column":47}},"id":133},"134":{"loc":{"start":{"line":130,"column":19},"end":{"line":130,"column":46}},"id":134},"135":{"loc":{"start":{"line":131,"column":13},"end":{"line":131,"column":31}},"id":135},"136":{"loc":{"start":{"line":132,"column":12},"end":{"line":132,"column":77}},"id":136},"137":{"loc":{"start":{"line":132,"column":28},"end":{"line":132,"column":75}},"id":137},"138":{"loc":{"start":{"line":135,"column":12},"end":{"line":135,"column":71}},"id":138},"139":{"loc":{"start":{"line":135,"column":28},"end":{"line":135,"column":69}},"id":139},"140":{"loc":{"start":{"line":137,"column":12},"end":{"line":137,"column":45}},"id":140},"141":{"loc":{"start":{"line":138,"column":12},"end":{"line":138,"column":84}},"id":141},"142":{"loc":{"start":{"line":138,"column":28},"end":{"line":138,"column":82}},"id":142},"143":{"loc":{"start":{"line":140,"column":8},"end":{"line":140,"column":35}},"id":143},"144":{"loc":{"start":{"line":144,"column":0},"end":{"line":159,"column":2}},"id":144},"145":{"loc":{"start":{"line":145,"column":4},"end":{"line":145,"column":20}},"id":145},"146":{"loc":{"start":{"line":146,"column":4},"end":{"line":158,"column":7}},"id":146},"147":{"loc":{"start":{"line":146,"column":11},"end":{"line":158,"column":6}},"id":147},"148":{"loc":{"start":{"line":147,"column":8},"end":{"line":147,"column":35}},"id":148},"149":{"loc":{"start":{"line":147,"column":15},"end":{"line":147,"column":34}},"id":149},"150":{"loc":{"start":{"line":148,"column":8},"end":{"line":148,"column":45}},"id":150},"151":{"loc":{"start":{"line":148,"column":24},"end":{"line":148,"column":44}},"id":151},"152":{"loc":{"start":{"line":149,"column":8},"end":{"line":149,"column":35}},"id":152},"153":{"loc":{"start":{"line":149,"column":19},"end":{"line":149,"column":34}},"id":153},"154":{"loc":{"start":{"line":150,"column":8},"end":{"line":150,"column":47}},"id":154},"155":{"loc":{"start":{"line":150,"column":19},"end":{"line":150,"column":46}},"id":155},"156":{"loc":{"start":{"line":151,"column":13},"end":{"line":151,"column":31}},"id":156},"157":{"loc":{"start":{"line":152,"column":12},"end":{"line":152,"column":78}},"id":157},"158":{"loc":{"start":{"line":152,"column":28},"end":{"line":152,"column":76}},"id":158},"159":{"loc":{"start":{"line":155,"column":12},"end":{"line":155,"column":75}},"id":159},"160":{"loc":{"start":{"line":155,"column":28},"end":{"line":155,"column":73}},"id":160},"161":{"loc":{"start":{"line":157,"column":8},"end":{"line":157,"column":54}},"id":161},"162":{"loc":{"start":{"line":161,"column":0},"end":{"line":179,"column":2}},"id":162},"163":{"loc":{"start":{"line":162,"column":4},"end":{"line":162,"column":20}},"id":163},"164":{"loc":{"start":{"line":163,"column":4},"end":{"line":178,"column":7}},"id":164},"165":{"loc":{"start":{"line":163,"column":11},"end":{"line":178,"column":6}},"id":165},"166":{"loc":{"start":{"line":164,"column":8},"end":{"line":164,"column":35}},"id":166},"167":{"loc":{"start":{"line":164,"column":15},"end":{"line":164,"column":34}},"id":167},"168":{"loc":{"start":{"line":165,"column":8},"end":{"line":165,"column":45}},"id":168},"169":{"loc":{"start":{"line":165,"column":24},"end":{"line":165,"column":44}},"id":169},"170":{"loc":{"start":{"line":166,"column":8},"end":{"line":166,"column":35}},"id":170},"171":{"loc":{"start":{"line":166,"column":19},"end":{"line":166,"column":34}},"id":171},"172":{"loc":{"start":{"line":167,"column":8},"end":{"line":167,"column":47}},"id":172},"173":{"loc":{"start":{"line":167,"column":19},"end":{"line":167,"column":46}},"id":173},"174":{"loc":{"start":{"line":168,"column":13},"end":{"line":168,"column":31}},"id":174},"175":{"loc":{"start":{"line":169,"column":12},"end":{"line":169,"column":82}},"id":175},"176":{"loc":{"start":{"line":169,"column":28},"end":{"line":169,"column":80}},"id":176},"177":{"loc":{"start":{"line":172,"column":12},"end":{"line":172,"column":76}},"id":177},"178":{"loc":{"start":{"line":172,"column":28},"end":{"line":172,"column":74}},"id":178},"179":{"loc":{"start":{"line":174,"column":13},"end":{"line":174,"column":46}},"id":179},"180":{"loc":{"start":{"line":175,"column":12},"end":{"line":175,"column":67}},"id":180},"181":{"loc":{"start":{"line":175,"column":28},"end":{"line":175,"column":65}},"id":181},"182":{"loc":{"start":{"line":177,"column":8},"end":{"line":177,"column":35}},"id":182},"183":{"loc":{"start":{"line":181,"column":0},"end":{"line":187,"column":2}},"id":183},"184":{"loc":{"start":{"line":182,"column":4},"end":{"line":182,"column":20}},"id":184},"185":{"loc":{"start":{"line":183,"column":4},"end":{"line":186,"column":7}},"id":185},"186":{"loc":{"start":{"line":183,"column":11},"end":{"line":186,"column":6}},"id":186},"187":{"loc":{"start":{"line":184,"column":8},"end":{"line":184,"column":35}},"id":187},"188":{"loc":{"start":{"line":184,"column":15},"end":{"line":184,"column":34}},"id":188},"189":{"loc":{"start":{"line":185,"column":8},"end":{"line":185,"column":52}},"id":189},"190":{"loc":{"start":{"line":185,"column":15},"end":{"line":185,"column":51}},"id":190},"191":{"loc":{"start":{"line":185,"column":31},"end":{"line":185,"column":37}},"id":191},"192":{"loc":{"start":{"line":189,"column":0},"end":{"line":199,"column":2}},"id":192},"193":{"loc":{"start":{"line":190,"column":4},"end":{"line":190,"column":20}},"id":193},"194":{"loc":{"start":{"line":191,"column":4},"end":{"line":198,"column":7}},"id":194},"195":{"loc":{"start":{"line":191,"column":11},"end":{"line":198,"column":6}},"id":195},"196":{"loc":{"start":{"line":192,"column":8},"end":{"line":192,"column":35}},"id":196},"197":{"loc":{"start":{"line":192,"column":15},"end":{"line":192,"column":34}},"id":197},"198":{"loc":{"start":{"line":193,"column":8},"end":{"line":193,"column":42}},"id":198},"199":{"loc":{"start":{"line":193,"column":19},"end":{"line":193,"column":41}},"id":199},"200":{"loc":{"start":{"line":194,"column":13},"end":{"line":194,"column":34}},"id":200},"201":{"loc":{"start":{"line":195,"column":12},"end":{"line":195,"column":82}},"id":201},"202":{"loc":{"start":{"line":195,"column":28},"end":{"line":195,"column":80}},"id":202},"203":{"loc":{"start":{"line":195,"column":60},"end":{"line":195,"column":80}},"id":203},"204":{"loc":{"start":{"line":197,"column":8},"end":{"line":197,"column":20}},"id":204},"205":{"loc":{"start":{"line":201,"column":0},"end":{"line":221,"column":2}},"id":205},"206":{"loc":{"start":{"line":202,"column":4},"end":{"line":202,"column":20}},"id":206},"207":{"loc":{"start":{"line":203,"column":4},"end":{"line":220,"column":7}},"id":207},"208":{"loc":{"start":{"line":203,"column":11},"end":{"line":220,"column":6}},"id":208},"209":{"loc":{"start":{"line":204,"column":8},"end":{"line":204,"column":39}},"id":209},"210":{"loc":{"start":{"line":204,"column":17},"end":{"line":204,"column":38}},"id":210},"211":{"loc":{"start":{"line":205,"column":8},"end":{"line":205,"column":39}},"id":211},"212":{"loc":{"start":{"line":205,"column":17},"end":{"line":205,"column":38}},"id":212},"213":{"loc":{"start":{"line":206,"column":8},"end":{"line":206,"column":66}},"id":213},"214":{"loc":{"start":{"line":206,"column":25},"end":{"line":206,"column":65}},"id":214},"215":{"loc":{"start":{"line":206,"column":41},"end":{"line":206,"column":49}},"id":215},"216":{"loc":{"start":{"line":207,"column":13},"end":{"line":207,"column":32}},"id":216},"217":{"loc":{"start":{"line":208,"column":12},"end":{"line":208,"column":62}},"id":217},"218":{"loc":{"start":{"line":208,"column":28},"end":{"line":208,"column":60}},"id":218},"219":{"loc":{"start":{"line":210,"column":8},"end":{"line":210,"column":47}},"id":219},"220":{"loc":{"start":{"line":210,"column":24},"end":{"line":210,"column":46}},"id":220},"221":{"loc":{"start":{"line":211,"column":8},"end":{"line":211,"column":37}},"id":221},"222":{"loc":{"start":{"line":211,"column":19},"end":{"line":211,"column":36}},"id":222},"223":{"loc":{"start":{"line":212,"column":8},"end":{"line":212,"column":72}},"id":223},"224":{"loc":{"start":{"line":212,"column":25},"end":{"line":212,"column":71}},"id":224},"225":{"loc":{"start":{"line":212,"column":41},"end":{"line":212,"column":52}},"id":225},"226":{"loc":{"start":{"line":213,"column":13},"end":{"line":213,"column":37}},"id":226},"227":{"loc":{"start":{"line":214,"column":12},"end":{"line":214,"column":77}},"id":227},"228":{"loc":{"start":{"line":214,"column":28},"end":{"line":214,"column":75}},"id":228},"229":{"loc":{"start":{"line":216,"column":12},"end":{"line":216,"column":80}},"id":229},"230":{"loc":{"start":{"line":216,"column":41},"end":{"line":216,"column":80}},"id":230},"231":{"loc":{"start":{"line":217,"column":12},"end":{"line":217,"column":92}},"id":231},"232":{"loc":{"start":{"line":217,"column":28},"end":{"line":217,"column":90}},"id":232},"233":{"loc":{"start":{"line":219,"column":8},"end":{"line":219,"column":47}},"id":233},"234":{"loc":{"start":{"line":223,"column":0},"end":{"line":235,"column":2}},"id":234},"235":{"loc":{"start":{"line":224,"column":4},"end":{"line":224,"column":20}},"id":235},"236":{"loc":{"start":{"line":225,"column":4},"end":{"line":234,"column":7}},"id":236},"237":{"loc":{"start":{"line":225,"column":11},"end":{"line":234,"column":6}},"id":237},"238":{"loc":{"start":{"line":226,"column":8},"end":{"line":226,"column":39}},"id":238},"239":{"loc":{"start":{"line":226,"column":17},"end":{"line":226,"column":38}},"id":239},"240":{"loc":{"start":{"line":227,"column":8},"end":{"line":227,"column":47}},"id":240},"241":{"loc":{"start":{"line":227,"column":24},"end":{"line":227,"column":46}},"id":241},"242":{"loc":{"start":{"line":228,"column":8},"end":{"line":228,"column":37}},"id":242},"243":{"loc":{"start":{"line":228,"column":19},"end":{"line":228,"column":36}},"id":243},"244":{"loc":{"start":{"line":229,"column":8},"end":{"line":229,"column":47}},"id":244},"245":{"loc":{"start":{"line":229,"column":19},"end":{"line":229,"column":46}},"id":245},"246":{"loc":{"start":{"line":230,"column":12},"end":{"line":230,"column":68}},"id":246},"247":{"loc":{"start":{"line":230,"column":35},"end":{"line":230,"column":68}},"id":247},"248":{"loc":{"start":{"line":231,"column":12},"end":{"line":231,"column":96}},"id":248},"249":{"loc":{"start":{"line":231,"column":28},"end":{"line":231,"column":94}},"id":249},"250":{"loc":{"start":{"line":233,"column":8},"end":{"line":233,"column":59}},"id":250},"251":{"loc":{"start":{"line":237,"column":0},"end":{"line":243,"column":2}},"id":251},"252":{"loc":{"start":{"line":238,"column":4},"end":{"line":238,"column":20}},"id":252},"253":{"loc":{"start":{"line":239,"column":4},"end":{"line":242,"column":7}},"id":253},"254":{"loc":{"start":{"line":239,"column":11},"end":{"line":242,"column":6}},"id":254},"255":{"loc":{"start":{"line":240,"column":8},"end":{"line":240,"column":35}},"id":255},"256":{"loc":{"start":{"line":240,"column":15},"end":{"line":240,"column":34}},"id":256},"257":{"loc":{"start":{"line":241,"column":8},"end":{"line":241,"column":60}},"id":257},"258":{"loc":{"start":{"line":241,"column":38},"end":{"line":241,"column":44}},"id":258},"259":{"loc":{"start":{"line":241,"column":24},"end":{"line":241,"column":30}},"id":259},"260":{"loc":{"start":{"line":245,"column":0},"end":{"line":251,"column":2}},"id":260},"261":{"loc":{"start":{"line":246,"column":4},"end":{"line":246,"column":20}},"id":261},"262":{"loc":{"start":{"line":247,"column":4},"end":{"line":250,"column":7}},"id":262},"263":{"loc":{"start":{"line":247,"column":11},"end":{"line":250,"column":6}},"id":263},"264":{"loc":{"start":{"line":248,"column":8},"end":{"line":248,"column":35}},"id":264},"265":{"loc":{"start":{"line":248,"column":15},"end":{"line":248,"column":34}},"id":265},"266":{"loc":{"start":{"line":249,"column":8},"end":{"line":249,"column":58}},"id":266},"267":{"loc":{"start":{"line":249,"column":38},"end":{"line":249,"column":44}},"id":267},"268":{"loc":{"start":{"line":249,"column":24},"end":{"line":249,"column":30}},"id":268},"269":{"loc":{"start":{"line":253,"column":0},"end":{"line":272,"column":2}},"id":269},"270":{"loc":{"start":{"line":254,"column":4},"end":{"line":254,"column":20}},"id":270},"271":{"loc":{"start":{"line":255,"column":4},"end":{"line":271,"column":7}},"id":271},"272":{"loc":{"start":{"line":255,"column":11},"end":{"line":271,"column":6}},"id":272},"273":{"loc":{"start":{"line":256,"column":8},"end":{"line":256,"column":39}},"id":273},"274":{"loc":{"start":{"line":256,"column":17},"end":{"line":256,"column":38}},"id":274},"275":{"loc":{"start":{"line":257,"column":8},"end":{"line":257,"column":39}},"id":275},"276":{"loc":{"start":{"line":257,"column":17},"end":{"line":257,"column":38}},"id":276},"277":{"loc":{"start":{"line":258,"column":8},"end":{"line":258,"column":53}},"id":277},"278":{"loc":{"start":{"line":258,"column":30},"end":{"line":258,"column":52}},"id":278},"279":{"loc":{"start":{"line":259,"column":8},"end":{"line":259,"column":93}},"id":279},"280":{"loc":{"start":{"line":259,"column":34},"end":{"line":259,"column":92}},"id":280},"281":{"loc":{"start":{"line":259,"column":50},"end":{"line":259,"column":67}},"id":281},"282":{"loc":{"start":{"line":260,"column":8},"end":{"line":260,"column":43}},"id":282},"283":{"loc":{"start":{"line":260,"column":25},"end":{"line":260,"column":42}},"id":283},"284":{"loc":{"start":{"line":261,"column":8},"end":{"line":261,"column":66}},"id":284},"285":{"loc":{"start":{"line":262,"column":8},"end":{"line":262,"column":53}},"id":285},"286":{"loc":{"start":{"line":262,"column":30},"end":{"line":262,"column":52}},"id":286},"287":{"loc":{"start":{"line":263,"column":8},"end":{"line":263,"column":93}},"id":287},"288":{"loc":{"start":{"line":263,"column":34},"end":{"line":263,"column":92}},"id":288},"289":{"loc":{"start":{"line":263,"column":50},"end":{"line":263,"column":67}},"id":289},"290":{"loc":{"start":{"line":264,"column":8},"end":{"line":264,"column":43}},"id":290},"291":{"loc":{"start":{"line":264,"column":25},"end":{"line":264,"column":42}},"id":291},"292":{"loc":{"start":{"line":265,"column":12},"end":{"line":265,"column":110}},"id":292},"293":{"loc":{"start":{"line":265,"column":56},"end":{"line":265,"column":110}},"id":293},"294":{"loc":{"start":{"line":267,"column":12},"end":{"line":267,"column":91}},"id":294},"295":{"loc":{"start":{"line":267,"column":34},"end":{"line":267,"column":90}},"id":295},"296":{"loc":{"start":{"line":269,"column":8},"end":{"line":269,"column":62}},"id":296},"297":{"loc":{"start":{"line":270,"column":8},"end":{"line":270,"column":56}},"id":297},"298":{"loc":{"start":{"line":274,"column":0},"end":{"line":284,"column":2}},"id":298},"299":{"loc":{"start":{"line":275,"column":4},"end":{"line":275,"column":20}},"id":299},"300":{"loc":{"start":{"line":276,"column":4},"end":{"line":283,"column":7}},"id":300},"301":{"loc":{"start":{"line":276,"column":11},"end":{"line":283,"column":6}},"id":301},"302":{"loc":{"start":{"line":277,"column":8},"end":{"line":277,"column":35}},"id":302},"303":{"loc":{"start":{"line":277,"column":15},"end":{"line":277,"column":34}},"id":303},"304":{"loc":{"start":{"line":278,"column":8},"end":{"line":278,"column":42}},"id":304},"305":{"loc":{"start":{"line":278,"column":19},"end":{"line":278,"column":41}},"id":305},"306":{"loc":{"start":{"line":279,"column":13},"end":{"line":279,"column":34}},"id":306},"307":{"loc":{"start":{"line":280,"column":12},"end":{"line":280,"column":69}},"id":307},"308":{"loc":{"start":{"line":280,"column":28},"end":{"line":280,"column":67}},"id":308},"309":{"loc":{"start":{"line":282,"column":8},"end":{"line":282,"column":26}},"id":309},"310":{"loc":{"start":{"line":286,"column":0},"end":{"line":292,"column":2}},"id":310},"311":{"loc":{"start":{"line":287,"column":4},"end":{"line":287,"column":20}},"id":311},"312":{"loc":{"start":{"line":288,"column":4},"end":{"line":291,"column":7}},"id":312},"313":{"loc":{"start":{"line":288,"column":11},"end":{"line":291,"column":6}},"id":313},"314":{"loc":{"start":{"line":289,"column":8},"end":{"line":289,"column":35}},"id":314},"315":{"loc":{"start":{"line":289,"column":15},"end":{"line":289,"column":34}},"id":315},"316":{"loc":{"start":{"line":290,"column":8},"end":{"line":290,"column":43}},"id":316},"317":{"loc":{"start":{"line":290,"column":15},"end":{"line":290,"column":42}},"id":317},"318":{"loc":{"start":{"line":294,"column":0},"end":{"line":294,"column":19}},"id":318},"319":{"loc":{"start":{"line":296,"column":4},"end":{"line":311,"column":7}},"id":319},"320":{"loc":{"start":{"line":296,"column":11},"end":{"line":311,"column":6}},"id":320},"321":{"loc":{"start":{"line":296,"column":18},"end":{"line":296,"column":35}},"id":321},"322":{"loc":{"start":{"line":297,"column":8},"end":{"line":297,"column":22}},"id":322},"323":{"loc":{"start":{"line":298,"column":8},"end":{"line":310,"column":11}},"id":323},"324":{"loc":{"start":{"line":298,"column":15},"end":{"line":310,"column":10}},"id":324},"325":{"loc":{"start":{"line":298,"column":20},"end":{"line":308,"column":11}},"id":325},"326":{"loc":{"start":{"line":298,"column":21},"end":{"line":308,"column":10}},"id":326},"327":{"loc":{"start":{"line":299,"column":12},"end":{"line":299,"column":45}},"id":327},"328":{"loc":{"start":{"line":299,"column":25},"end":{"line":299,"column":44}},"id":328},"329":{"loc":{"start":{"line":300,"column":12},"end":{"line":300,"column":66}},"id":329},"330":{"loc":{"start":{"line":300,"column":27},"end":{"line":300,"column":65}},"id":330},"331":{"loc":{"start":{"line":301,"column":12},"end":{"line":307,"column":15}},"id":331},"332":{"loc":{"start":{"line":301,"column":19},"end":{"line":307,"column":14}},"id":332},"333":{"loc":{"start":{"line":301,"column":26},"end":{"line":301,"column":41}},"id":333},"334":{"loc":{"start":{"line":302,"column":20},"end":{"line":302,"column":33}},"id":334},"335":{"loc":{"start":{"line":303,"column":20},"end":{"line":305,"column":23}},"id":335},"336":{"loc":{"start":{"line":303,"column":27},"end":{"line":305,"column":22}},"id":336},"337":{"loc":{"start":{"line":303,"column":34},"end":{"line":303,"column":53}},"id":337},"338":{"loc":{"start":{"line":304,"column":24},"end":{"line":304,"column":49}},"id":338},"339":{"loc":{"start":{"line":309,"column":12},"end":{"line":309,"column":32}},"id":339},"340":{"loc":{"start":{"line":309,"column":19},"end":{"line":309,"column":31}},"id":340},"341":{"loc":{"start":{"line":316,"column":8},"end":{"line":316,"column":48}},"id":341},"342":{"loc":{"start":{"line":317,"column":4},"end":{"line":317,"column":18}},"id":342},"343":{"loc":{"start":{"line":318,"column":4},"end":{"line":318,"column":49}},"id":343},"344":{"loc":{"start":{"line":319,"column":4},"end":{"line":319,"column":37}},"id":344},"345":{"loc":{"start":{"line":319,"column":17},"end":{"line":319,"column":36}},"id":345},"346":{"loc":{"start":{"line":320,"column":4},"end":{"line":320,"column":23}},"id":346},"347":{"loc":{"start":{"line":323,"column":0},"end":{"line":331,"column":2}},"id":347},"348":{"loc":{"start":{"line":324,"column":4},"end":{"line":324,"column":37}},"id":348},"349":{"loc":{"start":{"line":324,"column":16},"end":{"line":324,"column":36}},"id":349},"350":{"loc":{"start":{"line":325,"column":8},"end":{"line":325,"column":33}},"id":350},"351":{"loc":{"start":{"line":326,"column":8},"end":{"line":326,"column":22}},"id":351},"352":{"loc":{"start":{"line":326,"column":8},"end":{"line":326,"column":21}},"id":352},"353":{"loc":{"start":{"line":327,"column":8},"end":{"line":327,"column":69}},"id":353},"354":{"loc":{"start":{"line":327,"column":15},"end":{"line":327,"column":68}},"id":354},"355":{"loc":{"start":{"line":329,"column":8},"end":{"line":329,"column":66}},"id":355},"356":{"loc":{"start":{"line":329,"column":15},"end":{"line":329,"column":65}},"id":356},"357":{"loc":{"start":{"line":329,"column":44},"end":{"line":329,"column":64}},"id":357},"358":{"loc":{"start":{"line":333,"column":0},"end":{"line":344,"column":2}},"id":358},"359":{"loc":{"start":{"line":334,"column":8},"end":{"line":334,"column":26}},"id":359},"360":{"loc":{"start":{"line":335,"column":8},"end":{"line":335,"column":20}},"id":360},"361":{"loc":{"start":{"line":337,"column":8},"end":{"line":337,"column":33}},"id":361},"362":{"loc":{"start":{"line":337,"column":19},"end":{"line":337,"column":32}},"id":362},"363":{"loc":{"start":{"line":338,"column":12},"end":{"line":338,"column":23}},"id":363},"364":{"loc":{"start":{"line":339,"column":12},"end":{"line":339,"column":74}},"id":364},"365":{"loc":{"start":{"line":339,"column":19},"end":{"line":339,"column":73}},"id":365},"366":{"loc":{"start":{"line":339,"column":48},"end":{"line":339,"column":72}},"id":366},"367":{"loc":{"start":{"line":341,"column":12},"end":{"line":341,"column":138}},"id":367},"368":{"loc":{"start":{"line":341,"column":28},"end":{"line":341,"column":136}},"id":368},"369":{"loc":{"start":{"line":341,"column":28},"end":{"line":341,"column":114}},"id":369},"370":{"loc":{"start":{"line":341,"column":28},"end":{"line":341,"column":104}},"id":370},"371":{"loc":{"start":{"line":341,"column":44},"end":{"line":341,"column":104}},"id":371},"372":{"loc":{"start":{"line":341,"column":59},"end":{"line":341,"column":103}},"id":372},"373":{"loc":{"start":{"line":341,"column":82},"end":{"line":341,"column":102}},"id":373},"374":{"loc":{"start":{"line":341,"column":117},"end":{"line":341,"column":136}},"id":374},"375":{"loc":{"start":{"line":346,"column":0},"end":{"line":354,"column":2}},"id":375},"376":{"loc":{"start":{"line":347,"column":9},"end":{"line":347,"column":34}},"id":376},"377":{"loc":{"start":{"line":348,"column":8},"end":{"line":348,"column":73}},"id":377},"378":{"loc":{"start":{"line":348,"column":24},"end":{"line":348,"column":71}},"id":378},"379":{"loc":{"start":{"line":350,"column":4},"end":{"line":350,"column":37}},"id":379},"380":{"loc":{"start":{"line":350,"column":16},"end":{"line":350,"column":36}},"id":380},"381":{"loc":{"start":{"line":351,"column":4},"end":{"line":351,"column":18}},"id":381},"382":{"loc":{"start":{"line":351,"column":4},"end":{"line":351,"column":17}},"id":382},"383":{"loc":{"start":{"line":352,"column":4},"end":{"line":352,"column":28}},"id":383},"384":{"loc":{"start":{"line":353,"column":4},"end":{"line":353,"column":60}},"id":384},"385":{"loc":{"start":{"line":353,"column":11},"end":{"line":353,"column":59}},"id":385},"386":{"loc":{"start":{"line":353,"column":17},"end":{"line":353,"column":59}},"id":386},"387":{"loc":{"start":{"line":356,"column":0},"end":{"line":361,"column":2}},"id":387},"388":{"loc":{"start":{"line":357,"column":8},"end":{"line":357,"column":26}},"id":388},"389":{"loc":{"start":{"line":358,"column":8},"end":{"line":358,"column":19}},"id":389},"390":{"loc":{"start":{"line":360,"column":4},"end":{"line":360,"column":52}},"id":390},"391":{"loc":{"start":{"line":360,"column":11},"end":{"line":360,"column":51}},"id":391},"392":{"loc":{"start":{"line":360,"column":30},"end":{"line":360,"column":50}},"id":392},"393":{"loc":{"start":{"line":363,"column":0},"end":{"line":365,"column":2}},"id":393},"394":{"loc":{"start":{"line":364,"column":4},"end":{"line":364,"column":16}},"id":394},"395":{"loc":{"start":{"line":367,"column":0},"end":{"line":369,"column":2}},"id":395},"396":{"loc":{"start":{"line":368,"column":4},"end":{"line":368,"column":32}},"id":396},"397":{"loc":{"start":{"line":371,"column":0},"end":{"line":379,"column":2}},"id":397},"398":{"loc":{"start":{"line":381,"column":0},"end":{"line":385,"column":3}},"id":398},"399":{"loc":{"start":{"line":381,"column":0},"end":{"line":385,"column":2}},"id":399},"400":{"loc":{"start":{"line":382,"column":4},"end":{"line":384,"column":6}},"id":400},"401":{"loc":{"start":{"line":383,"column":8},"end":{"line":383,"column":21}},"id":401},"402":{"loc":{"start":{"line":387,"column":0},"end":{"line":389,"column":2}},"id":402},"403":{"loc":{"start":{"line":388,"column":4},"end":{"line":388,"column":26}},"id":403},"404":{"loc":{"start":{"line":391,"column":0},"end":{"line":393,"column":2}},"id":404},"405":{"loc":{"start":{"line":392,"column":4},"end":{"line":392,"column":26}},"id":405},"406":{"loc":{"start":{"line":396,"column":4},"end":{"line":396,"column":24}},"id":406},"407":{"loc":{"start":{"line":396,"column":4},"end":{"line":396,"column":23}},"id":407},"408":{"loc":{"start":{"line":397,"column":4},"end":{"line":397,"column":22}},"id":408},"409":{"loc":{"start":{"line":400,"column":0},"end":{"line":400,"column":51}},"id":409},"410":{"loc":{"start":{"line":400,"column":21},"end":{"line":400,"column":50}},"id":410},"411":{"loc":{"start":{"line":402,"column":0},"end":{"line":404,"column":2}},"id":411},"412":{"loc":{"start":{"line":403,"column":4},"end":{"line":403,"column":16}},"id":412},"413":{"loc":{"start":{"line":407,"column":4},"end":{"line":407,"column":24}},"id":413},"414":{"loc":{"start":{"line":407,"column":4},"end":{"line":407,"column":23}},"id":414},"415":{"loc":{"start":{"line":408,"column":4},"end":{"line":408,"column":40}},"id":415},"416":{"loc":{"start":{"line":408,"column":20},"end":{"line":408,"column":39}},"id":416},"417":{"loc":{"start":{"line":409,"column":4},"end":{"line":409,"column":37}},"id":417},"418":{"loc":{"start":{"line":409,"column":17},"end":{"line":409,"column":36}},"id":418},"419":{"loc":{"start":{"line":412,"column":0},"end":{"line":412,"column":56}},"id":419},"420":{"loc":{"start":{"line":412,"column":26},"end":{"line":412,"column":55}},"id":420},"421":{"loc":{"start":{"line":414,"column":0},"end":{"line":416,"column":2}},"id":421},"422":{"loc":{"start":{"line":415,"column":4},"end":{"line":415,"column":16}},"id":422},"423":{"loc":{"start":{"line":418,"column":0},"end":{"line":435,"column":2}},"id":423},"424":{"loc":{"start":{"line":419,"column":4},"end":{"line":419,"column":31}},"id":424},"425":{"loc":{"start":{"line":419,"column":10},"end":{"line":419,"column":30}},"id":425},"426":{"loc":{"start":{"line":420,"column":8},"end":{"line":420,"column":26}},"id":426},"427":{"loc":{"start":{"line":421,"column":8},"end":{"line":421,"column":20}},"id":427},"428":{"loc":{"start":{"line":423,"column":4},"end":{"line":423,"column":29}},"id":428},"429":{"loc":{"start":{"line":423,"column":15},"end":{"line":423,"column":28}},"id":429},"430":{"loc":{"start":{"line":424,"column":8},"end":{"line":424,"column":19}},"id":430},"431":{"loc":{"start":{"line":425,"column":8},"end":{"line":425,"column":70}},"id":431},"432":{"loc":{"start":{"line":425,"column":15},"end":{"line":425,"column":69}},"id":432},"433":{"loc":{"start":{"line":425,"column":44},"end":{"line":425,"column":68}},"id":433},"434":{"loc":{"start":{"line":429,"column":12},"end":{"line":429,"column":62}},"id":434},"435":{"loc":{"start":{"line":431,"column":12},"end":{"line":431,"column":114}},"id":435},"436":{"loc":{"start":{"line":431,"column":28},"end":{"line":431,"column":112}},"id":436},"437":{"loc":{"start":{"line":431,"column":28},"end":{"line":431,"column":90}},"id":437},"438":{"loc":{"start":{"line":431,"column":28},"end":{"line":431,"column":80}},"id":438},"439":{"loc":{"start":{"line":431,"column":44},"end":{"line":431,"column":80}},"id":439},"440":{"loc":{"start":{"line":431,"column":59},"end":{"line":431,"column":79}},"id":440},"441":{"loc":{"start":{"line":431,"column":93},"end":{"line":431,"column":112}},"id":441},"442":{"loc":{"start":{"line":434,"column":4},"end":{"line":434,"column":81}},"id":442},"443":{"loc":{"start":{"line":434,"column":11},"end":{"line":434,"column":80}},"id":443},"444":{"loc":{"start":{"line":434,"column":55},"end":{"line":434,"column":79}},"id":444},"445":{"loc":{"start":{"line":437,"column":0},"end":{"line":455,"column":2}},"id":445},"446":{"loc":{"start":{"line":438,"column":8},"end":{"line":438,"column":26}},"id":446},"447":{"loc":{"start":{"line":439,"column":8},"end":{"line":439,"column":19}},"id":447},"448":{"loc":{"start":{"line":441,"column":4},"end":{"line":441,"column":29}},"id":448},"449":{"loc":{"start":{"line":441,"column":15},"end":{"line":441,"column":28}},"id":449},"450":{"loc":{"start":{"line":442,"column":8},"end":{"line":442,"column":19}},"id":450},"451":{"loc":{"start":{"line":443,"column":8},"end":{"line":443,"column":19}},"id":451},"452":{"loc":{"start":{"line":445,"column":8},"end":{"line":445,"column":29}},"id":452},"453":{"loc":{"start":{"line":446,"column":8},"end":{"line":446,"column":17}},"id":453},"454":{"loc":{"start":{"line":449,"column":8},"end":{"line":449,"column":62}},"id":454},"455":{"loc":{"start":{"line":449,"column":15},"end":{"line":449,"column":61}},"id":455},"456":{"loc":{"start":{"line":449,"column":40},"end":{"line":449,"column":60}},"id":456},"457":{"loc":{"start":{"line":451,"column":4},"end":{"line":454,"column":6}},"id":457},"458":{"loc":{"start":{"line":451,"column":11},"end":{"line":454,"column":5}},"id":458},"459":{"loc":{"start":{"line":453,"column":8},"end":{"line":453,"column":32}},"id":459},"460":{"loc":{"start":{"line":458,"column":4},"end":{"line":458,"column":24}},"id":460},"461":{"loc":{"start":{"line":458,"column":4},"end":{"line":458,"column":23}},"id":461},"462":{"loc":{"start":{"line":459,"column":4},"end":{"line":459,"column":22}},"id":462},"463":{"loc":{"start":{"line":462,"column":0},"end":{"line":462,"column":51}},"id":463},"464":{"loc":{"start":{"line":462,"column":21},"end":{"line":462,"column":50}},"id":464},"465":{"loc":{"start":{"line":464,"column":0},"end":{"line":466,"column":2}},"id":465},"466":{"loc":{"start":{"line":465,"column":4},"end":{"line":465,"column":16}},"id":466},"467":{"loc":{"start":{"line":468,"column":0},"end":{"line":476,"column":2}},"id":467},"468":{"loc":{"start":{"line":469,"column":4},"end":{"line":469,"column":25}},"id":468},"469":{"loc":{"start":{"line":469,"column":11},"end":{"line":469,"column":24}},"id":469},"470":{"loc":{"start":{"line":469,"column":19},"end":{"line":469,"column":24}},"id":470},"471":{"loc":{"start":{"line":470,"column":8},"end":{"line":470,"column":22}},"id":471},"472":{"loc":{"start":{"line":471,"column":8},"end":{"line":471,"column":86}},"id":472},"473":{"loc":{"start":{"line":471,"column":24},"end":{"line":471,"column":84}},"id":473},"474":{"loc":{"start":{"line":471,"column":65},"end":{"line":471,"column":84}},"id":474},"475":{"loc":{"start":{"line":473,"column":4},"end":{"line":473,"column":19}},"id":475},"476":{"loc":{"start":{"line":473,"column":4},"end":{"line":473,"column":18}},"id":476},"477":{"loc":{"start":{"line":474,"column":4},"end":{"line":474,"column":52}},"id":477},"478":{"loc":{"start":{"line":474,"column":15},"end":{"line":474,"column":51}},"id":478},"479":{"loc":{"start":{"line":475,"column":4},"end":{"line":475,"column":64}},"id":479},"480":{"loc":{"start":{"line":475,"column":11},"end":{"line":475,"column":63}},"id":480},"481":{"loc":{"start":{"line":475,"column":21},"end":{"line":475,"column":43}},"id":481},"482":{"loc":{"start":{"line":478,"column":0},"end":{"line":484,"column":2}},"id":482},"483":{"loc":{"start":{"line":479,"column":4},"end":{"line":483,"column":6}},"id":483},"484":{"loc":{"start":{"line":479,"column":11},"end":{"line":483,"column":5}},"id":484},"485":{"loc":{"start":{"line":480,"column":8},"end":{"line":482,"column":9}},"id":485},"486":{"loc":{"start":{"line":481,"column":12},"end":{"line":481,"column":67}},"id":486},"487":{"loc":{"start":{"line":481,"column":30},"end":{"line":481,"column":66}},"id":487},"488":{"loc":{"start":{"line":487,"column":0},"end":{"line":487,"column":25}},"id":488},"489":{"loc":{"start":{"line":487,"column":9},"end":{"line":487,"column":24}},"id":489}}}},"/Users/kris/q-io/buffer-stream.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":28},"8":{"index":8,"count":28},"10":{"index":10,"count":28},"11":{"index":11,"count":28},"12":{"index":12,"count":28},"13":{"index":13,"count":28},"14":{"index":14,"count":28},"15":{"index":15,"count":1},"16":{"index":16,"count":2},"17":{"index":17,"count":2},"18":{"index":18,"count":2},"19":{"index":19,"count":2},"20":{"index":20,"count":2},"21":{"index":21,"count":2},"22":{"index":22,"count":2},"23":{"index":23,"count":1},"24":{"index":24,"count":21},"25":{"index":25,"count":21},"26":{"index":26,"count":21},"27":{"index":27,"count":13},"28":{"index":28,"count":13},"29":{"index":29,"count":21},"30":{"index":30,"count":21},"31":{"index":31,"count":1},"32":{"index":32,"count":3},"33":{"index":33,"count":3},"34":{"index":34,"count":2},"37":{"index":37,"count":5},"38":{"index":38,"count":5},"39":{"index":39,"count":5},"40":{"index":40,"count":5},"41":{"index":41,"count":1},"42":{"index":42,"count":7},"43":{"index":43,"count":7},"44":{"index":44,"count":7},"45":{"index":45,"count":7},"46":{"index":46,"count":1}},"blocks":{"0":{"index":0,"count":28},"4":{"index":4,"count":2},"5":{"index":5,"count":2},"6":{"index":6,"count":21},"7":{"index":7,"count":13},"8":{"index":8,"count":5},"9":{"index":9,"count":3},"10":{"index":10,"count":2},"12":{"index":12,"count":7}},"hash":"cefdc526b6f9a887b2e346b5864ae9f6","instrumentor":{"blockCounter":14,"nodeCounter":51,"source":"var Q = require(\"q\");\nvar Reader = require(\"./reader\");\n\nmodule.exports = BufferStream;\nfunction BufferStream(chunks, charset) {\n    if (!(this instanceof BufferStream)) {\n        return new BufferStream(chunks, charset);\n    }\n    if (!chunks) {\n        chunks = [];\n    } else if (!Array.isArray(chunks)) {\n        chunks = [chunks];\n    }\n    this._charset = charset;\n    this._chunks = chunks;\n    this._close = Q.defer();\n    this.closed = this._close.promise;\n}\n\nBufferStream.prototype.forEach = function (write, thisp) {\n    var self = this;\n    var chunks = self._chunks;\n    return Q.fcall(function () {\n        chunks.splice(0, chunks.length).forEach(write, thisp);\n    });\n};\n\nBufferStream.prototype.read = function () {\n    var result;\n    result = Reader.join(this._chunks);\n    if (this._charset) {\n        result = result.toString(this._charset);\n    }\n    return Q.resolve(result);\n};\n\nBufferStream.prototype.write = function (chunk) {\n    if (this._charset) {\n        chunk = new Buffer(String(chunk), this._charset);\n    } else {\n        if (!(chunk instanceof Buffer)) {\n            throw new Error(\"Can't write strings to buffer stream without a charset: \" + chunk);\n        }\n    }\n    this._chunks.push(chunk);\n    return Q.resolve();\n};\n\nBufferStream.prototype.close = function () {\n    this._close.resolve();\n    return Q.resolve();\n};\n\nBufferStream.prototype.destroy = function () {\n    this._close.resolve();\n    return Q.resolve();\n};","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":21}},"id":0},"1":{"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":20}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":33}},"id":2},"3":{"loc":{"start":{"line":2,"column":13},"end":{"line":2,"column":32}},"id":3},"4":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":30}},"id":4},"5":{"loc":{"start":{"line":6,"column":9},"end":{"line":6,"column":39}},"id":5},"6":{"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":49}},"id":6},"7":{"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":20}},"id":7},"8":{"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":37}},"id":8},"9":{"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":26}},"id":9},"10":{"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":28}},"id":10},"11":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":26}},"id":11},"12":{"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":28}},"id":12},"13":{"loc":{"start":{"line":16,"column":18},"end":{"line":16,"column":27}},"id":13},"14":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":38}},"id":14},"15":{"loc":{"start":{"line":20,"column":0},"end":{"line":26,"column":2}},"id":15},"16":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":20}},"id":16},"17":{"loc":{"start":{"line":22,"column":4},"end":{"line":22,"column":30}},"id":17},"18":{"loc":{"start":{"line":23,"column":4},"end":{"line":25,"column":7}},"id":18},"19":{"loc":{"start":{"line":23,"column":11},"end":{"line":25,"column":6}},"id":19},"20":{"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":62}},"id":20},"21":{"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":61}},"id":21},"22":{"loc":{"start":{"line":24,"column":21},"end":{"line":24,"column":39}},"id":22},"23":{"loc":{"start":{"line":28,"column":0},"end":{"line":35,"column":2}},"id":23},"24":{"loc":{"start":{"line":29,"column":4},"end":{"line":29,"column":15}},"id":24},"25":{"loc":{"start":{"line":30,"column":4},"end":{"line":30,"column":39}},"id":25},"26":{"loc":{"start":{"line":30,"column":13},"end":{"line":30,"column":38}},"id":26},"27":{"loc":{"start":{"line":32,"column":8},"end":{"line":32,"column":48}},"id":27},"28":{"loc":{"start":{"line":32,"column":17},"end":{"line":32,"column":47}},"id":28},"29":{"loc":{"start":{"line":34,"column":4},"end":{"line":34,"column":29}},"id":29},"30":{"loc":{"start":{"line":34,"column":11},"end":{"line":34,"column":28}},"id":30},"31":{"loc":{"start":{"line":37,"column":0},"end":{"line":47,"column":2}},"id":31},"32":{"loc":{"start":{"line":39,"column":8},"end":{"line":39,"column":57}},"id":32},"33":{"loc":{"start":{"line":39,"column":27},"end":{"line":39,"column":40}},"id":33},"34":{"loc":{"start":{"line":41,"column":13},"end":{"line":41,"column":38}},"id":34},"35":{"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":96}},"id":35},"36":{"loc":{"start":{"line":42,"column":28},"end":{"line":42,"column":94}},"id":36},"37":{"loc":{"start":{"line":45,"column":4},"end":{"line":45,"column":29}},"id":37},"38":{"loc":{"start":{"line":45,"column":4},"end":{"line":45,"column":28}},"id":38},"39":{"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":23}},"id":39},"40":{"loc":{"start":{"line":46,"column":11},"end":{"line":46,"column":22}},"id":40},"41":{"loc":{"start":{"line":49,"column":0},"end":{"line":52,"column":2}},"id":41},"42":{"loc":{"start":{"line":50,"column":4},"end":{"line":50,"column":26}},"id":42},"43":{"loc":{"start":{"line":50,"column":4},"end":{"line":50,"column":25}},"id":43},"44":{"loc":{"start":{"line":51,"column":4},"end":{"line":51,"column":23}},"id":44},"45":{"loc":{"start":{"line":51,"column":11},"end":{"line":51,"column":22}},"id":45},"46":{"loc":{"start":{"line":54,"column":0},"end":{"line":57,"column":2}},"id":46},"47":{"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":26}},"id":47},"48":{"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":25}},"id":48},"49":{"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":23}},"id":49},"50":{"loc":{"start":{"line":56,"column":11},"end":{"line":56,"column":22}},"id":50}}}},"/Users/kris/q-io/spec/fs/mock/copy-tree-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1}},"hash":"0e588a54cf423c2810615b5de87d66e6","instrumentor":{"blockCounter":7,"nodeCounter":38,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\nvar Mock = require(\"../../../fs-mock\");\n\ndescribe(\"copyTree\", function () {\n    it(\"should copy a tree\", function () {\n\n        var mock = Mock({\n            \"a/b\": {\n                \"c\": {\n                    \"d\": 66,\n                    \"e\": 99\n                }\n            }\n        });\n\n        return Q.fcall(function () {\n            return mock.copyTree(\"a/b\", \"a/f\");\n        })\n        .then(function () {\n            return Q.all([\n                mock.isDirectory(\"a/f\"),\n                mock.exists(\"a/f/c\"),\n                mock.isFile(\"a/f/c/d\"),\n                mock.read(\"a/f/c/e\")\n            ])\n        })\n        .then(function (existence) {\n            expect(existence.every(Boolean)).toBe(true);\n        })\n\n        .then(function () {\n            return mock.listTree();\n        })\n        .then(function (list) {\n            expect(list).toEqual([\n                \".\",\n                \"a\",\n                \"a/b\",\n                \"a/b/c\",\n                \"a/b/c/d\",\n                \"a/b/c/e\",\n                \"a/f\",\n                \"a/f/c\",\n                \"a/f/c/d\",\n                \"a/f/c/e\"\n            ]);\n        })\n\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"id":7},"8":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":38}},"id":8},"9":{"loc":{"start":{"line":8,"column":0},"end":{"line":55,"column":3}},"id":9},"10":{"loc":{"start":{"line":8,"column":0},"end":{"line":55,"column":2}},"id":10},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":53,"column":7}},"id":11},"12":{"loc":{"start":{"line":9,"column":4},"end":{"line":53,"column":6}},"id":12},"13":{"loc":{"start":{"line":11,"column":8},"end":{"line":18,"column":11}},"id":13},"14":{"loc":{"start":{"line":11,"column":19},"end":{"line":18,"column":10}},"id":14},"15":{"loc":{"start":{"line":20,"column":8},"end":{"line":53,"column":4}},"id":15},"16":{"loc":{"start":{"line":20,"column":15},"end":{"line":51,"column":10}},"id":16},"17":{"loc":{"start":{"line":35,"column":13},"end":{"line":37,"column":10}},"id":17},"18":{"loc":{"start":{"line":31,"column":13},"end":{"line":33,"column":10}},"id":18},"19":{"loc":{"start":{"line":23,"column":13},"end":{"line":30,"column":10}},"id":19},"20":{"loc":{"start":{"line":20,"column":22},"end":{"line":22,"column":10}},"id":20},"21":{"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":47}},"id":21},"22":{"loc":{"start":{"line":21,"column":19},"end":{"line":21,"column":46}},"id":22},"23":{"loc":{"start":{"line":24,"column":12},"end":{"line":30,"column":8}},"id":23},"24":{"loc":{"start":{"line":24,"column":19},"end":{"line":29,"column":14}},"id":24},"25":{"loc":{"start":{"line":25,"column":16},"end":{"line":25,"column":39}},"id":25},"26":{"loc":{"start":{"line":26,"column":16},"end":{"line":26,"column":36}},"id":26},"27":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":38}},"id":27},"28":{"loc":{"start":{"line":28,"column":16},"end":{"line":28,"column":36}},"id":28},"29":{"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":56}},"id":29},"30":{"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":55}},"id":30},"31":{"loc":{"start":{"line":32,"column":18},"end":{"line":32,"column":44}},"id":31},"32":{"loc":{"start":{"line":32,"column":19},"end":{"line":32,"column":43}},"id":32},"33":{"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":35}},"id":33},"34":{"loc":{"start":{"line":36,"column":19},"end":{"line":36,"column":34}},"id":34},"35":{"loc":{"start":{"line":39,"column":12},"end":{"line":50,"column":15}},"id":35},"36":{"loc":{"start":{"line":39,"column":12},"end":{"line":50,"column":14}},"id":36},"37":{"loc":{"start":{"line":39,"column":18},"end":{"line":39,"column":24}},"id":37}}}},"/Users/kris/q-io/spec/fs/mock/link-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1}},"hash":"dfd1220232183ac922f40682eb85cdaa","instrumentor":{"blockCounter":14,"nodeCounter":53,"source":"require(\"../../lib/jasmine-promise\");\nvar MockFs = require(\"../../../fs-mock\");\n\ndescribe(\"link\", function () {\n    it(\"should\", function () {\n        var mock = MockFs();\n\n        // make some content\n        return mock.makeTree(\"a/b\")\n        .then(function () {\n            return mock.write(\"a/b/c.txt\", \"Hello, World!\")\n        })\n\n        // verify content\n        .then(function () {\n            return mock.read(\"a/b/c.txt\")\n        })\n        .then(function (content) {\n            expect(content).toBe(\"Hello, World!\");\n        })\n\n        // link it\n        .then(function () {\n            return mock.link(\"a/b/c.txt\", \"a/b/d.txt\")\n        })\n\n        // should be non-destructive\n        .then(function () {\n            return mock.read(\"a/b/c.txt\")\n        })\n        .then(function (content) {\n            expect(content).toBe(\"Hello, World!\");\n        })\n\n        // should be listed\n        .then(function () {\n            return mock.listTree()\n        })\n        .then(function (content) {\n            expect(content).toEqual([\n                \".\",\n                \"a\",\n                \"a/b\",\n                \"a/b/c.txt\",\n                \"a/b/d.txt\"\n            ])\n        })\n\n        // should be identified as a file\n        .then(function () {\n            return mock.isFile(\"a/b/d.txt\");\n        })\n        .then(function (isFile) {\n            expect(isFile).toBe(true);\n        })\n\n        // should have the same content\n        .then(function () {\n            return mock.read(\"a/b/d.txt\");\n        })\n        .then(function (content) {\n            expect(content).toBe(\"Hello, World!\");\n        });\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":36}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":41}},"id":2},"3":{"loc":{"start":{"line":2,"column":13},"end":{"line":2,"column":40}},"id":3},"4":{"loc":{"start":{"line":4,"column":0},"end":{"line":66,"column":3}},"id":4},"5":{"loc":{"start":{"line":4,"column":0},"end":{"line":66,"column":2}},"id":5},"6":{"loc":{"start":{"line":5,"column":4},"end":{"line":65,"column":7}},"id":6},"7":{"loc":{"start":{"line":5,"column":4},"end":{"line":65,"column":6}},"id":7},"8":{"loc":{"start":{"line":6,"column":8},"end":{"line":6,"column":28}},"id":8},"9":{"loc":{"start":{"line":6,"column":19},"end":{"line":6,"column":27}},"id":9},"10":{"loc":{"start":{"line":9,"column":8},"end":{"line":63,"column":11}},"id":10},"11":{"loc":{"start":{"line":9,"column":15},"end":{"line":63,"column":10}},"id":11},"12":{"loc":{"start":{"line":58,"column":13},"end":{"line":60,"column":10}},"id":12},"13":{"loc":{"start":{"line":53,"column":13},"end":{"line":55,"column":10}},"id":13},"14":{"loc":{"start":{"line":50,"column":13},"end":{"line":52,"column":10}},"id":14},"15":{"loc":{"start":{"line":39,"column":13},"end":{"line":47,"column":10}},"id":15},"16":{"loc":{"start":{"line":36,"column":13},"end":{"line":38,"column":10}},"id":16},"17":{"loc":{"start":{"line":31,"column":13},"end":{"line":33,"column":10}},"id":17},"18":{"loc":{"start":{"line":28,"column":13},"end":{"line":30,"column":10}},"id":18},"19":{"loc":{"start":{"line":23,"column":13},"end":{"line":25,"column":10}},"id":19},"20":{"loc":{"start":{"line":18,"column":13},"end":{"line":20,"column":10}},"id":20},"21":{"loc":{"start":{"line":15,"column":13},"end":{"line":17,"column":10}},"id":21},"22":{"loc":{"start":{"line":10,"column":13},"end":{"line":12,"column":10}},"id":22},"23":{"loc":{"start":{"line":9,"column":28},"end":{"line":9,"column":35}},"id":23},"24":{"loc":{"start":{"line":11,"column":12},"end":{"line":12,"column":8}},"id":24},"25":{"loc":{"start":{"line":11,"column":19},"end":{"line":11,"column":59}},"id":25},"26":{"loc":{"start":{"line":16,"column":12},"end":{"line":17,"column":8}},"id":26},"27":{"loc":{"start":{"line":16,"column":19},"end":{"line":16,"column":41}},"id":27},"28":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":50}},"id":28},"29":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":49}},"id":29},"30":{"loc":{"start":{"line":19,"column":18},"end":{"line":19,"column":27}},"id":30},"31":{"loc":{"start":{"line":24,"column":12},"end":{"line":25,"column":8}},"id":31},"32":{"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":54}},"id":32},"33":{"loc":{"start":{"line":29,"column":12},"end":{"line":30,"column":8}},"id":33},"34":{"loc":{"start":{"line":29,"column":19},"end":{"line":29,"column":41}},"id":34},"35":{"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":50}},"id":35},"36":{"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":49}},"id":36},"37":{"loc":{"start":{"line":32,"column":18},"end":{"line":32,"column":27}},"id":37},"38":{"loc":{"start":{"line":37,"column":12},"end":{"line":38,"column":8}},"id":38},"39":{"loc":{"start":{"line":37,"column":19},"end":{"line":37,"column":34}},"id":39},"40":{"loc":{"start":{"line":40,"column":12},"end":{"line":47,"column":8}},"id":40},"41":{"loc":{"start":{"line":40,"column":12},"end":{"line":46,"column":14}},"id":41},"42":{"loc":{"start":{"line":40,"column":18},"end":{"line":40,"column":27}},"id":42},"43":{"loc":{"start":{"line":51,"column":12},"end":{"line":51,"column":44}},"id":43},"44":{"loc":{"start":{"line":51,"column":19},"end":{"line":51,"column":43}},"id":44},"45":{"loc":{"start":{"line":54,"column":12},"end":{"line":54,"column":38}},"id":45},"46":{"loc":{"start":{"line":54,"column":12},"end":{"line":54,"column":37}},"id":46},"47":{"loc":{"start":{"line":54,"column":18},"end":{"line":54,"column":26}},"id":47},"48":{"loc":{"start":{"line":59,"column":12},"end":{"line":59,"column":42}},"id":48},"49":{"loc":{"start":{"line":59,"column":19},"end":{"line":59,"column":41}},"id":49},"50":{"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":50}},"id":50},"51":{"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":49}},"id":51},"52":{"loc":{"start":{"line":62,"column":18},"end":{"line":62,"column":27}},"id":52}}}},"/Users/kris/q-io/spec/fs/mock/make-tree-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1}},"hash":"904f91a01af1fb9861e59c4837d93eea","instrumentor":{"blockCounter":9,"nodeCounter":40,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\nvar Mock = require(\"../../../fs-mock\");\n\ndescribe(\"makeTree\", function () {\n    it(\"should make a branch of a tree\", function () {\n\n        var mock = Mock({\n            \"a\": {}\n        });\n\n        return Q.fcall(function () {\n            return mock.makeTree(\"a/b/c\");\n        })\n\n        .then(function () {\n            return mock.listTree();\n        })\n        .then(function (list) {\n            expect(list).toEqual([\n                \".\",\n                \"a\",\n                \"a/b\",\n                \"a/b/c\"\n            ]);\n        })\n\n        .then(function () {\n            return mock.exists(\"a/b/c\")\n        })\n        .then(function (exists) {\n            expect(exists).toBe(true);\n        })\n\n        .then(function () {\n            return mock.isDirectory(\"a/b/c\")\n        })\n        .then(function (isDirectory) {\n            expect(isDirectory).toBe(true);\n        })\n\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"id":7},"8":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":38}},"id":8},"9":{"loc":{"start":{"line":8,"column":0},"end":{"line":47,"column":3}},"id":9},"10":{"loc":{"start":{"line":8,"column":0},"end":{"line":47,"column":2}},"id":10},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":45,"column":7}},"id":11},"12":{"loc":{"start":{"line":9,"column":4},"end":{"line":45,"column":6}},"id":12},"13":{"loc":{"start":{"line":11,"column":8},"end":{"line":13,"column":11}},"id":13},"14":{"loc":{"start":{"line":11,"column":19},"end":{"line":13,"column":10}},"id":14},"15":{"loc":{"start":{"line":15,"column":8},"end":{"line":45,"column":4}},"id":15},"16":{"loc":{"start":{"line":15,"column":15},"end":{"line":43,"column":10}},"id":16},"17":{"loc":{"start":{"line":38,"column":13},"end":{"line":40,"column":10}},"id":17},"18":{"loc":{"start":{"line":34,"column":13},"end":{"line":36,"column":10}},"id":18},"19":{"loc":{"start":{"line":31,"column":13},"end":{"line":33,"column":10}},"id":19},"20":{"loc":{"start":{"line":22,"column":13},"end":{"line":29,"column":10}},"id":20},"21":{"loc":{"start":{"line":19,"column":13},"end":{"line":21,"column":10}},"id":21},"22":{"loc":{"start":{"line":15,"column":22},"end":{"line":17,"column":10}},"id":22},"23":{"loc":{"start":{"line":16,"column":12},"end":{"line":16,"column":42}},"id":23},"24":{"loc":{"start":{"line":16,"column":19},"end":{"line":16,"column":41}},"id":24},"25":{"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":35}},"id":25},"26":{"loc":{"start":{"line":20,"column":19},"end":{"line":20,"column":34}},"id":26},"27":{"loc":{"start":{"line":23,"column":12},"end":{"line":28,"column":15}},"id":27},"28":{"loc":{"start":{"line":23,"column":12},"end":{"line":28,"column":14}},"id":28},"29":{"loc":{"start":{"line":23,"column":18},"end":{"line":23,"column":24}},"id":29},"30":{"loc":{"start":{"line":32,"column":12},"end":{"line":33,"column":8}},"id":30},"31":{"loc":{"start":{"line":32,"column":19},"end":{"line":32,"column":39}},"id":31},"32":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":38}},"id":32},"33":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":37}},"id":33},"34":{"loc":{"start":{"line":35,"column":18},"end":{"line":35,"column":26}},"id":34},"35":{"loc":{"start":{"line":39,"column":12},"end":{"line":40,"column":8}},"id":35},"36":{"loc":{"start":{"line":39,"column":19},"end":{"line":39,"column":44}},"id":36},"37":{"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":43}},"id":37},"38":{"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":42}},"id":38},"39":{"loc":{"start":{"line":42,"column":18},"end":{"line":42,"column":31}},"id":39}}}},"/Users/kris/q-io/spec/fs/mock/merge-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1}},"hash":"782861548d3ca57be49212fe5b2cb199","instrumentor":{"blockCounter":9,"nodeCounter":43,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\nvar Mock = require(\"../../../fs-mock\");\n\ndescribe(\"makeTree\", function () {\n    it(\"should make a branch of a tree\", function () {\n\n        var merged = FS.merge([\n            Mock({\n                \"a\": 10,\n                \"b\": 20,\n                \"1/2/3\": \"123\"\n            }),\n            Mock({\n                \"a\": 20,\n                \"c\": 30\n            }),\n            Mock({\n                \"a\": 30,\n                \"d\": 40\n            }),\n        ])\n\n        return merged.then(function (merged) {\n\n            return Q.fcall(function () {\n                return merged.listTree();\n            })\n            .then(function (list) {\n                expect(list.sort()).toEqual([\n                    \".\",\n                    \"1\",\n                    \"1/2\",\n                    \"1/2/3\",\n                    \"a\",\n                    \"b\",\n                    \"c\",\n                    \"d\",\n                ]);\n            })\n\n            // overridden by a previous tree\n            .then(function () {\n                return merged.read(\"a\");\n            })\n            .then(function (a) {\n                expect(a).toBe(\"30\");\n            })\n\n            // not overridden\n            .then(function () {\n                return merged.read(\"b\");\n            })\n            .then(function (a) {\n                expect(a).toBe(\"20\");\n            })\n\n        })\n\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"id":7},"8":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":38}},"id":8},"9":{"loc":{"start":{"line":8,"column":0},"end":{"line":65,"column":3}},"id":9},"10":{"loc":{"start":{"line":8,"column":0},"end":{"line":65,"column":2}},"id":10},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":63,"column":7}},"id":11},"12":{"loc":{"start":{"line":9,"column":4},"end":{"line":63,"column":6}},"id":12},"13":{"loc":{"start":{"line":11,"column":8},"end":{"line":27,"column":8}},"id":13},"14":{"loc":{"start":{"line":11,"column":21},"end":{"line":25,"column":10}},"id":14},"15":{"loc":{"start":{"line":12,"column":12},"end":{"line":16,"column":14}},"id":15},"16":{"loc":{"start":{"line":17,"column":12},"end":{"line":20,"column":14}},"id":16},"17":{"loc":{"start":{"line":21,"column":12},"end":{"line":24,"column":14}},"id":17},"18":{"loc":{"start":{"line":27,"column":8},"end":{"line":63,"column":4}},"id":18},"19":{"loc":{"start":{"line":27,"column":15},"end":{"line":61,"column":10}},"id":19},"20":{"loc":{"start":{"line":29,"column":12},"end":{"line":61,"column":8}},"id":20},"21":{"loc":{"start":{"line":29,"column":19},"end":{"line":59,"column":14}},"id":21},"22":{"loc":{"start":{"line":54,"column":17},"end":{"line":56,"column":14}},"id":22},"23":{"loc":{"start":{"line":49,"column":17},"end":{"line":51,"column":14}},"id":23},"24":{"loc":{"start":{"line":46,"column":17},"end":{"line":48,"column":14}},"id":24},"25":{"loc":{"start":{"line":32,"column":17},"end":{"line":43,"column":14}},"id":25},"26":{"loc":{"start":{"line":29,"column":26},"end":{"line":31,"column":14}},"id":26},"27":{"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":41}},"id":27},"28":{"loc":{"start":{"line":30,"column":23},"end":{"line":30,"column":40}},"id":28},"29":{"loc":{"start":{"line":33,"column":16},"end":{"line":42,"column":19}},"id":29},"30":{"loc":{"start":{"line":33,"column":16},"end":{"line":42,"column":18}},"id":30},"31":{"loc":{"start":{"line":33,"column":22},"end":{"line":33,"column":35}},"id":31},"32":{"loc":{"start":{"line":33,"column":23},"end":{"line":33,"column":34}},"id":32},"33":{"loc":{"start":{"line":47,"column":16},"end":{"line":47,"column":40}},"id":33},"34":{"loc":{"start":{"line":47,"column":23},"end":{"line":47,"column":39}},"id":34},"35":{"loc":{"start":{"line":50,"column":16},"end":{"line":50,"column":37}},"id":35},"36":{"loc":{"start":{"line":50,"column":16},"end":{"line":50,"column":36}},"id":36},"37":{"loc":{"start":{"line":50,"column":22},"end":{"line":50,"column":25}},"id":37},"38":{"loc":{"start":{"line":55,"column":16},"end":{"line":55,"column":40}},"id":38},"39":{"loc":{"start":{"line":55,"column":23},"end":{"line":55,"column":39}},"id":39},"40":{"loc":{"start":{"line":58,"column":16},"end":{"line":58,"column":37}},"id":40},"41":{"loc":{"start":{"line":58,"column":16},"end":{"line":58,"column":36}},"id":41},"42":{"loc":{"start":{"line":58,"column":22},"end":{"line":58,"column":25}},"id":42}}}},"/Users/kris/q-io/spec/fs/mock/move-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1}},"hash":"b0e2282ee10099a4dc389b8db946ad5b","instrumentor":{"blockCounter":12,"nodeCounter":47,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\n\ndescribe(\"move\", function () {\n    it(\"should move\", function () {\n\n        return FS.mock(FS, FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n\n            // initial list\n            return Q.fcall(function () {\n                return mock.listTree()\n            })\n            .then(function (list) {\n                expect(list).toEqual([\n                    \".\",\n                    \"hello.txt\"\n                ]);\n            })\n\n            // initial content\n            .then(function () {\n                return mock.read(\"hello.txt\");\n            })\n            .then(function (content) {\n                expect(content).toBe(\"Hello, World!\\n\");\n            })\n\n            // move!\n            .then(function () {\n                return mock.move(\"hello.txt\", \"new-hello.txt\");\n            })\n\n            // list after\n            .then(function () {\n                return mock.listTree();\n            })\n            .then(function (list) {\n                expect(list).toEqual([\n                    \".\",\n                    \"new-hello.txt\"\n                ]);\n            })\n\n            // content after\n            .then(function () {\n                return mock.read(\"new-hello.txt\");\n            })\n            .then(function (content) {\n                expect(content).toBe(\"Hello, World!\\n\");\n            })\n\n        });\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":7,"column":0},"end":{"line":58,"column":3}},"id":7},"8":{"loc":{"start":{"line":7,"column":0},"end":{"line":58,"column":2}},"id":8},"9":{"loc":{"start":{"line":8,"column":4},"end":{"line":57,"column":7}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":57,"column":6}},"id":10},"11":{"loc":{"start":{"line":10,"column":8},"end":{"line":56,"column":11}},"id":11},"12":{"loc":{"start":{"line":10,"column":15},"end":{"line":56,"column":10}},"id":12},"13":{"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":57}},"id":13},"14":{"loc":{"start":{"line":10,"column":27},"end":{"line":10,"column":56}},"id":14},"15":{"loc":{"start":{"line":14,"column":12},"end":{"line":56,"column":8}},"id":15},"16":{"loc":{"start":{"line":14,"column":19},"end":{"line":54,"column":14}},"id":16},"17":{"loc":{"start":{"line":49,"column":17},"end":{"line":51,"column":14}},"id":17},"18":{"loc":{"start":{"line":41,"column":17},"end":{"line":46,"column":14}},"id":18},"19":{"loc":{"start":{"line":38,"column":17},"end":{"line":40,"column":14}},"id":19},"20":{"loc":{"start":{"line":33,"column":17},"end":{"line":35,"column":14}},"id":20},"21":{"loc":{"start":{"line":28,"column":17},"end":{"line":30,"column":14}},"id":21},"22":{"loc":{"start":{"line":25,"column":17},"end":{"line":27,"column":14}},"id":22},"23":{"loc":{"start":{"line":17,"column":17},"end":{"line":22,"column":14}},"id":23},"24":{"loc":{"start":{"line":14,"column":26},"end":{"line":16,"column":14}},"id":24},"25":{"loc":{"start":{"line":15,"column":16},"end":{"line":16,"column":12}},"id":25},"26":{"loc":{"start":{"line":15,"column":23},"end":{"line":15,"column":38}},"id":26},"27":{"loc":{"start":{"line":18,"column":16},"end":{"line":21,"column":19}},"id":27},"28":{"loc":{"start":{"line":18,"column":16},"end":{"line":21,"column":18}},"id":28},"29":{"loc":{"start":{"line":18,"column":22},"end":{"line":18,"column":28}},"id":29},"30":{"loc":{"start":{"line":26,"column":16},"end":{"line":26,"column":46}},"id":30},"31":{"loc":{"start":{"line":26,"column":23},"end":{"line":26,"column":45}},"id":31},"32":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":56}},"id":32},"33":{"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":55}},"id":33},"34":{"loc":{"start":{"line":29,"column":22},"end":{"line":29,"column":31}},"id":34},"35":{"loc":{"start":{"line":34,"column":16},"end":{"line":34,"column":63}},"id":35},"36":{"loc":{"start":{"line":34,"column":23},"end":{"line":34,"column":62}},"id":36},"37":{"loc":{"start":{"line":39,"column":16},"end":{"line":39,"column":39}},"id":37},"38":{"loc":{"start":{"line":39,"column":23},"end":{"line":39,"column":38}},"id":38},"39":{"loc":{"start":{"line":42,"column":16},"end":{"line":45,"column":19}},"id":39},"40":{"loc":{"start":{"line":42,"column":16},"end":{"line":45,"column":18}},"id":40},"41":{"loc":{"start":{"line":42,"column":22},"end":{"line":42,"column":28}},"id":41},"42":{"loc":{"start":{"line":50,"column":16},"end":{"line":50,"column":50}},"id":42},"43":{"loc":{"start":{"line":50,"column":23},"end":{"line":50,"column":49}},"id":43},"44":{"loc":{"start":{"line":53,"column":16},"end":{"line":53,"column":56}},"id":44},"45":{"loc":{"start":{"line":53,"column":16},"end":{"line":53,"column":55}},"id":45},"46":{"loc":{"start":{"line":53,"column":22},"end":{"line":53,"column":31}},"id":46}}}},"/Users/kris/q-io/spec/fs/mock/object-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1}},"hash":"b4f26a5632290c77b8e98b1c675da5cb","instrumentor":{"blockCounter":3,"nodeCounter":24,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\n\ndescribe(\"toObject\", function () {\n    it(\"should take a snapshot of a tree\", function () {\n\n        return FS.mock(FS, FS.join(__dirname, \"fixture\"))\n        .invoke(\"toObject\")\n        .then(function (tree) {\n\n            expect(tree[\"hello.txt\"].toString(\"utf-8\")).toEqual(\"Hello, World!\\n\");\n            expect(Object.keys(tree)).toEqual([\"hello.txt\"]);\n\n        });\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":7,"column":0},"end":{"line":19,"column":3}},"id":7},"8":{"loc":{"start":{"line":7,"column":0},"end":{"line":19,"column":2}},"id":8},"9":{"loc":{"start":{"line":8,"column":4},"end":{"line":18,"column":7}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":18,"column":6}},"id":10},"11":{"loc":{"start":{"line":10,"column":8},"end":{"line":17,"column":11}},"id":11},"12":{"loc":{"start":{"line":10,"column":15},"end":{"line":17,"column":10}},"id":12},"13":{"loc":{"start":{"line":11,"column":15},"end":{"line":11,"column":27}},"id":13},"14":{"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":57}},"id":14},"15":{"loc":{"start":{"line":10,"column":27},"end":{"line":10,"column":56}},"id":15},"16":{"loc":{"start":{"line":14,"column":12},"end":{"line":14,"column":83}},"id":16},"17":{"loc":{"start":{"line":14,"column":12},"end":{"line":14,"column":82}},"id":17},"18":{"loc":{"start":{"line":14,"column":18},"end":{"line":14,"column":55}},"id":18},"19":{"loc":{"start":{"line":14,"column":19},"end":{"line":14,"column":54}},"id":19},"20":{"loc":{"start":{"line":15,"column":12},"end":{"line":15,"column":61}},"id":20},"21":{"loc":{"start":{"line":15,"column":12},"end":{"line":15,"column":60}},"id":21},"22":{"loc":{"start":{"line":15,"column":18},"end":{"line":15,"column":37}},"id":22},"23":{"loc":{"start":{"line":15,"column":19},"end":{"line":15,"column":36}},"id":23}}}},"/Users/kris/q-io/spec/fs/mock/range-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1}},"hash":"095c9f7e72bb3b8bd19682fdb4eb7034","instrumentor":{"blockCounter":4,"nodeCounter":23,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\nvar Mock = require(\"../../../fs-mock\");\n\ndescribe(\"open range\", function () {\n    it(\"read a partial range of a file\", function () {\n\n        return FS.mock(FS, FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n\n            return mock.read(\"hello.txt\", {\n                begin: 1,\n                end: 3\n            })\n            .then(function (content) {\n                expect(content).toBe(\"el\");\n            })\n\n        });\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"id":7},"8":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":38}},"id":8},"9":{"loc":{"start":{"line":8,"column":0},"end":{"line":25,"column":3}},"id":9},"10":{"loc":{"start":{"line":8,"column":0},"end":{"line":25,"column":2}},"id":10},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":24,"column":7}},"id":11},"12":{"loc":{"start":{"line":9,"column":4},"end":{"line":24,"column":6}},"id":12},"13":{"loc":{"start":{"line":11,"column":8},"end":{"line":22,"column":11}},"id":13},"14":{"loc":{"start":{"line":11,"column":15},"end":{"line":22,"column":10}},"id":14},"15":{"loc":{"start":{"line":11,"column":22},"end":{"line":11,"column":57}},"id":15},"16":{"loc":{"start":{"line":11,"column":27},"end":{"line":11,"column":56}},"id":16},"17":{"loc":{"start":{"line":14,"column":12},"end":{"line":22,"column":8}},"id":17},"18":{"loc":{"start":{"line":14,"column":19},"end":{"line":20,"column":14}},"id":18},"19":{"loc":{"start":{"line":14,"column":28},"end":{"line":17,"column":14}},"id":19},"20":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":43}},"id":20},"21":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":42}},"id":21},"22":{"loc":{"start":{"line":19,"column":22},"end":{"line":19,"column":31}},"id":22}}}},"/Users/kris/q-io/spec/fs/mock/read-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1}},"hash":"f89672e5547beb6bb903f701153d4118","instrumentor":{"blockCounter":5,"nodeCounter":23,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\n\ndescribe(\"read\", function () {\n    it(\"should read a file from a mock filesystem\", function () {\n\n        return FS.mock(FS, FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n\n            return Q.fcall(function () {\n                return mock.read(\"hello.txt\");\n            })\n            .then(function (content) {\n                expect(content).toBe(\"Hello, World!\\n\");\n            })\n\n        });\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":7,"column":0},"end":{"line":22,"column":3}},"id":7},"8":{"loc":{"start":{"line":7,"column":0},"end":{"line":22,"column":2}},"id":8},"9":{"loc":{"start":{"line":8,"column":4},"end":{"line":21,"column":7}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":21,"column":6}},"id":10},"11":{"loc":{"start":{"line":10,"column":8},"end":{"line":20,"column":11}},"id":11},"12":{"loc":{"start":{"line":10,"column":15},"end":{"line":20,"column":10}},"id":12},"13":{"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":57}},"id":13},"14":{"loc":{"start":{"line":10,"column":27},"end":{"line":10,"column":56}},"id":14},"15":{"loc":{"start":{"line":13,"column":12},"end":{"line":20,"column":8}},"id":15},"16":{"loc":{"start":{"line":13,"column":19},"end":{"line":18,"column":14}},"id":16},"17":{"loc":{"start":{"line":13,"column":26},"end":{"line":15,"column":14}},"id":17},"18":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":46}},"id":18},"19":{"loc":{"start":{"line":14,"column":23},"end":{"line":14,"column":45}},"id":19},"20":{"loc":{"start":{"line":17,"column":16},"end":{"line":17,"column":56}},"id":20},"21":{"loc":{"start":{"line":17,"column":16},"end":{"line":17,"column":55}},"id":21},"22":{"loc":{"start":{"line":17,"column":22},"end":{"line":17,"column":31}},"id":22}}}},"/Users/kris/q-io/spec/fs/mock/remove-directory-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1}},"hash":"ccba9a6a0b193fbea992de4d916509d7","instrumentor":{"blockCounter":8,"nodeCounter":33,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\n\ndescribe(\"removeDirectory\", function () {\n    it(\"should remove a directory\", function () {\n\n        return FS.mock(FS, FS.join(__dirname))\n        .then(function (mock) {\n\n            // now you see it\n            return Q.fcall(function () {\n                return mock.isDirectory(\"fixture\");\n            })\n            .then(function (isDirectory) {\n                expect(isDirectory).toBe(true);\n            })\n\n            .then(function () {\n                return mock.removeDirectory(\"fixture\");\n            })\n\n            // now you don't\n            .then(function () {\n                return mock.isDirectory(\"fixture\");\n            })\n            .then(function (isDirectory) {\n                expect(isDirectory).toBe(false);\n            })\n\n        });\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":7,"column":0},"end":{"line":36,"column":3}},"id":7},"8":{"loc":{"start":{"line":7,"column":0},"end":{"line":36,"column":2}},"id":8},"9":{"loc":{"start":{"line":8,"column":4},"end":{"line":35,"column":7}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":35,"column":6}},"id":10},"11":{"loc":{"start":{"line":10,"column":8},"end":{"line":33,"column":11}},"id":11},"12":{"loc":{"start":{"line":10,"column":15},"end":{"line":33,"column":10}},"id":12},"13":{"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":46}},"id":13},"14":{"loc":{"start":{"line":10,"column":27},"end":{"line":10,"column":45}},"id":14},"15":{"loc":{"start":{"line":14,"column":12},"end":{"line":33,"column":8}},"id":15},"16":{"loc":{"start":{"line":14,"column":19},"end":{"line":31,"column":14}},"id":16},"17":{"loc":{"start":{"line":26,"column":17},"end":{"line":28,"column":14}},"id":17},"18":{"loc":{"start":{"line":21,"column":17},"end":{"line":23,"column":14}},"id":18},"19":{"loc":{"start":{"line":17,"column":17},"end":{"line":19,"column":14}},"id":19},"20":{"loc":{"start":{"line":14,"column":26},"end":{"line":16,"column":14}},"id":20},"21":{"loc":{"start":{"line":15,"column":16},"end":{"line":15,"column":51}},"id":21},"22":{"loc":{"start":{"line":15,"column":23},"end":{"line":15,"column":50}},"id":22},"23":{"loc":{"start":{"line":18,"column":16},"end":{"line":18,"column":47}},"id":23},"24":{"loc":{"start":{"line":18,"column":16},"end":{"line":18,"column":46}},"id":24},"25":{"loc":{"start":{"line":18,"column":22},"end":{"line":18,"column":35}},"id":25},"26":{"loc":{"start":{"line":22,"column":16},"end":{"line":22,"column":55}},"id":26},"27":{"loc":{"start":{"line":22,"column":23},"end":{"line":22,"column":54}},"id":27},"28":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":51}},"id":28},"29":{"loc":{"start":{"line":27,"column":23},"end":{"line":27,"column":50}},"id":29},"30":{"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":48}},"id":30},"31":{"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":47}},"id":31},"32":{"loc":{"start":{"line":30,"column":22},"end":{"line":30,"column":35}},"id":32}}}},"/Users/kris/q-io/spec/fs/mock/remove-tree-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1}},"hash":"5db2d1d8f1b0ef75e6a108c43085b01f","instrumentor":{"blockCounter":5,"nodeCounter":26,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\nvar Mock = require(\"../../../fs-mock\");\n\ndescribe(\"removeTree\", function () {\n    it(\"should remove a tree\", function () {\n\n        var mock = Mock({\n            \"a/b\": {\n                \"c\": {\n                    \"d\": 66,\n                    \"e\": 99\n                }\n            }\n        });\n\n        return Q.fcall(function () {\n            return mock.removeTree(\"a/b/c\");\n        })\n\n        .then(function () {\n            return mock.listTree();\n        })\n        .then(function (list) {\n            expect(list).toEqual([\n                \".\",\n                \"a\",\n                \"a/b\"\n            ]);\n        })\n\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"id":7},"8":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":38}},"id":8},"9":{"loc":{"start":{"line":8,"column":0},"end":{"line":37,"column":3}},"id":9},"10":{"loc":{"start":{"line":8,"column":0},"end":{"line":37,"column":2}},"id":10},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":35,"column":7}},"id":11},"12":{"loc":{"start":{"line":9,"column":4},"end":{"line":35,"column":6}},"id":12},"13":{"loc":{"start":{"line":11,"column":8},"end":{"line":18,"column":11}},"id":13},"14":{"loc":{"start":{"line":11,"column":19},"end":{"line":18,"column":10}},"id":14},"15":{"loc":{"start":{"line":20,"column":8},"end":{"line":35,"column":4}},"id":15},"16":{"loc":{"start":{"line":20,"column":15},"end":{"line":33,"column":10}},"id":16},"17":{"loc":{"start":{"line":24,"column":13},"end":{"line":26,"column":10}},"id":17},"18":{"loc":{"start":{"line":20,"column":22},"end":{"line":22,"column":10}},"id":18},"19":{"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":44}},"id":19},"20":{"loc":{"start":{"line":21,"column":19},"end":{"line":21,"column":43}},"id":20},"21":{"loc":{"start":{"line":25,"column":12},"end":{"line":25,"column":35}},"id":21},"22":{"loc":{"start":{"line":25,"column":19},"end":{"line":25,"column":34}},"id":22},"23":{"loc":{"start":{"line":28,"column":12},"end":{"line":32,"column":15}},"id":23},"24":{"loc":{"start":{"line":28,"column":12},"end":{"line":32,"column":14}},"id":24},"25":{"loc":{"start":{"line":28,"column":18},"end":{"line":28,"column":24}},"id":25}}}},"/Users/kris/q-io/spec/fs/mock/root-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1}},"hash":"eea3a69862bc928fb03397376a95f540","instrumentor":{"blockCounter":3,"nodeCounter":25,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\nvar Mock = require(\"../../../fs-mock\");\nvar Root = require(\"../../../fs-root\");\n\ndescribe(\"root\", function () {\n    it(\"should make a filesystem from a subtree of a mock filesystem\", function () {\n\n        var mock = Mock({\n            \"a/b/1\": 10,\n            \"a/b/2\": 20,\n            \"a/b/3\": 30\n        });\n\n        var chroot = Root(mock, \"a/b\");\n\n        return chroot.invoke(\"listTree\")\n        .then(function (list) {\n            expect(list).toEqual([\n                \".\",\n                \"1\",\n                \"2\",\n                \"3\"\n            ]);\n        });\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"id":7},"8":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":38}},"id":8},"9":{"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":39}},"id":9},"10":{"loc":{"start":{"line":7,"column":11},"end":{"line":7,"column":38}},"id":10},"11":{"loc":{"start":{"line":9,"column":0},"end":{"line":31,"column":3}},"id":11},"12":{"loc":{"start":{"line":9,"column":0},"end":{"line":31,"column":2}},"id":12},"13":{"loc":{"start":{"line":10,"column":4},"end":{"line":30,"column":7}},"id":13},"14":{"loc":{"start":{"line":10,"column":4},"end":{"line":30,"column":6}},"id":14},"15":{"loc":{"start":{"line":12,"column":8},"end":{"line":16,"column":11}},"id":15},"16":{"loc":{"start":{"line":12,"column":19},"end":{"line":16,"column":10}},"id":16},"17":{"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":39}},"id":17},"18":{"loc":{"start":{"line":18,"column":21},"end":{"line":18,"column":38}},"id":18},"19":{"loc":{"start":{"line":20,"column":8},"end":{"line":28,"column":11}},"id":19},"20":{"loc":{"start":{"line":20,"column":15},"end":{"line":28,"column":10}},"id":20},"21":{"loc":{"start":{"line":20,"column":28},"end":{"line":20,"column":40}},"id":21},"22":{"loc":{"start":{"line":22,"column":12},"end":{"line":27,"column":15}},"id":22},"23":{"loc":{"start":{"line":22,"column":12},"end":{"line":27,"column":14}},"id":23},"24":{"loc":{"start":{"line":22,"column":18},"end":{"line":22,"column":24}},"id":24}}}},"/Users/kris/q-io/spec/fs/mock/symbolic-link-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"65":{"index":65,"count":1},"66":{"index":66,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1}},"hash":"0b56e6334b132e31430724f80fb8aff4","instrumentor":{"blockCounter":18,"nodeCounter":67,"source":"require(\"../../lib/jasmine-promise\");\nvar MockFs = require(\"../../../fs-mock\");\n\ndescribe(\"symbolic link\", function () {\n    it(\"should\", function () {\n        var mock = MockFs();\n\n        // make some content\n        return mock.makeTree(\"a/b\")\n        .then(function () {\n            return mock.write(\"a/b/c.txt\", \"Hello, World!\")\n        })\n\n        // verify content\n        .then(function () {\n            return mock.read(\"a/b/c.txt\")\n        })\n        .then(function (content) {\n            expect(content).toBe(\"Hello, World!\");\n        })\n\n        // link it\n        .then(function () {\n            return mock.symbolicCopy(\"/a/b/c.txt\", \"a/b/d.txt\", \"file\")\n        })\n\n        // should have a link\n        .then(function () {\n            return mock.readLink(\"a/b/d.txt\")\n        })\n        .then(function (link) {\n            expect(link).toBe(\"c.txt\");\n        })\n\n        // should have a canonical path\n        .then(function () {\n            return mock.canonical(\"a/b/d.txt\")\n        })\n        .then(function (canonical) {\n            expect(canonical).toBe(\"/a/b/c.txt\");\n        })\n\n        // should be listed\n        .then(function () {\n            return mock.listTree()\n        })\n        .then(function (content) {\n            expect(content).toEqual([\n                \".\",\n                \"a\",\n                \"a/b\",\n                \"a/b/c.txt\",\n                \"a/b/d.txt\"\n            ])\n        })\n\n        // should be non-destructive\n        .then(function () {\n            return mock.read(\"a/b/c.txt\")\n        })\n        .then(function (content) {\n            expect(content).toBe(\"Hello, World!\");\n        })\n\n        // should be identified as a file\n        .then(function () {\n            return mock.isSymbolicLink(\"a/b/d.txt\");\n        })\n        .then(function (isSymbolicLink) {\n            expect(isSymbolicLink).toBe(true);\n        })\n\n        // should have the same content\n        .then(function () {\n            return mock.read(\"a/b/d.txt\");\n        })\n        .then(function (content) {\n            expect(content).toBe(\"Hello, World!\");\n        });\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":37}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":36}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":41}},"id":2},"3":{"loc":{"start":{"line":2,"column":13},"end":{"line":2,"column":40}},"id":3},"4":{"loc":{"start":{"line":4,"column":0},"end":{"line":82,"column":3}},"id":4},"5":{"loc":{"start":{"line":4,"column":0},"end":{"line":82,"column":2}},"id":5},"6":{"loc":{"start":{"line":5,"column":4},"end":{"line":81,"column":7}},"id":6},"7":{"loc":{"start":{"line":5,"column":4},"end":{"line":81,"column":6}},"id":7},"8":{"loc":{"start":{"line":6,"column":8},"end":{"line":6,"column":28}},"id":8},"9":{"loc":{"start":{"line":6,"column":19},"end":{"line":6,"column":27}},"id":9},"10":{"loc":{"start":{"line":9,"column":8},"end":{"line":79,"column":11}},"id":10},"11":{"loc":{"start":{"line":9,"column":15},"end":{"line":79,"column":10}},"id":11},"12":{"loc":{"start":{"line":74,"column":13},"end":{"line":76,"column":10}},"id":12},"13":{"loc":{"start":{"line":69,"column":13},"end":{"line":71,"column":10}},"id":13},"14":{"loc":{"start":{"line":66,"column":13},"end":{"line":68,"column":10}},"id":14},"15":{"loc":{"start":{"line":61,"column":13},"end":{"line":63,"column":10}},"id":15},"16":{"loc":{"start":{"line":58,"column":13},"end":{"line":60,"column":10}},"id":16},"17":{"loc":{"start":{"line":47,"column":13},"end":{"line":55,"column":10}},"id":17},"18":{"loc":{"start":{"line":44,"column":13},"end":{"line":46,"column":10}},"id":18},"19":{"loc":{"start":{"line":39,"column":13},"end":{"line":41,"column":10}},"id":19},"20":{"loc":{"start":{"line":36,"column":13},"end":{"line":38,"column":10}},"id":20},"21":{"loc":{"start":{"line":31,"column":13},"end":{"line":33,"column":10}},"id":21},"22":{"loc":{"start":{"line":28,"column":13},"end":{"line":30,"column":10}},"id":22},"23":{"loc":{"start":{"line":23,"column":13},"end":{"line":25,"column":10}},"id":23},"24":{"loc":{"start":{"line":18,"column":13},"end":{"line":20,"column":10}},"id":24},"25":{"loc":{"start":{"line":15,"column":13},"end":{"line":17,"column":10}},"id":25},"26":{"loc":{"start":{"line":10,"column":13},"end":{"line":12,"column":10}},"id":26},"27":{"loc":{"start":{"line":9,"column":28},"end":{"line":9,"column":35}},"id":27},"28":{"loc":{"start":{"line":11,"column":12},"end":{"line":12,"column":8}},"id":28},"29":{"loc":{"start":{"line":11,"column":19},"end":{"line":11,"column":59}},"id":29},"30":{"loc":{"start":{"line":16,"column":12},"end":{"line":17,"column":8}},"id":30},"31":{"loc":{"start":{"line":16,"column":19},"end":{"line":16,"column":41}},"id":31},"32":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":50}},"id":32},"33":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":49}},"id":33},"34":{"loc":{"start":{"line":19,"column":18},"end":{"line":19,"column":27}},"id":34},"35":{"loc":{"start":{"line":24,"column":12},"end":{"line":25,"column":8}},"id":35},"36":{"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":71}},"id":36},"37":{"loc":{"start":{"line":29,"column":12},"end":{"line":30,"column":8}},"id":37},"38":{"loc":{"start":{"line":29,"column":19},"end":{"line":29,"column":45}},"id":38},"39":{"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":39}},"id":39},"40":{"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":38}},"id":40},"41":{"loc":{"start":{"line":32,"column":18},"end":{"line":32,"column":24}},"id":41},"42":{"loc":{"start":{"line":37,"column":12},"end":{"line":38,"column":8}},"id":42},"43":{"loc":{"start":{"line":37,"column":19},"end":{"line":37,"column":46}},"id":43},"44":{"loc":{"start":{"line":40,"column":12},"end":{"line":40,"column":49}},"id":44},"45":{"loc":{"start":{"line":40,"column":12},"end":{"line":40,"column":48}},"id":45},"46":{"loc":{"start":{"line":40,"column":18},"end":{"line":40,"column":29}},"id":46},"47":{"loc":{"start":{"line":45,"column":12},"end":{"line":46,"column":8}},"id":47},"48":{"loc":{"start":{"line":45,"column":19},"end":{"line":45,"column":34}},"id":48},"49":{"loc":{"start":{"line":48,"column":12},"end":{"line":55,"column":8}},"id":49},"50":{"loc":{"start":{"line":48,"column":12},"end":{"line":54,"column":14}},"id":50},"51":{"loc":{"start":{"line":48,"column":18},"end":{"line":48,"column":27}},"id":51},"52":{"loc":{"start":{"line":59,"column":12},"end":{"line":60,"column":8}},"id":52},"53":{"loc":{"start":{"line":59,"column":19},"end":{"line":59,"column":41}},"id":53},"54":{"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":50}},"id":54},"55":{"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":49}},"id":55},"56":{"loc":{"start":{"line":62,"column":18},"end":{"line":62,"column":27}},"id":56},"57":{"loc":{"start":{"line":67,"column":12},"end":{"line":67,"column":52}},"id":57},"58":{"loc":{"start":{"line":67,"column":19},"end":{"line":67,"column":51}},"id":58},"59":{"loc":{"start":{"line":70,"column":12},"end":{"line":70,"column":46}},"id":59},"60":{"loc":{"start":{"line":70,"column":12},"end":{"line":70,"column":45}},"id":60},"61":{"loc":{"start":{"line":70,"column":18},"end":{"line":70,"column":34}},"id":61},"62":{"loc":{"start":{"line":75,"column":12},"end":{"line":75,"column":42}},"id":62},"63":{"loc":{"start":{"line":75,"column":19},"end":{"line":75,"column":41}},"id":63},"64":{"loc":{"start":{"line":78,"column":12},"end":{"line":78,"column":50}},"id":64},"65":{"loc":{"start":{"line":78,"column":12},"end":{"line":78,"column":49}},"id":65},"66":{"loc":{"start":{"line":78,"column":18},"end":{"line":78,"column":27}},"id":66}}}},"/Users/kris/q-io/spec/fs/mock/write-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1}},"hash":"a3539e601466a2b890db8533f5a9bbf0","instrumentor":{"blockCounter":6,"nodeCounter":26,"source":"\"use strict\";\n\nrequire(\"../../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../../fs\");\n\ndescribe(\"write\", function () {\n    it(\"should write a file to a mock filesystem\", function () {\n\n        return FS.mock(FS, FS.join(__dirname, \"fixture\"))\n        .then(function (mock) {\n\n            return Q.fcall(function () {\n                return mock.write(\"hello.txt\", \"Goodbye!\\n\");\n            })\n            .then(function () {\n                return mock.isFile(\"hello.txt\");\n            })\n            .then(function (isFile) {\n                expect(isFile).toBe(true);\n            })\n\n        });\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":31}},"id":6},"7":{"loc":{"start":{"line":7,"column":0},"end":{"line":25,"column":3}},"id":7},"8":{"loc":{"start":{"line":7,"column":0},"end":{"line":25,"column":2}},"id":8},"9":{"loc":{"start":{"line":8,"column":4},"end":{"line":24,"column":7}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":24,"column":6}},"id":10},"11":{"loc":{"start":{"line":10,"column":8},"end":{"line":23,"column":11}},"id":11},"12":{"loc":{"start":{"line":10,"column":15},"end":{"line":23,"column":10}},"id":12},"13":{"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":57}},"id":13},"14":{"loc":{"start":{"line":10,"column":27},"end":{"line":10,"column":56}},"id":14},"15":{"loc":{"start":{"line":13,"column":12},"end":{"line":23,"column":8}},"id":15},"16":{"loc":{"start":{"line":13,"column":19},"end":{"line":21,"column":14}},"id":16},"17":{"loc":{"start":{"line":16,"column":17},"end":{"line":18,"column":14}},"id":17},"18":{"loc":{"start":{"line":13,"column":26},"end":{"line":15,"column":14}},"id":18},"19":{"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":61}},"id":19},"20":{"loc":{"start":{"line":14,"column":23},"end":{"line":14,"column":60}},"id":20},"21":{"loc":{"start":{"line":17,"column":16},"end":{"line":17,"column":48}},"id":21},"22":{"loc":{"start":{"line":17,"column":23},"end":{"line":17,"column":47}},"id":22},"23":{"loc":{"start":{"line":20,"column":16},"end":{"line":20,"column":42}},"id":23},"24":{"loc":{"start":{"line":20,"column":16},"end":{"line":20,"column":41}},"id":24},"25":{"loc":{"start":{"line":20,"column":22},"end":{"line":20,"column":30}},"id":25}}}},"/Users/kris/q-io/spec/fs/range-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1}},"hash":"56b279f509eb873fc332e9d6a13b5869","instrumentor":{"blockCounter":3,"nodeCounter":21,"source":"\"use strict\";\n\nrequire(\"../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar FS = require(\"../../fs\");\n\ndescribe(\"open range\", function () {\n    it(\"read a partial range of a file\", function () {\n\n        var name = FS.join(module.directory || __dirname, \"range-spec.txt\");\n\n        return FS.open(name, {\n            begin: 1,\n            end: 3\n        })\n        .invoke(\"read\")\n        .then(function (content) {\n            expect(content).toBe(\"23\");\n        })\n\n    });\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":13}},"id":0},"1":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"id":1},"2":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"id":2},"3":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":21}},"id":3},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"id":4},"5":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}},"id":5},"6":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":28}},"id":6},"7":{"loc":{"start":{"line":7,"column":0},"end":{"line":22,"column":3}},"id":7},"8":{"loc":{"start":{"line":7,"column":0},"end":{"line":22,"column":2}},"id":8},"9":{"loc":{"start":{"line":8,"column":4},"end":{"line":21,"column":7}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":21,"column":6}},"id":10},"11":{"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":76}},"id":11},"12":{"loc":{"start":{"line":10,"column":19},"end":{"line":10,"column":75}},"id":12},"13":{"loc":{"start":{"line":10,"column":27},"end":{"line":10,"column":56}},"id":13},"14":{"loc":{"start":{"line":12,"column":8},"end":{"line":21,"column":4}},"id":14},"15":{"loc":{"start":{"line":12,"column":15},"end":{"line":19,"column":10}},"id":15},"16":{"loc":{"start":{"line":16,"column":15},"end":{"line":16,"column":23}},"id":16},"17":{"loc":{"start":{"line":12,"column":22},"end":{"line":15,"column":10}},"id":17},"18":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":39}},"id":18},"19":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":38}},"id":19},"20":{"loc":{"start":{"line":18,"column":18},"end":{"line":18,"column":27}},"id":20}}}},"/Users/kris/q-io/spec/http-apps/cookie-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":2},"14":{"index":14,"count":2},"15":{"index":15,"count":2},"16":{"index":16,"count":2},"17":{"index":17,"count":2},"18":{"index":18,"count":4},"19":{"index":19,"count":4},"20":{"index":20,"count":2},"21":{"index":21,"count":2},"22":{"index":22,"count":2},"23":{"index":23,"count":2},"24":{"index":24,"count":2},"25":{"index":25,"count":2},"26":{"index":26,"count":2},"27":{"index":27,"count":2},"28":{"index":28,"count":2},"29":{"index":29,"count":2},"30":{"index":30,"count":2},"31":{"index":31,"count":2},"32":{"index":32,"count":2},"33":{"index":33,"count":2},"34":{"index":34,"count":2},"35":{"index":35,"count":2},"36":{"index":36,"count":2},"37":{"index":37,"count":2},"38":{"index":38,"count":2},"39":{"index":39,"count":2},"40":{"index":40,"count":2},"41":{"index":41,"count":2},"42":{"index":42,"count":2},"43":{"index":43,"count":2},"44":{"index":44,"count":2},"45":{"index":45,"count":2},"46":{"index":46,"count":2},"47":{"index":47,"count":2},"48":{"index":48,"count":2},"49":{"index":49,"count":2},"50":{"index":50,"count":2},"51":{"index":51,"count":2},"52":{"index":52,"count":2},"53":{"index":53,"count":2},"54":{"index":54,"count":2}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":2},"2":{"index":2,"count":2},"3":{"index":3,"count":4},"4":{"index":4,"count":2},"5":{"index":5,"count":2},"6":{"index":6,"count":2},"7":{"index":7,"count":2}},"hash":"5e750c3836f40ec27dc74aa9a2de0dbb","instrumentor":{"blockCounter":8,"nodeCounter":55,"source":"require(\"../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar Http = require(\"../../http\");\nvar Apps = require(\"../../http-apps\");\n\ndescribe(\"http cookies\", function () {\n\n    var hosts = [\"localhost\", \"127.0.0.1\"];\n\n    hosts.forEach(function (host) {\n        it(\"should work on host\" + host, function () {\n\n            var server = Http.Server(function (request) {\n                return {\n                    status: 200,\n                    headers: {\n                        \"set-cookie\": \"a=10; MaxAge=1\"\n                    },\n                    body: [request.headers.cookie || \"\"]\n                };\n            });\n\n            var request = Apps.Normalize(Apps.CookieJar(Http.request));\n\n            return server.listen(0)\n            .then(function (server) {\n                var address = server.node.address();\n                return request(\"http://\" + host + \":\" + address.port)\n                .get(\"body\")\n                .invoke(\"read\")\n                .invoke(\"toString\", \"utf-8\")\n                .then(function (content) {\n                    expect(content).toEqual(\"\"); // no cookie first time\n                })\n                .then(function () {\n                    return request(\"http://\" + host + \":\" + address.port)\n                    .get(\"body\")\n                    .invoke(\"read\")\n                    .invoke(\"toString\", \"utf-8\")\n                })\n                .then(function (content) {\n                    expect(content).toEqual(\"a=10\"); // cookie set second time\n                })\n            })\n            .timeout(1000)\n            .finally(server.stop)\n        });\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":33}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":21}},"id":2},"3":{"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":20}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"id":4},"5":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":32}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":38}},"id":6},"7":{"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":37}},"id":7},"8":{"loc":{"start":{"line":6,"column":0},"end":{"line":50,"column":3}},"id":8},"9":{"loc":{"start":{"line":6,"column":0},"end":{"line":50,"column":2}},"id":9},"10":{"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":43}},"id":10},"11":{"loc":{"start":{"line":10,"column":4},"end":{"line":48,"column":7}},"id":11},"12":{"loc":{"start":{"line":10,"column":4},"end":{"line":48,"column":6}},"id":12},"13":{"loc":{"start":{"line":11,"column":8},"end":{"line":47,"column":11}},"id":13},"14":{"loc":{"start":{"line":11,"column":8},"end":{"line":47,"column":10}},"id":14},"15":{"loc":{"start":{"line":11,"column":11},"end":{"line":11,"column":39}},"id":15},"16":{"loc":{"start":{"line":13,"column":12},"end":{"line":21,"column":15}},"id":16},"17":{"loc":{"start":{"line":13,"column":25},"end":{"line":21,"column":14}},"id":17},"18":{"loc":{"start":{"line":14,"column":16},"end":{"line":20,"column":18}},"id":18},"19":{"loc":{"start":{"line":19,"column":27},"end":{"line":19,"column":55}},"id":19},"20":{"loc":{"start":{"line":23,"column":12},"end":{"line":23,"column":71}},"id":20},"21":{"loc":{"start":{"line":23,"column":26},"end":{"line":23,"column":70}},"id":21},"22":{"loc":{"start":{"line":23,"column":41},"end":{"line":23,"column":69}},"id":22},"23":{"loc":{"start":{"line":25,"column":12},"end":{"line":47,"column":8}},"id":23},"24":{"loc":{"start":{"line":25,"column":19},"end":{"line":46,"column":33}},"id":24},"25":{"loc":{"start":{"line":45,"column":20},"end":{"line":45,"column":26}},"id":25},"26":{"loc":{"start":{"line":26,"column":17},"end":{"line":44,"column":14}},"id":26},"27":{"loc":{"start":{"line":25,"column":32},"end":{"line":25,"column":35}},"id":27},"28":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":52}},"id":28},"29":{"loc":{"start":{"line":27,"column":30},"end":{"line":27,"column":51}},"id":29},"30":{"loc":{"start":{"line":28,"column":16},"end":{"line":44,"column":12}},"id":30},"31":{"loc":{"start":{"line":28,"column":23},"end":{"line":43,"column":18}},"id":31},"32":{"loc":{"start":{"line":35,"column":21},"end":{"line":40,"column":18}},"id":32},"33":{"loc":{"start":{"line":32,"column":21},"end":{"line":34,"column":18}},"id":33},"34":{"loc":{"start":{"line":31,"column":23},"end":{"line":31,"column":44}},"id":34},"35":{"loc":{"start":{"line":30,"column":23},"end":{"line":30,"column":31}},"id":35},"36":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":28}},"id":36},"37":{"loc":{"start":{"line":28,"column":30},"end":{"line":28,"column":69}},"id":37},"38":{"loc":{"start":{"line":28,"column":31},"end":{"line":28,"column":68}},"id":38},"39":{"loc":{"start":{"line":28,"column":31},"end":{"line":28,"column":53}},"id":39},"40":{"loc":{"start":{"line":28,"column":31},"end":{"line":28,"column":47}},"id":40},"41":{"loc":{"start":{"line":33,"column":20},"end":{"line":33,"column":48}},"id":41},"42":{"loc":{"start":{"line":33,"column":20},"end":{"line":33,"column":47}},"id":42},"43":{"loc":{"start":{"line":33,"column":26},"end":{"line":33,"column":35}},"id":43},"44":{"loc":{"start":{"line":36,"column":20},"end":{"line":40,"column":16}},"id":44},"45":{"loc":{"start":{"line":36,"column":27},"end":{"line":39,"column":48}},"id":45},"46":{"loc":{"start":{"line":38,"column":27},"end":{"line":38,"column":35}},"id":46},"47":{"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":32}},"id":47},"48":{"loc":{"start":{"line":36,"column":34},"end":{"line":36,"column":73}},"id":48},"49":{"loc":{"start":{"line":36,"column":35},"end":{"line":36,"column":72}},"id":49},"50":{"loc":{"start":{"line":36,"column":35},"end":{"line":36,"column":57}},"id":50},"51":{"loc":{"start":{"line":36,"column":35},"end":{"line":36,"column":51}},"id":51},"52":{"loc":{"start":{"line":42,"column":20},"end":{"line":42,"column":52}},"id":52},"53":{"loc":{"start":{"line":42,"column":20},"end":{"line":42,"column":51}},"id":53},"54":{"loc":{"start":{"line":42,"column":26},"end":{"line":42,"column":35}},"id":54}}}},"/Users/kris/q-io/http.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":7},"12":{"index":12,"count":7},"13":{"index":13,"count":7},"14":{"index":14,"count":7},"15":{"index":15,"count":9},"16":{"index":16,"count":9},"17":{"index":17,"count":9},"18":{"index":18,"count":9},"19":{"index":19,"count":9},"20":{"index":20,"count":9},"21":{"index":21,"count":9},"22":{"index":22,"count":9},"25":{"index":25,"count":9},"26":{"index":26,"count":9},"27":{"index":27,"count":9},"28":{"index":28,"count":9},"29":{"index":29,"count":9},"30":{"index":30,"count":9},"31":{"index":31,"count":9},"32":{"index":32,"count":9},"34":{"index":34,"count":9},"35":{"index":35,"count":9},"36":{"index":36,"count":9},"40":{"index":40,"count":9},"41":{"index":41,"count":9},"42":{"index":42,"count":9},"43":{"index":43,"count":9},"44":{"index":44,"count":9},"45":{"index":45,"count":9},"46":{"index":46,"count":6},"47":{"index":47,"count":6},"48":{"index":48,"count":6},"49":{"index":49,"count":6},"50":{"index":50,"count":6},"51":{"index":51,"count":6},"52":{"index":52,"count":6},"55":{"index":55,"count":6},"56":{"index":56,"count":6},"57":{"index":57,"count":3},"58":{"index":58,"count":3},"59":{"index":59,"count":3},"60":{"index":60,"count":3},"61":{"index":61,"count":3},"62":{"index":62,"count":3},"63":{"index":63,"count":3},"64":{"index":64,"count":3},"65":{"index":65,"count":3},"66":{"index":66,"count":3},"67":{"index":67,"count":3},"68":{"index":68,"count":3},"69":{"index":69,"count":3},"70":{"index":70,"count":3},"71":{"index":71,"count":3},"74":{"index":74,"count":7},"75":{"index":75,"count":7},"76":{"index":76,"count":7},"77":{"index":77,"count":7},"80":{"index":80,"count":7},"81":{"index":81,"count":7},"82":{"index":82,"count":7},"83":{"index":83,"count":7},"84":{"index":84,"count":7},"85":{"index":85,"count":7},"86":{"index":86,"count":7},"87":{"index":87,"count":7},"88":{"index":88,"count":7},"89":{"index":89,"count":7},"90":{"index":90,"count":7},"93":{"index":93,"count":7},"94":{"index":94,"count":7},"95":{"index":95,"count":7},"96":{"index":96,"count":7},"100":{"index":100,"count":7},"101":{"index":101,"count":7},"102":{"index":102,"count":7},"103":{"index":103,"count":7},"104":{"index":104,"count":7},"105":{"index":105,"count":7},"106":{"index":106,"count":7},"107":{"index":107,"count":1},"108":{"index":108,"count":1},"111":{"index":111,"count":1},"112":{"index":112,"count":9},"113":{"index":113,"count":9},"114":{"index":114,"count":9},"115":{"index":115,"count":9},"116":{"index":116,"count":9},"117":{"index":117,"count":9},"118":{"index":118,"count":9},"119":{"index":119,"count":9},"120":{"index":120,"count":9},"121":{"index":121,"count":9},"122":{"index":122,"count":9},"123":{"index":123,"count":9},"124":{"index":124,"count":9},"125":{"index":125,"count":9},"126":{"index":126,"count":9},"127":{"index":127,"count":9},"128":{"index":128,"count":9},"129":{"index":129,"count":9},"130":{"index":130,"count":9},"132":{"index":132,"count":9},"133":{"index":133,"count":9},"135":{"index":135,"count":9},"136":{"index":136,"count":9},"137":{"index":137,"count":9},"138":{"index":138,"count":9},"139":{"index":139,"count":9},"140":{"index":140,"count":9},"141":{"index":141,"count":9},"142":{"index":142,"count":9},"143":{"index":143,"count":9},"144":{"index":144,"count":9},"145":{"index":145,"count":9},"146":{"index":146,"count":1},"147":{"index":147,"count":9},"148":{"index":148,"count":9},"149":{"index":149,"count":9},"150":{"index":150,"count":9},"151":{"index":151,"count":9},"152":{"index":152,"count":9},"153":{"index":153,"count":1},"154":{"index":154,"count":13},"155":{"index":155,"count":4},"156":{"index":156,"count":11},"157":{"index":157,"count":11},"158":{"index":158,"count":11},"159":{"index":159,"count":11},"160":{"index":160,"count":11},"161":{"index":161,"count":11},"162":{"index":162,"count":11},"163":{"index":163,"count":11},"164":{"index":164,"count":11},"165":{"index":165,"count":11},"166":{"index":166,"count":11},"167":{"index":167,"count":11},"168":{"index":168,"count":11},"169":{"index":169,"count":11},"170":{"index":170,"count":11},"171":{"index":171,"count":13},"172":{"index":172,"count":1},"173":{"index":173,"count":4},"175":{"index":175,"count":4},"178":{"index":178,"count":4},"179":{"index":179,"count":1},"180":{"index":180,"count":9},"181":{"index":181,"count":9},"182":{"index":182,"count":9},"183":{"index":183,"count":9},"184":{"index":184,"count":9},"185":{"index":185,"count":9},"186":{"index":186,"count":9},"187":{"index":187,"count":9},"189":{"index":189,"count":9},"190":{"index":190,"count":9},"191":{"index":191,"count":9},"192":{"index":192,"count":9},"193":{"index":193,"count":9},"194":{"index":194,"count":9},"195":{"index":195,"count":9},"196":{"index":196,"count":9},"199":{"index":199,"count":9},"200":{"index":200,"count":9},"201":{"index":201,"count":9},"202":{"index":202,"count":9},"203":{"index":203,"count":9},"204":{"index":204,"count":9},"205":{"index":205,"count":9},"212":{"index":212,"count":9},"213":{"index":213,"count":9},"216":{"index":216,"count":9},"217":{"index":217,"count":9},"218":{"index":218,"count":9},"219":{"index":219,"count":1},"220":{"index":220,"count":1},"227":{"index":227,"count":9},"228":{"index":228,"count":9},"229":{"index":229,"count":9},"230":{"index":230,"count":9},"231":{"index":231,"count":9},"232":{"index":232,"count":9},"233":{"index":233,"count":9},"234":{"index":234,"count":1},"235":{"index":235,"count":2},"236":{"index":236,"count":2},"237":{"index":237,"count":1},"238":{"index":238,"count":1},"239":{"index":239,"count":2},"240":{"index":240,"count":2},"241":{"index":241,"count":2},"242":{"index":242,"count":2},"247":{"index":247,"count":2},"248":{"index":248,"count":2},"249":{"index":249,"count":1},"250":{"index":250,"count":9},"251":{"index":251,"count":9},"252":{"index":252,"count":9},"253":{"index":253,"count":9},"254":{"index":254,"count":9},"255":{"index":255,"count":9},"256":{"index":256,"count":9},"257":{"index":257,"count":9},"258":{"index":258,"count":9},"259":{"index":259,"count":9},"260":{"index":260,"count":9},"261":{"index":261,"count":9},"262":{"index":262,"count":9}},"blocks":{"0":{"index":0,"count":7},"1":{"index":1,"count":9},"2":{"index":2,"count":9},"4":{"index":4,"count":9},"5":{"index":5,"count":9},"6":{"index":6,"count":9},"9":{"index":9,"count":9},"10":{"index":10,"count":6},"11":{"index":11,"count":6},"12":{"index":12,"count":6},"14":{"index":14,"count":6},"15":{"index":15,"count":3},"16":{"index":16,"count":3},"17":{"index":17,"count":3},"18":{"index":18,"count":3},"19":{"index":19,"count":3},"20":{"index":20,"count":3},"22":{"index":22,"count":7},"24":{"index":24,"count":7},"25":{"index":25,"count":7},"26":{"index":26,"count":7},"28":{"index":28,"count":7},"29":{"index":29,"count":7},"33":{"index":33,"count":9},"34":{"index":34,"count":9},"35":{"index":35,"count":9},"36":{"index":36,"count":13},"37":{"index":37,"count":4},"38":{"index":38,"count":11},"39":{"index":39,"count":4},"43":{"index":43,"count":9},"44":{"index":44,"count":9},"45":{"index":45,"count":9},"48":{"index":48,"count":9},"49":{"index":49,"count":1},"53":{"index":53,"count":9},"54":{"index":54,"count":9},"55":{"index":55,"count":2},"56":{"index":56,"count":1},"57":{"index":57,"count":2},"59":{"index":59,"count":9},"60":{"index":60,"count":9}},"hash":"e1f9dae373c3f00825c8f1c551414166","instrumentor":{"blockCounter":61,"nodeCounter":263,"source":"/**\n * A promise-based Q-JSGI server and client API.\n * @module\n */\n\n/*whatsupdoc*/\n\nvar HTTP = require(\"http\"); // node\nvar HTTPS = require(\"https\"); // node\nvar URL = require(\"url2\"); // node\nvar Q = require(\"q\");\nvar Reader = require(\"./reader\");\n\n/**\n * @param {respond(request Request)} respond a JSGI responder function that\n * receives a Request object as its argument.  The JSGI responder promises to\n * return an object of the form `{status, headers, body}`.  The status and\n * headers must be fully resolved, but the body may be a promise for an object\n * with a `forEach(write(chunk String))` method, albeit an array of strings.\n * The `forEach` method may promise to resolve when all chunks have been\n * written.\n * @returns a Node Server object.\n */\nexports.Server = function (respond) {\n    var self = Object.create(exports.Server.prototype);\n\n    var server = HTTP.createServer(function (_request, _response) {\n        var request = exports.ServerRequest(_request);\n        var response = exports.ServerResponse(_response);\n\n        var closed = Q.defer();\n        _request.on(\"end\", function (error, value) {\n            if (error) {\n                closed.reject(error);\n            } else {\n                closed.resolve(value);\n            }\n        });\n\n        Q.when(request, function (request) {\n            return Q.when(respond(request, response), function (response) {\n                if (!response)\n                    return;\n\n                _response.writeHead(response.status, response.headers);\n\n                if (response.onclose || response.onClose)\n                    Q.when(closed, response.onclose || response.onClose);\n\n                return Q.when(response.body, function (body) {\n                    var length;\n                    if (\n                        Array.isArray(body) &&\n                        (length = body.length) &&\n                        body.every(function (chunk) {\n                            return typeof chunk === \"string\"\n                        })\n                    ) {\n                        body.forEach(function (chunk, i) {\n                            if (i < length - 1) {\n                                _response.write(chunk, response.charset);\n                            } else {\n                                _response.end(chunk, response.charset);\n                            }\n                        });\n                    } else if (body) {\n                        var end;\n                        var done = body.forEach(function (chunk) {\n                            end = Q.when(end, function () {\n                                return Q.when(chunk, function (chunk) {\n                                    _response.write(chunk, response.charset);\n                                });\n                            });\n                        });\n                        return Q.when(done, function () {\n                            return Q.when(end, function () {\n                                _response.end();\n                            });\n                        });\n                    } else {\n                        _response.end();\n                    }\n                });\n\n            })\n        })\n        .done(); // should be .fail(self.emitter(\"error\"))\n\n    });\n\n    var stopped = Q.defer();\n    server.on(\"close\", function (err) {\n        if (err) {\n            stopped.reject(err);\n        } else {\n            stopped.resolve();\n        }\n    });\n\n    /***\n     * Stops the server.\n     * @returns {Promise * Undefined} a promise that will\n     * resolve when the server is stopped.\n     */\n    self.stop = function () {\n        server.close();\n        listening = undefined;\n        return stopped.promise;\n    };\n\n    var listening = Q.defer();\n    server.on(\"listening\", function (err) {\n        if (err) {\n            listening.reject(err);\n        } else {\n            listening.resolve(self);\n        }\n    });\n\n    /***\n     * Starts the server, listening on the given port\n     * @param {Number} port\n     * @returns {Promise * Undefined} a promise that will\n     * resolve when the server is ready to receive\n     * connections\n     */\n    self.listen = function (/*...args*/) {\n        if (typeof server.port !== \"undefined\")\n            return Q.reject(new Error(\"A server cannot be restarted or \" +\n            \"started on a new port\"));\n        server.listen.apply(server, arguments);\n        return listening.promise;\n    };\n\n    self.stopped = stopped.promise;\n\n    self.node = server;\n    self.nodeServer = server; // Deprecated\n\n    return self;\n};\n\nObject.defineProperties(exports.Server, {\n\n    port: {\n        get: function () {\n            return this.node.port;\n        }\n    },\n\n    host: {\n        get: function () {\n            return this.node.host;\n        }\n    }\n\n});\n\n/**\n * A wrapper for a Node HTTP Request, as received by\n * the Q HTTP Server, suitable for use by the Q HTTP Client.\n */\nexports.ServerRequest = function (_request, ssl) {\n    var request = Object.create(_request);\n    /*** {Array} HTTP version. (JSGI) */\n    request.version = _request.httpVersion.split(\".\").map(Math.floor);\n    /*** {String} HTTP method, e.g., `\"GET\"` (JSGI) */\n    request.method = _request.method;\n    /*** {String} path, starting with `\"/\"` */\n    request.path = _request.url;\n    /*** {String} pathInfo, starting with `\"/\"`, the\n     * portion of the path that has not yet\n     * been routed (JSGI) */\n    request.pathInfo = URL.parse(_request.url).pathname;\n    /*** {String} scriptName, the portion of the path that\n     * has already been routed (JSGI) */\n    request.scriptName = \"\";\n    /*** {String} (JSGI) */\n    request.scheme = \"http\";\n\n    request.host = _request.headers.host;\n    request.port = _request.connection.address().port;\n\n    var socket = _request.socket;\n    /*** {String} */\n    request.remoteHost = socket.remoteAddress;\n    /*** {Number} */\n    request.remotePort = socket.remotePort;\n\n    /*** {String} url */\n    request.url = URL.format({\n        protocol: request.scheme,\n        hostname: _request.headers.host,\n        port: request.port === (ssl ? 443 : 80) ? null : request.port,\n        path: request.path\n    });\n    /*** A Q IO asynchronous text reader */\n    request.body = Reader(_request);\n    /*** {Object} HTTP headers (JSGI)*/\n    request.headers = _request.headers;\n    /*** The underlying Node request */\n    request.node = _request;\n    request.nodeRequest = _request; // Deprecated\n    /*** The underlying Node TCP connection */\n    request.nodeConnection = _request.connection;\n\n    return Q.when(request.body, function (body) {\n        request.body = body;\n        return request;\n    });\n};\n\nexports.ServerResponse = function (_response, ssl) {\n    var response = Object.create(_response);\n    response.ssl = ssl;\n    response.node = _response;\n    response.nodeResponse = _response; // Deprecated\n    return response;\n};\n\nexports.normalizeRequest = function (request) {\n    if (typeof request === \"string\") {\n        request = {\n            url: request\n        };\n    }\n    if (request.url) {\n        var url = URL.parse(request.url);\n        request.host = url.hostname;\n        request.port = url.port;\n        request.ssl = url.protocol === \"https:\";\n        request.method = request.method || \"GET\";\n        request.path = (url.pathname || \"\") + (url.search || \"\");\n        request.headers = request.headers || {};\n        request.headers.host = url.hostname; // FIXME name consistency\n    }\n    return request;\n};\n\nexports.normalizeResponse = function (response) {\n    if (response === void 0) {\n        return;\n    }\n    if (typeof response == \"string\") {\n        response = [response];\n    }\n    if (response.forEach) {\n        response = {\n            status: 200,\n            headers: {},\n            body: response\n        }\n    }\n    return response;\n};\n\n/**\n * Issues an HTTP request.\n *\n * @param {Request {host, port, method, path, headers,\n * body}} request (may be a promise)\n * @returns {Promise * Response} promise for a response\n */\nexports.request = function (request) {\n    return Q.when(request, function (request) {\n\n        request = exports.normalizeRequest(request);\n\n        var deferred = Q.defer();\n        var ssl = request.ssl;\n        var http = ssl ? HTTPS : HTTP;\n\n        var headers = request.headers || {};\n\n        headers.host = headers.host || request.host;\n\n        var _request = http.request({\n            \"host\": request.host,\n            \"port\": request.port || (ssl ? 443 : 80),\n            \"path\": request.path || \"/\",\n            \"method\": request.method || \"GET\",\n            \"headers\": headers\n        }, function (_response) {\n            deferred.resolve(exports.ClientResponse(_response, request.charset));\n            _response.on(\"error\", function (error) {\n                // TODO find a better way to channel\n                // this into the response\n                console.warn(error && error.stack || error);\n                deferred.reject(error);\n            });\n        });\n\n        _request.on(\"error\", function (error) {\n            deferred.reject(error);\n        });\n\n        Q.when(request.body, function (body) {\n            var end, done;\n            if (body) {\n                done = body.forEach(function (chunk) {\n                    end = Q.when(end, function () {\n                        return Q.when(chunk, function (chunk) {\n                            _request.write(chunk, request.charset);\n                        });\n                    });\n                });\n            }\n            return Q.when(end, function () {\n                return Q.when(done, function () {\n                    _request.end();\n                });\n            });\n        });\n\n        return deferred.promise;\n    });\n};\n\n/**\n * Issues a GET request to the given URL and returns\n * a promise for a `String` containing the entirety\n * of the response.\n *\n * @param {String} url\n * @returns {Promise * String} or a rejection if the\n * status code is not exactly 200.  The reason for the\n * rejection is the full response object.\n */\nexports.read = function (request, qualifier) {\n    qualifier = qualifier || function (response) {\n        return response.status === 200;\n    };\n    return Q.when(exports.request(request), function (response) {\n        if (!qualifier(response)){\n            var error = new Error(\"HTTP request failed with code \" + response.status);\n            error.response = response;\n            throw error;\n        }\n        return Q.post(response.body, 'read', []);\n    });\n};\n\n\n/**\n * A wrapper for the Node HTTP Response as provided\n * by the Q HTTP Client API, suitable for use by the\n * Q HTTP Server API.\n */\nexports.ClientResponse = function (_response, charset) {\n    var response = Object.create(exports.ClientResponse.prototype);\n    /*** {Number} HTTP status code */\n    response.status = _response.statusCode;\n    /*** HTTP version */\n    response.version = _response.httpVersion;\n    /*** {Object} HTTP headers */\n    response.headers = _response.headers;\n    /***\n     * A Q IO asynchronous text reader.\n     */\n    response.node = _response;\n    response.nodeResponse = _response; // Deprecated\n    response.nodeConnection = _response.connection; // Deprecated\n    return Q.when(Reader(_response, charset), function (body) {\n        response.body = body;\n        return response;\n    });\n};","nodes":{"0":{"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":27}},"id":0},"1":{"loc":{"start":{"line":8,"column":11},"end":{"line":8,"column":26}},"id":1},"2":{"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":29}},"id":2},"3":{"loc":{"start":{"line":9,"column":12},"end":{"line":9,"column":28}},"id":3},"4":{"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":26}},"id":4},"5":{"loc":{"start":{"line":10,"column":10},"end":{"line":10,"column":25}},"id":5},"6":{"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":21}},"id":6},"7":{"loc":{"start":{"line":11,"column":8},"end":{"line":11,"column":20}},"id":7},"8":{"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":33}},"id":8},"9":{"loc":{"start":{"line":12,"column":13},"end":{"line":12,"column":32}},"id":9},"10":{"loc":{"start":{"line":24,"column":0},"end":{"line":141,"column":2}},"id":10},"11":{"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":55}},"id":11},"12":{"loc":{"start":{"line":25,"column":15},"end":{"line":25,"column":54}},"id":12},"13":{"loc":{"start":{"line":27,"column":4},"end":{"line":89,"column":7}},"id":13},"14":{"loc":{"start":{"line":27,"column":17},"end":{"line":89,"column":6}},"id":14},"15":{"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":54}},"id":15},"16":{"loc":{"start":{"line":28,"column":22},"end":{"line":28,"column":53}},"id":16},"17":{"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":57}},"id":17},"18":{"loc":{"start":{"line":29,"column":23},"end":{"line":29,"column":56}},"id":18},"19":{"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":31}},"id":19},"20":{"loc":{"start":{"line":31,"column":21},"end":{"line":31,"column":30}},"id":20},"21":{"loc":{"start":{"line":32,"column":8},"end":{"line":38,"column":11}},"id":21},"22":{"loc":{"start":{"line":32,"column":8},"end":{"line":38,"column":10}},"id":22},"23":{"loc":{"start":{"line":34,"column":16},"end":{"line":34,"column":37}},"id":23},"24":{"loc":{"start":{"line":34,"column":16},"end":{"line":34,"column":36}},"id":24},"25":{"loc":{"start":{"line":36,"column":16},"end":{"line":36,"column":38}},"id":25},"26":{"loc":{"start":{"line":36,"column":16},"end":{"line":36,"column":37}},"id":26},"27":{"loc":{"start":{"line":40,"column":8},"end":{"line":87,"column":16}},"id":27},"28":{"loc":{"start":{"line":40,"column":8},"end":{"line":87,"column":15}},"id":28},"29":{"loc":{"start":{"line":40,"column":14},"end":{"line":86,"column":10}},"id":29},"30":{"loc":{"start":{"line":41,"column":12},"end":{"line":86,"column":8}},"id":30},"31":{"loc":{"start":{"line":41,"column":19},"end":{"line":85,"column":14}},"id":31},"32":{"loc":{"start":{"line":41,"column":26},"end":{"line":41,"column":52}},"id":32},"33":{"loc":{"start":{"line":43,"column":20},"end":{"line":43,"column":27}},"id":33},"34":{"loc":{"start":{"line":45,"column":16},"end":{"line":45,"column":71}},"id":34},"35":{"loc":{"start":{"line":45,"column":16},"end":{"line":45,"column":70}},"id":35},"36":{"loc":{"start":{"line":47,"column":20},"end":{"line":47,"column":56}},"id":36},"37":{"loc":{"start":{"line":48,"column":20},"end":{"line":48,"column":73}},"id":37},"38":{"loc":{"start":{"line":48,"column":20},"end":{"line":48,"column":72}},"id":38},"39":{"loc":{"start":{"line":48,"column":35},"end":{"line":48,"column":71}},"id":39},"40":{"loc":{"start":{"line":50,"column":16},"end":{"line":83,"column":19}},"id":40},"41":{"loc":{"start":{"line":50,"column":23},"end":{"line":83,"column":18}},"id":41},"42":{"loc":{"start":{"line":51,"column":20},"end":{"line":51,"column":31}},"id":42},"43":{"loc":{"start":{"line":53,"column":24},"end":{"line":57,"column":26}},"id":43},"44":{"loc":{"start":{"line":53,"column":24},"end":{"line":54,"column":46}},"id":44},"45":{"loc":{"start":{"line":53,"column":24},"end":{"line":53,"column":43}},"id":45},"46":{"loc":{"start":{"line":55,"column":24},"end":{"line":57,"column":26}},"id":46},"47":{"loc":{"start":{"line":56,"column":28},"end":{"line":57,"column":24}},"id":47},"48":{"loc":{"start":{"line":56,"column":35},"end":{"line":56,"column":60}},"id":48},"49":{"loc":{"start":{"line":59,"column":24},"end":{"line":65,"column":27}},"id":49},"50":{"loc":{"start":{"line":59,"column":24},"end":{"line":65,"column":26}},"id":50},"51":{"loc":{"start":{"line":60,"column":32},"end":{"line":60,"column":46}},"id":51},"52":{"loc":{"start":{"line":60,"column":36},"end":{"line":60,"column":46}},"id":52},"53":{"loc":{"start":{"line":61,"column":32},"end":{"line":61,"column":73}},"id":53},"54":{"loc":{"start":{"line":61,"column":32},"end":{"line":61,"column":72}},"id":54},"55":{"loc":{"start":{"line":63,"column":32},"end":{"line":63,"column":71}},"id":55},"56":{"loc":{"start":{"line":63,"column":32},"end":{"line":63,"column":70}},"id":56},"57":{"loc":{"start":{"line":67,"column":24},"end":{"line":67,"column":32}},"id":57},"58":{"loc":{"start":{"line":68,"column":24},"end":{"line":74,"column":27}},"id":58},"59":{"loc":{"start":{"line":68,"column":35},"end":{"line":74,"column":26}},"id":59},"60":{"loc":{"start":{"line":69,"column":28},"end":{"line":73,"column":31}},"id":60},"61":{"loc":{"start":{"line":69,"column":34},"end":{"line":73,"column":30}},"id":61},"62":{"loc":{"start":{"line":70,"column":32},"end":{"line":72,"column":35}},"id":62},"63":{"loc":{"start":{"line":70,"column":39},"end":{"line":72,"column":34}},"id":63},"64":{"loc":{"start":{"line":71,"column":36},"end":{"line":71,"column":77}},"id":64},"65":{"loc":{"start":{"line":71,"column":36},"end":{"line":71,"column":76}},"id":65},"66":{"loc":{"start":{"line":75,"column":24},"end":{"line":79,"column":27}},"id":66},"67":{"loc":{"start":{"line":75,"column":31},"end":{"line":79,"column":26}},"id":67},"68":{"loc":{"start":{"line":76,"column":28},"end":{"line":78,"column":31}},"id":68},"69":{"loc":{"start":{"line":76,"column":35},"end":{"line":78,"column":30}},"id":69},"70":{"loc":{"start":{"line":77,"column":32},"end":{"line":77,"column":48}},"id":70},"71":{"loc":{"start":{"line":77,"column":32},"end":{"line":77,"column":47}},"id":71},"72":{"loc":{"start":{"line":81,"column":24},"end":{"line":81,"column":40}},"id":72},"73":{"loc":{"start":{"line":81,"column":24},"end":{"line":81,"column":39}},"id":73},"74":{"loc":{"start":{"line":91,"column":4},"end":{"line":91,"column":28}},"id":74},"75":{"loc":{"start":{"line":91,"column":18},"end":{"line":91,"column":27}},"id":75},"76":{"loc":{"start":{"line":92,"column":4},"end":{"line":98,"column":7}},"id":76},"77":{"loc":{"start":{"line":92,"column":4},"end":{"line":98,"column":6}},"id":77},"78":{"loc":{"start":{"line":94,"column":12},"end":{"line":94,"column":32}},"id":78},"79":{"loc":{"start":{"line":94,"column":12},"end":{"line":94,"column":31}},"id":79},"80":{"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":30}},"id":80},"81":{"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":29}},"id":81},"82":{"loc":{"start":{"line":105,"column":4},"end":{"line":109,"column":6}},"id":82},"83":{"loc":{"start":{"line":106,"column":8},"end":{"line":106,"column":23}},"id":83},"84":{"loc":{"start":{"line":106,"column":8},"end":{"line":106,"column":22}},"id":84},"85":{"loc":{"start":{"line":107,"column":8},"end":{"line":107,"column":30}},"id":85},"86":{"loc":{"start":{"line":108,"column":8},"end":{"line":108,"column":31}},"id":86},"87":{"loc":{"start":{"line":111,"column":4},"end":{"line":111,"column":30}},"id":87},"88":{"loc":{"start":{"line":111,"column":20},"end":{"line":111,"column":29}},"id":88},"89":{"loc":{"start":{"line":112,"column":4},"end":{"line":118,"column":7}},"id":89},"90":{"loc":{"start":{"line":112,"column":4},"end":{"line":118,"column":6}},"id":90},"91":{"loc":{"start":{"line":114,"column":12},"end":{"line":114,"column":34}},"id":91},"92":{"loc":{"start":{"line":114,"column":12},"end":{"line":114,"column":33}},"id":92},"93":{"loc":{"start":{"line":116,"column":12},"end":{"line":116,"column":36}},"id":93},"94":{"loc":{"start":{"line":116,"column":12},"end":{"line":116,"column":35}},"id":94},"95":{"loc":{"start":{"line":127,"column":4},"end":{"line":133,"column":6}},"id":95},"96":{"loc":{"start":{"line":128,"column":12},"end":{"line":128,"column":46}},"id":96},"97":{"loc":{"start":{"line":129,"column":12},"end":{"line":130,"column":38}},"id":97},"98":{"loc":{"start":{"line":129,"column":19},"end":{"line":130,"column":37}},"id":98},"99":{"loc":{"start":{"line":129,"column":38},"end":{"line":130,"column":35}},"id":99},"100":{"loc":{"start":{"line":131,"column":8},"end":{"line":131,"column":47}},"id":100},"101":{"loc":{"start":{"line":131,"column":8},"end":{"line":131,"column":46}},"id":101},"102":{"loc":{"start":{"line":132,"column":8},"end":{"line":132,"column":33}},"id":102},"103":{"loc":{"start":{"line":135,"column":4},"end":{"line":135,"column":35}},"id":103},"104":{"loc":{"start":{"line":137,"column":4},"end":{"line":137,"column":23}},"id":104},"105":{"loc":{"start":{"line":138,"column":4},"end":{"line":138,"column":29}},"id":105},"106":{"loc":{"start":{"line":140,"column":4},"end":{"line":140,"column":16}},"id":106},"107":{"loc":{"start":{"line":143,"column":0},"end":{"line":157,"column":3}},"id":107},"108":{"loc":{"start":{"line":143,"column":0},"end":{"line":157,"column":2}},"id":108},"109":{"loc":{"start":{"line":147,"column":12},"end":{"line":147,"column":34}},"id":109},"110":{"loc":{"start":{"line":153,"column":12},"end":{"line":153,"column":34}},"id":110},"111":{"loc":{"start":{"line":163,"column":0},"end":{"line":211,"column":2}},"id":111},"112":{"loc":{"start":{"line":164,"column":4},"end":{"line":164,"column":42}},"id":112},"113":{"loc":{"start":{"line":164,"column":18},"end":{"line":164,"column":41}},"id":113},"114":{"loc":{"start":{"line":166,"column":4},"end":{"line":166,"column":70}},"id":114},"115":{"loc":{"start":{"line":166,"column":22},"end":{"line":166,"column":69}},"id":115},"116":{"loc":{"start":{"line":166,"column":48},"end":{"line":166,"column":53}},"id":116},"117":{"loc":{"start":{"line":168,"column":4},"end":{"line":168,"column":37}},"id":117},"118":{"loc":{"start":{"line":170,"column":4},"end":{"line":170,"column":32}},"id":118},"119":{"loc":{"start":{"line":174,"column":4},"end":{"line":174,"column":56}},"id":119},"120":{"loc":{"start":{"line":174,"column":32},"end":{"line":174,"column":46}},"id":120},"121":{"loc":{"start":{"line":177,"column":4},"end":{"line":177,"column":28}},"id":121},"122":{"loc":{"start":{"line":179,"column":4},"end":{"line":179,"column":28}},"id":122},"123":{"loc":{"start":{"line":181,"column":4},"end":{"line":181,"column":41}},"id":123},"124":{"loc":{"start":{"line":182,"column":4},"end":{"line":182,"column":54}},"id":124},"125":{"loc":{"start":{"line":182,"column":46},"end":{"line":182,"column":48}},"id":125},"126":{"loc":{"start":{"line":184,"column":4},"end":{"line":184,"column":33}},"id":126},"127":{"loc":{"start":{"line":186,"column":4},"end":{"line":186,"column":46}},"id":127},"128":{"loc":{"start":{"line":188,"column":4},"end":{"line":188,"column":43}},"id":128},"129":{"loc":{"start":{"line":191,"column":4},"end":{"line":196,"column":7}},"id":129},"130":{"loc":{"start":{"line":191,"column":18},"end":{"line":196,"column":6}},"id":130},"131":{"loc":{"start":{"line":194,"column":50},"end":{"line":194,"column":54}},"id":131},"132":{"loc":{"start":{"line":194,"column":57},"end":{"line":194,"column":69}},"id":132},"133":{"loc":{"start":{"line":194,"column":14},"end":{"line":194,"column":47}},"id":133},"134":{"loc":{"start":{"line":194,"column":38},"end":{"line":194,"column":41}},"id":134},"135":{"loc":{"start":{"line":194,"column":44},"end":{"line":194,"column":46}},"id":135},"136":{"loc":{"start":{"line":198,"column":4},"end":{"line":198,"column":36}},"id":136},"137":{"loc":{"start":{"line":198,"column":19},"end":{"line":198,"column":35}},"id":137},"138":{"loc":{"start":{"line":200,"column":4},"end":{"line":200,"column":39}},"id":138},"139":{"loc":{"start":{"line":202,"column":4},"end":{"line":202,"column":28}},"id":139},"140":{"loc":{"start":{"line":203,"column":4},"end":{"line":203,"column":35}},"id":140},"141":{"loc":{"start":{"line":205,"column":4},"end":{"line":205,"column":49}},"id":141},"142":{"loc":{"start":{"line":207,"column":4},"end":{"line":210,"column":7}},"id":142},"143":{"loc":{"start":{"line":207,"column":11},"end":{"line":210,"column":6}},"id":143},"144":{"loc":{"start":{"line":208,"column":8},"end":{"line":208,"column":28}},"id":144},"145":{"loc":{"start":{"line":209,"column":8},"end":{"line":209,"column":23}},"id":145},"146":{"loc":{"start":{"line":213,"column":0},"end":{"line":219,"column":2}},"id":146},"147":{"loc":{"start":{"line":214,"column":4},"end":{"line":214,"column":44}},"id":147},"148":{"loc":{"start":{"line":214,"column":19},"end":{"line":214,"column":43}},"id":148},"149":{"loc":{"start":{"line":215,"column":4},"end":{"line":215,"column":23}},"id":149},"150":{"loc":{"start":{"line":216,"column":4},"end":{"line":216,"column":30}},"id":150},"151":{"loc":{"start":{"line":217,"column":4},"end":{"line":217,"column":38}},"id":151},"152":{"loc":{"start":{"line":218,"column":4},"end":{"line":218,"column":20}},"id":152},"153":{"loc":{"start":{"line":221,"column":0},"end":{"line":238,"column":2}},"id":153},"154":{"loc":{"start":{"line":222,"column":8},"end":{"line":222,"column":35}},"id":154},"155":{"loc":{"start":{"line":223,"column":8},"end":{"line":225,"column":10}},"id":155},"156":{"loc":{"start":{"line":228,"column":8},"end":{"line":228,"column":41}},"id":156},"157":{"loc":{"start":{"line":228,"column":18},"end":{"line":228,"column":40}},"id":157},"158":{"loc":{"start":{"line":229,"column":8},"end":{"line":229,"column":36}},"id":158},"159":{"loc":{"start":{"line":230,"column":8},"end":{"line":230,"column":32}},"id":159},"160":{"loc":{"start":{"line":231,"column":8},"end":{"line":231,"column":48}},"id":160},"161":{"loc":{"start":{"line":231,"column":22},"end":{"line":231,"column":47}},"id":161},"162":{"loc":{"start":{"line":232,"column":8},"end":{"line":232,"column":49}},"id":162},"163":{"loc":{"start":{"line":232,"column":25},"end":{"line":232,"column":48}},"id":163},"164":{"loc":{"start":{"line":233,"column":8},"end":{"line":233,"column":65}},"id":164},"165":{"loc":{"start":{"line":233,"column":23},"end":{"line":233,"column":64}},"id":165},"166":{"loc":{"start":{"line":233,"column":23},"end":{"line":233,"column":43}},"id":166},"167":{"loc":{"start":{"line":233,"column":46},"end":{"line":233,"column":64}},"id":167},"168":{"loc":{"start":{"line":234,"column":8},"end":{"line":234,"column":48}},"id":168},"169":{"loc":{"start":{"line":234,"column":26},"end":{"line":234,"column":47}},"id":169},"170":{"loc":{"start":{"line":235,"column":8},"end":{"line":235,"column":44}},"id":170},"171":{"loc":{"start":{"line":237,"column":4},"end":{"line":237,"column":19}},"id":171},"172":{"loc":{"start":{"line":240,"column":0},"end":{"line":255,"column":2}},"id":172},"173":{"loc":{"start":{"line":241,"column":8},"end":{"line":241,"column":27}},"id":173},"174":{"loc":{"start":{"line":242,"column":8},"end":{"line":242,"column":15}},"id":174},"175":{"loc":{"start":{"line":244,"column":8},"end":{"line":244,"column":35}},"id":175},"176":{"loc":{"start":{"line":245,"column":8},"end":{"line":245,"column":30}},"id":176},"177":{"loc":{"start":{"line":248,"column":8},"end":{"line":253,"column":4}},"id":177},"178":{"loc":{"start":{"line":254,"column":4},"end":{"line":254,"column":20}},"id":178},"179":{"loc":{"start":{"line":264,"column":0},"end":{"line":317,"column":2}},"id":179},"180":{"loc":{"start":{"line":265,"column":4},"end":{"line":316,"column":7}},"id":180},"181":{"loc":{"start":{"line":265,"column":11},"end":{"line":316,"column":6}},"id":181},"182":{"loc":{"start":{"line":267,"column":8},"end":{"line":267,"column":52}},"id":182},"183":{"loc":{"start":{"line":267,"column":18},"end":{"line":267,"column":51}},"id":183},"184":{"loc":{"start":{"line":269,"column":8},"end":{"line":269,"column":33}},"id":184},"185":{"loc":{"start":{"line":269,"column":23},"end":{"line":269,"column":32}},"id":185},"186":{"loc":{"start":{"line":270,"column":8},"end":{"line":270,"column":30}},"id":186},"187":{"loc":{"start":{"line":271,"column":8},"end":{"line":271,"column":38}},"id":187},"188":{"loc":{"start":{"line":271,"column":25},"end":{"line":271,"column":30}},"id":188},"189":{"loc":{"start":{"line":271,"column":33},"end":{"line":271,"column":37}},"id":189},"190":{"loc":{"start":{"line":273,"column":8},"end":{"line":273,"column":44}},"id":190},"191":{"loc":{"start":{"line":273,"column":22},"end":{"line":273,"column":43}},"id":191},"192":{"loc":{"start":{"line":275,"column":8},"end":{"line":275,"column":52}},"id":192},"193":{"loc":{"start":{"line":275,"column":23},"end":{"line":275,"column":51}},"id":193},"194":{"loc":{"start":{"line":277,"column":8},"end":{"line":291,"column":11}},"id":194},"195":{"loc":{"start":{"line":277,"column":23},"end":{"line":291,"column":10}},"id":195},"196":{"loc":{"start":{"line":279,"column":20},"end":{"line":279,"column":52}},"id":196},"197":{"loc":{"start":{"line":279,"column":43},"end":{"line":279,"column":46}},"id":197},"198":{"loc":{"start":{"line":279,"column":49},"end":{"line":279,"column":51}},"id":198},"199":{"loc":{"start":{"line":280,"column":20},"end":{"line":280,"column":39}},"id":199},"200":{"loc":{"start":{"line":281,"column":22},"end":{"line":281,"column":45}},"id":200},"201":{"loc":{"start":{"line":284,"column":12},"end":{"line":284,"column":81}},"id":201},"202":{"loc":{"start":{"line":284,"column":12},"end":{"line":284,"column":80}},"id":202},"203":{"loc":{"start":{"line":284,"column":29},"end":{"line":284,"column":79}},"id":203},"204":{"loc":{"start":{"line":285,"column":12},"end":{"line":290,"column":15}},"id":204},"205":{"loc":{"start":{"line":285,"column":12},"end":{"line":290,"column":14}},"id":205},"206":{"loc":{"start":{"line":288,"column":16},"end":{"line":288,"column":60}},"id":206},"207":{"loc":{"start":{"line":288,"column":16},"end":{"line":288,"column":59}},"id":207},"208":{"loc":{"start":{"line":288,"column":29},"end":{"line":288,"column":58}},"id":208},"209":{"loc":{"start":{"line":288,"column":29},"end":{"line":288,"column":49}},"id":209},"210":{"loc":{"start":{"line":289,"column":16},"end":{"line":289,"column":39}},"id":210},"211":{"loc":{"start":{"line":289,"column":16},"end":{"line":289,"column":38}},"id":211},"212":{"loc":{"start":{"line":293,"column":8},"end":{"line":295,"column":11}},"id":212},"213":{"loc":{"start":{"line":293,"column":8},"end":{"line":295,"column":10}},"id":213},"214":{"loc":{"start":{"line":294,"column":12},"end":{"line":294,"column":35}},"id":214},"215":{"loc":{"start":{"line":294,"column":12},"end":{"line":294,"column":34}},"id":215},"216":{"loc":{"start":{"line":297,"column":8},"end":{"line":313,"column":11}},"id":216},"217":{"loc":{"start":{"line":297,"column":8},"end":{"line":313,"column":10}},"id":217},"218":{"loc":{"start":{"line":298,"column":12},"end":{"line":298,"column":26}},"id":218},"219":{"loc":{"start":{"line":300,"column":16},"end":{"line":306,"column":19}},"id":219},"220":{"loc":{"start":{"line":300,"column":23},"end":{"line":306,"column":18}},"id":220},"221":{"loc":{"start":{"line":301,"column":20},"end":{"line":305,"column":23}},"id":221},"222":{"loc":{"start":{"line":301,"column":26},"end":{"line":305,"column":22}},"id":222},"223":{"loc":{"start":{"line":302,"column":24},"end":{"line":304,"column":27}},"id":223},"224":{"loc":{"start":{"line":302,"column":31},"end":{"line":304,"column":26}},"id":224},"225":{"loc":{"start":{"line":303,"column":28},"end":{"line":303,"column":67}},"id":225},"226":{"loc":{"start":{"line":303,"column":28},"end":{"line":303,"column":66}},"id":226},"227":{"loc":{"start":{"line":308,"column":12},"end":{"line":312,"column":15}},"id":227},"228":{"loc":{"start":{"line":308,"column":19},"end":{"line":312,"column":14}},"id":228},"229":{"loc":{"start":{"line":309,"column":16},"end":{"line":311,"column":19}},"id":229},"230":{"loc":{"start":{"line":309,"column":23},"end":{"line":311,"column":18}},"id":230},"231":{"loc":{"start":{"line":310,"column":20},"end":{"line":310,"column":35}},"id":231},"232":{"loc":{"start":{"line":310,"column":20},"end":{"line":310,"column":34}},"id":232},"233":{"loc":{"start":{"line":315,"column":8},"end":{"line":315,"column":32}},"id":233},"234":{"loc":{"start":{"line":329,"column":0},"end":{"line":341,"column":2}},"id":234},"235":{"loc":{"start":{"line":330,"column":4},"end":{"line":332,"column":6}},"id":235},"236":{"loc":{"start":{"line":330,"column":16},"end":{"line":332,"column":5}},"id":236},"237":{"loc":{"start":{"line":331,"column":8},"end":{"line":331,"column":39}},"id":237},"238":{"loc":{"start":{"line":331,"column":15},"end":{"line":331,"column":38}},"id":238},"239":{"loc":{"start":{"line":333,"column":4},"end":{"line":340,"column":7}},"id":239},"240":{"loc":{"start":{"line":333,"column":11},"end":{"line":340,"column":6}},"id":240},"241":{"loc":{"start":{"line":333,"column":18},"end":{"line":333,"column":42}},"id":241},"242":{"loc":{"start":{"line":334,"column":13},"end":{"line":334,"column":32}},"id":242},"243":{"loc":{"start":{"line":335,"column":12},"end":{"line":335,"column":86}},"id":243},"244":{"loc":{"start":{"line":335,"column":34},"end":{"line":335,"column":84}},"id":244},"245":{"loc":{"start":{"line":336,"column":12},"end":{"line":336,"column":38}},"id":245},"246":{"loc":{"start":{"line":337,"column":12},"end":{"line":337,"column":24}},"id":246},"247":{"loc":{"start":{"line":339,"column":8},"end":{"line":339,"column":49}},"id":247},"248":{"loc":{"start":{"line":339,"column":15},"end":{"line":339,"column":48}},"id":248},"249":{"loc":{"start":{"line":349,"column":0},"end":{"line":367,"column":2}},"id":249},"250":{"loc":{"start":{"line":350,"column":4},"end":{"line":350,"column":67}},"id":250},"251":{"loc":{"start":{"line":350,"column":19},"end":{"line":350,"column":66}},"id":251},"252":{"loc":{"start":{"line":352,"column":4},"end":{"line":352,"column":43}},"id":252},"253":{"loc":{"start":{"line":354,"column":4},"end":{"line":354,"column":45}},"id":253},"254":{"loc":{"start":{"line":356,"column":4},"end":{"line":356,"column":41}},"id":254},"255":{"loc":{"start":{"line":360,"column":4},"end":{"line":360,"column":30}},"id":255},"256":{"loc":{"start":{"line":361,"column":4},"end":{"line":361,"column":38}},"id":256},"257":{"loc":{"start":{"line":362,"column":4},"end":{"line":362,"column":51}},"id":257},"258":{"loc":{"start":{"line":363,"column":4},"end":{"line":366,"column":7}},"id":258},"259":{"loc":{"start":{"line":363,"column":11},"end":{"line":366,"column":6}},"id":259},"260":{"loc":{"start":{"line":363,"column":18},"end":{"line":363,"column":44}},"id":260},"261":{"loc":{"start":{"line":364,"column":8},"end":{"line":364,"column":29}},"id":261},"262":{"loc":{"start":{"line":365,"column":8},"end":{"line":365,"column":24}},"id":262}}}},"/Users/kris/q-io/http-apps.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":2},"35":{"index":35,"count":2},"36":{"index":36,"count":2},"37":{"index":37,"count":2},"38":{"index":38,"count":2},"39":{"index":39,"count":1},"40":{"index":40,"count":2},"41":{"index":41,"count":2},"44":{"index":44,"count":1},"45":{"index":45,"count":2},"46":{"index":46,"count":2},"47":{"index":47,"count":2},"48":{"index":48,"count":2},"49":{"index":49,"count":2},"51":{"index":51,"count":2},"52":{"index":52,"count":2},"53":{"index":53,"count":1},"54":{"index":54,"count":2},"55":{"index":55,"count":2},"56":{"index":56,"count":2},"57":{"index":57,"count":2},"58":{"index":58,"count":2},"59":{"index":59,"count":2},"60":{"index":60,"count":2},"61":{"index":61,"count":2},"62":{"index":62,"count":2},"63":{"index":63,"count":1},"72":{"index":72,"count":1},"73":{"index":73,"count":1},"74":{"index":74,"count":1},"75":{"index":75,"count":1},"76":{"index":76,"count":1},"77":{"index":77,"count":1},"78":{"index":78,"count":1},"93":{"index":93,"count":1},"95":{"index":95,"count":2},"96":{"index":96,"count":2},"97":{"index":97,"count":2},"100":{"index":100,"count":2},"101":{"index":101,"count":2},"102":{"index":102,"count":2},"103":{"index":103,"count":2},"104":{"index":104,"count":2},"105":{"index":105,"count":2},"106":{"index":106,"count":2},"107":{"index":107,"count":2},"108":{"index":108,"count":2},"109":{"index":109,"count":2},"110":{"index":110,"count":2},"111":{"index":111,"count":2},"112":{"index":112,"count":2},"113":{"index":113,"count":2},"114":{"index":114,"count":2},"115":{"index":115,"count":2},"118":{"index":118,"count":1},"119":{"index":119,"count":1},"120":{"index":120,"count":1},"121":{"index":121,"count":1},"122":{"index":122,"count":1},"123":{"index":123,"count":1},"124":{"index":124,"count":1},"134":{"index":134,"count":1},"135":{"index":135,"count":1},"136":{"index":136,"count":1},"137":{"index":137,"count":1},"138":{"index":138,"count":1},"139":{"index":139,"count":1},"184":{"index":184,"count":1},"185":{"index":185,"count":1},"186":{"index":186,"count":1},"187":{"index":187,"count":1},"188":{"index":188,"count":1},"189":{"index":189,"count":1},"190":{"index":190,"count":1},"191":{"index":191,"count":1},"192":{"index":192,"count":1},"193":{"index":193,"count":1},"194":{"index":194,"count":1},"195":{"index":195,"count":1},"196":{"index":196,"count":1},"197":{"index":197,"count":1},"198":{"index":198,"count":1},"200":{"index":200,"count":1},"201":{"index":201,"count":1},"202":{"index":202,"count":1},"205":{"index":205,"count":1},"206":{"index":206,"count":1},"207":{"index":207,"count":1},"208":{"index":208,"count":1},"209":{"index":209,"count":1},"210":{"index":210,"count":1},"211":{"index":211,"count":1},"212":{"index":212,"count":1},"213":{"index":213,"count":1},"214":{"index":214,"count":1},"215":{"index":215,"count":1},"221":{"index":221,"count":1},"222":{"index":222,"count":1},"223":{"index":223,"count":1},"224":{"index":224,"count":1},"225":{"index":225,"count":1},"226":{"index":226,"count":19},"227":{"index":227,"count":19},"229":{"index":229,"count":19},"230":{"index":230,"count":19},"231":{"index":231,"count":3},"233":{"index":233,"count":19},"234":{"index":234,"count":19},"235":{"index":235,"count":3},"236":{"index":236,"count":3},"237":{"index":237,"count":3},"238":{"index":238,"count":16},"239":{"index":239,"count":2},"240":{"index":240,"count":2},"241":{"index":241,"count":14},"242":{"index":242,"count":14},"243":{"index":243,"count":14},"244":{"index":244,"count":19},"245":{"index":245,"count":1},"246":{"index":246,"count":8},"247":{"index":247,"count":8},"249":{"index":249,"count":8},"250":{"index":250,"count":8},"251":{"index":251,"count":8},"252":{"index":252,"count":8},"253":{"index":253,"count":18},"254":{"index":254,"count":10},"255":{"index":255,"count":11},"256":{"index":256,"count":11},"257":{"index":257,"count":11},"258":{"index":258,"count":10},"259":{"index":259,"count":8},"260":{"index":260,"count":1},"261":{"index":261,"count":1},"262":{"index":262,"count":1},"263":{"index":263,"count":1},"264":{"index":264,"count":1},"265":{"index":265,"count":1},"268":{"index":268,"count":1},"272":{"index":272,"count":1},"276":{"index":276,"count":1},"280":{"index":280,"count":1},"284":{"index":284,"count":1},"288":{"index":288,"count":1},"292":{"index":292,"count":1},"296":{"index":296,"count":1},"300":{"index":300,"count":1},"304":{"index":304,"count":1},"308":{"index":308,"count":1},"311":{"index":311,"count":1},"326":{"index":326,"count":1},"327":{"index":327,"count":1},"332":{"index":332,"count":1},"333":{"index":333,"count":1},"334":{"index":334,"count":1},"335":{"index":335,"count":1},"336":{"index":336,"count":1},"337":{"index":337,"count":1},"338":{"index":338,"count":1},"339":{"index":339,"count":1},"340":{"index":340,"count":1},"341":{"index":341,"count":1},"342":{"index":342,"count":1},"343":{"index":343,"count":1},"344":{"index":344,"count":1},"345":{"index":345,"count":1},"357":{"index":357,"count":1},"358":{"index":358,"count":5},"387":{"index":387,"count":1},"388":{"index":388,"count":1},"389":{"index":389,"count":1},"390":{"index":390,"count":1},"391":{"index":391,"count":1},"392":{"index":392,"count":1},"393":{"index":393,"count":1},"394":{"index":394,"count":1},"395":{"index":395,"count":1},"396":{"index":396,"count":1},"401":{"index":401,"count":1},"408":{"index":408,"count":1},"420":{"index":420,"count":1},"430":{"index":430,"count":1},"491":{"index":491,"count":1},"503":{"index":503,"count":1},"515":{"index":515,"count":1},"522":{"index":522,"count":1},"529":{"index":529,"count":1},"536":{"index":536,"count":1},"544":{"index":544,"count":1},"551":{"index":551,"count":1},"561":{"index":561,"count":1},"569":{"index":569,"count":1},"609":{"index":609,"count":1},"634":{"index":634,"count":1},"650":{"index":650,"count":1},"651":{"index":651,"count":1},"652":{"index":652,"count":46},"653":{"index":653,"count":1},"662":{"index":662,"count":1},"663":{"index":663,"count":4},"668":{"index":668,"count":1},"682":{"index":682,"count":1},"683":{"index":683,"count":1},"684":{"index":684,"count":1},"685":{"index":685,"count":1},"686":{"index":686,"count":1},"687":{"index":687,"count":1},"688":{"index":688,"count":1},"689":{"index":689,"count":1},"690":{"index":690,"count":1},"691":{"index":691,"count":2},"692":{"index":692,"count":4},"693":{"index":693,"count":4},"694":{"index":694,"count":4},"695":{"index":695,"count":4},"696":{"index":696,"count":4},"697":{"index":697,"count":4},"698":{"index":698,"count":4},"699":{"index":699,"count":1},"727":{"index":727,"count":1},"730":{"index":730,"count":1},"731":{"index":731,"count":1},"732":{"index":732,"count":2},"733":{"index":733,"count":2},"734":{"index":734,"count":4},"735":{"index":735,"count":4},"736":{"index":736,"count":4},"737":{"index":737,"count":4},"738":{"index":738,"count":4},"739":{"index":739,"count":4},"740":{"index":740,"count":2},"741":{"index":741,"count":2},"742":{"index":742,"count":2},"743":{"index":743,"count":2},"746":{"index":746,"count":4},"747":{"index":747,"count":4},"748":{"index":748,"count":4},"749":{"index":749,"count":4},"750":{"index":750,"count":2},"752":{"index":752,"count":2},"753":{"index":753,"count":2},"754":{"index":754,"count":2},"755":{"index":755,"count":2},"756":{"index":756,"count":2},"757":{"index":757,"count":2},"759":{"index":759,"count":2},"760":{"index":760,"count":2},"761":{"index":761,"count":2},"762":{"index":762,"count":2},"763":{"index":763,"count":2},"764":{"index":764,"count":2},"765":{"index":765,"count":2},"767":{"index":767,"count":2},"768":{"index":768,"count":2},"769":{"index":769,"count":2},"770":{"index":770,"count":2},"771":{"index":771,"count":2},"772":{"index":772,"count":2},"773":{"index":773,"count":4},"774":{"index":774,"count":4},"775":{"index":775,"count":4},"776":{"index":776,"count":4},"777":{"index":777,"count":4},"778":{"index":778,"count":4},"779":{"index":779,"count":2},"780":{"index":780,"count":2},"781":{"index":781,"count":4},"782":{"index":782,"count":2},"783":{"index":783,"count":4},"785":{"index":785,"count":4},"786":{"index":786,"count":4},"787":{"index":787,"count":4},"788":{"index":788,"count":4},"790":{"index":790,"count":4},"791":{"index":791,"count":4},"792":{"index":792,"count":4},"795":{"index":795,"count":4},"796":{"index":796,"count":4},"797":{"index":797,"count":4},"798":{"index":798,"count":4},"799":{"index":799,"count":4},"800":{"index":800,"count":4},"801":{"index":801,"count":4},"802":{"index":802,"count":4},"803":{"index":803,"count":4},"804":{"index":804,"count":4},"805":{"index":805,"count":4},"806":{"index":806,"count":1},"807":{"index":807,"count":4},"808":{"index":808,"count":2},"809":{"index":809,"count":2},"810":{"index":810,"count":2},"822":{"index":822,"count":2},"823":{"index":823,"count":2},"824":{"index":824,"count":1},"825":{"index":825,"count":1},"826":{"index":826,"count":1},"827":{"index":827,"count":1},"828":{"index":828,"count":1},"829":{"index":829,"count":1},"830":{"index":830,"count":1},"831":{"index":831,"count":1},"832":{"index":832,"count":1},"837":{"index":837,"count":2},"838":{"index":838,"count":2},"839":{"index":839,"count":2},"840":{"index":840,"count":2},"847":{"index":847,"count":10},"848":{"index":848,"count":10}},"blocks":{"1":{"index":1,"count":2},"2":{"index":2,"count":2},"3":{"index":3,"count":2},"5":{"index":5,"count":2},"6":{"index":6,"count":2},"7":{"index":7,"count":2},"9":{"index":9,"count":2},"10":{"index":10,"count":2},"11":{"index":11,"count":2},"12":{"index":12,"count":2},"13":{"index":13,"count":2},"21":{"index":21,"count":2},"23":{"index":23,"count":2},"24":{"index":24,"count":2},"26":{"index":26,"count":2},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"54":{"index":54,"count":19},"57":{"index":57,"count":3},"58":{"index":58,"count":2},"59":{"index":59,"count":14},"60":{"index":60,"count":8},"62":{"index":62,"count":11},"64":{"index":64,"count":10},"65":{"index":65,"count":1},"66":{"index":66,"count":1},"87":{"index":87,"count":1},"90":{"index":90,"count":1},"91":{"index":91,"count":1},"92":{"index":92,"count":1},"93":{"index":93,"count":1},"99":{"index":99,"count":5},"185":{"index":185,"count":46},"187":{"index":187,"count":4},"193":{"index":193,"count":2},"194":{"index":194,"count":4},"195":{"index":195,"count":4},"206":{"index":206,"count":2},"207":{"index":207,"count":4},"208":{"index":208,"count":4},"209":{"index":209,"count":2},"210":{"index":210,"count":2},"211":{"index":211,"count":2},"213":{"index":213,"count":2},"215":{"index":215,"count":2},"217":{"index":217,"count":2},"218":{"index":218,"count":2},"219":{"index":219,"count":2},"220":{"index":220,"count":2},"221":{"index":221,"count":4},"222":{"index":222,"count":4},"224":{"index":224,"count":4},"226":{"index":226,"count":4},"227":{"index":227,"count":2},"228":{"index":228,"count":2},"231":{"index":231,"count":2},"232":{"index":232,"count":1},"233":{"index":233,"count":1},"235":{"index":235,"count":2},"236":{"index":236,"count":2},"238":{"index":238,"count":10}},"hash":"638668d47d0e9c3b5b7bf18c5473c238","instrumentor":{"blockCounter":239,"nodeCounter":849,"source":"/**\n * Provides tools for making, routing, adapting, and decorating\n * Q-JSGI web applications.\n *\n * Duck Types\n * ----------\n *\n * A Q-JSGI _app_ is a function that accepts a request and returns a\n * response.  The response may be promised.\n *\n * A Q-JSGI _request_ is an object or a promise for an object that has\n * the following properties:\n *\n * * `method` is the HTTP request method as a string.\n * * `path` is a string, guaranteed to start with `\"/\"`.\n * * `headers` is an object mapping lower-case HTTP headers to\n *   their corresponding values as strings.\n * * `body` is a Q-JSGI content body.\n *\n * A Q-JSGI _response_ is an object or a promise for an object that\n * has the following properties:\n *\n * * `status` is the HTTP response status code as a number.\n * * `headers` is an object mapping lower-case HTTP headers to their\n *   corresponding values as strings.\n * * `body` is a Q-JSGI content body.\n *\n * A Q-JSGI response and request content _body_ can be as simple as an\n * array of strings.  It can be a promise.  In general, it must be an\n * object that has a `forEach` method.  The `forEach` method accepts a\n * `write` function.  It goes without saying that `forEach` returns\n * `undefined`, but it can return a promise for `undefined` that will\n * resolve when it has made all of its `write` calls and the request\n * or response can be closed, re-used, or kept alive..  The `forEach`\n * function may call `write` with a `String` any number of times.  The\n * `String` may be promised.\n *\n * @module\n */\n\n/*\n    Multiplexing Routing:\n        Cap\n        Branch\n        Method\n        Accept\n        Language\n    Trial Routing:\n        FirstFound\n    Decorators:\n        Error\n        Log\n        CookieSession TODO reevaluate\n        PathSession TODO reevaluate\n        Limit TODO\n        Cache TODO\n        Time\n        Decorators\n        Tap\n        Trap\n        Permanent\n        Date\n    Adapters:\n        ParseQuery\n        ContentRequest\n        JsonRequest\n        Json\n        Inspect\n    Producers:\n        Content\n        File\n        FileTree\n        Redirect\n        PermanentRedirect\n        TemporaryRedirect\n        RedirectTree\n        PermanentRedirectTree\n        TemporaryRedirectTree\n    Producer Functions:\n        ok\n        badRequest\n        notFound\n        methodNotAllowed\n        notAcceptable\n        file\n        directory\n        redirect\n        json\n    Utility:\n        etag\n\n*/\n\nrequire(\"collections/shim\");\nvar Q = require(\"q\");\nvar NODE_FS = require(\"fs\");\nvar HTTP = require(\"./http\");\nvar FS = require(\"./fs\");\nvar URL = require(\"url\");\nvar MIME_PARSE = require(\"mimeparse\");\nvar MIME_TYPES = require(\"mime\");\nvar URL = require(\"url\");\nvar inspect = require(\"util\").inspect;\nvar QS = require(\"querystring\");\nvar Cookie = require(\"./http-cookie\");\n\n//var UUID = require(\"uuid\");\nvar UUID = {\n    generate: function () {\n        return Math.random().toString(36).slice(2) + Math.random().toString(36).slice(2);\n    }\n};\n\n/**\n * Makes a  Q-JSGI app that only responds when there is nothing left\n * on the path to route.  If the there is unprocessed data on the\n * path, the returned app either forwards to the `notFound` app or\n * returns a `404 Not Found` response.\n *\n * @param {App} app a Q-JSGI application to\n * respond to this end of the routing chain.\n * @param {App} notFound (optional) defaults\n * to the `notFound` app.\n * @returns {App}\n */\nexports.Cap = function (app, notFound) {\n    notFound = notFound || exports.notFound;\n    return function (request, response) {\n        // TODO Distinguish these cases\n        if (request.pathInfo === \"\" || request.pathInfo === \"/\") {\n            return app(request, response);\n        } else {\n            return notFound(request, response);\n        }\n    };\n};\n\n/**\n * Wraps an app with a function that will observe incoming requests\n * before giving the app an opportunity to respond.  If the \"tap\"\n * function returns a response, it will be used in lieu of forwarding\n * the request to the wrapped app.\n */\nexports.Tap = function (app, tap) {\n    return function (request, response) {\n        var self = this, args = arguments;\n        return Q.when(tap.apply(this, arguments), function (response) {\n            if (response) {\n                return response;\n            } else {\n                return app.apply(self, args);\n            }\n        });\n    };\n}\n\n/**\n * Wraps an app with a \"trap\" function that intercepts and may\n * alter or replace the response of the wrapped application.\n */\nexports.Trap = function (app, trap) {\n    return function (request, response) {\n        return Q.when(app.apply(this, arguments), function (response) {\n            if (response) {\n                response.headers = response.headers || {};\n                return trap(response, request) || response;\n            }\n        });\n    };\n}\n\nexports.Date = function (app, present) {\n    present = present || function () {\n        return new Date();\n    };\n    return exports.Trap(app, function (response, request) {\n        response.headers[\"date\"] = \"\" + present();\n    });\n};\n\nvar farFuture =\n    1000 * // ms\n    60 * // s\n    60 * // m\n    24 * // h\n    365 * // d\n    10; // years\nexports.Permanent = function (app, future) {\n    future = future || function () {\n        return new Date(new Date().getTime() + farFuture);\n    };\n    app = exports.Tap(app, function (request, response) {\n        request.permanent = future;\n    });\n    app = exports.Trap(app, function (response, request) {\n        response.headers[\"expires\"] = \"\" + future();\n    });\n    return app;\n};\n\n/**\n * Makes a Q-JSGI app that branches requests based on the next\n * unprocessed path component.\n * @param {Object * App} paths a mapping from path components (single\n * file or directory names) to Q-JSGI applications for subsequent\n * routing.  The mapping may be a plain JavaScript `Object` record,\n * which must own the mapping properties, or an object that has\n * `has(key)` and `get(key)` methods in its prototype chain.\n * @param {App} notFound a Q-JSGI application\n * that handles requests for which the next file name does not exist\n * in paths.\n * @returns {App}\n */\nexports.Branch = function (paths, notFound) {\n    if (!paths)\n        paths = {};\n    if (!notFound)\n        notFound = exports.notFound;\n    return function (request, response) {\n        if (!/^\\//.test(request.pathInfo)) {\n            return notFound(request, response);\n        }\n        var path = request.pathInfo.slice(1);\n        var parts = path.split(\"/\");\n        var part = decodeURIComponent(parts.shift());\n        if (Object.has(paths, part)) {\n            request.scriptName = request.scriptName + part + \"/\";\n            request.pathInfo = path.slice(part.length);\n            return Object.get(paths, part)(request, response);\n        }\n        return notFound(request, response);\n    };\n};\n\n/**\n * Makes an app that returns a response with static content\n * from memory.\n * @param {Body} body a Q-JSGI\n * response body\n * @param {String} contentType\n * @param {Number} status\n * @returns {App} a Q-JSGI app\n */\nexports.Content = function (body, contentType, status) {\n    return function (request, response) {\n        return {\n            \"status\": status || 200,\n            \"headers\": {\n                \"content-type\": contentType || \"text/plain\"\n            },\n            \"body\": body || \"\"\n        };\n    };\n};\n\n/**\n * Returns a Q-JSGI response with the given content.\n * @param {Body} content (optional) defaults to `[\"\"]`\n * @param {String} contentType (optional) defaults to `\"text/plain\"`\n * @param {Number} status (optional) defaults to `200`\n * @returns {Response}\n */\nexports.content =\nexports.ok = function (content, contentType, status) {\n    status = status || 200;\n    content = content || \"\";\n    if (typeof content === \"string\") {\n        content = [content];\n    }\n    contentType = contentType || \"text/plain\";\n    return {\n        \"status\": status,\n        \"headers\": {\n            \"content-type\": contentType\n        },\n        \"body\": content\n    };\n};\n\n/**\n * @param {String} path\n * @param {String} contentType\n * @returns {App}\n */\nexports.File = function (path, contentType) {\n    return function (request, response) {\n        return exports.file(request, String(path), contentType);\n    };\n};\n\n/**\n * @param {String} path\n * @param {{\n       notFound,\n       file,\n       directory,\n       contentType,\n       redirectSymbolicLinks:Boolean,\n       redirect:Function(location),\n       permanent:Boolean\n * }} options\n * @returns {App}\n */\nexports.FileTree = function (root, options) {\n    if (!options)\n        options = {};\n    options.notFound = options.notFound || exports.notFound;\n    options.file = options.file || exports.file;\n    options.directory = options.directory || exports.directory;\n    root = FS.canonical(root);\n    return function (request, response) {\n        var redirect = options.redirect || (\n            request.permanent || options.permanent ?\n            exports.permanentRedirect :\n            exports.temporaryRedirect\n        );\n        return Q.when(root, function (root) {\n            var path = FS.join(root, request.pathInfo.slice(1));\n            return Q.when(FS.canonical(path), function (canonical) {\n                if (!FS.contains(root, canonical))\n                    return options.notFound(request, response);\n                if (path !== canonical && options.redirectSymbolicLinks)\n                    return redirect(request, FS.relativeFromFile(path, canonical));\n                // TODO: relativeFromFile should be designed for URLs, not generalized paths.\n                return Q.when(FS.stat(canonical), function (stat) {\n                    if (stat.isFile()) {\n                        return options.file(request, canonical, options.contentType);\n                    } else if (stat.isDirectory()) {\n                        return options.directory(request, canonical, options.contentType);\n                    } else {\n                        return options.notFound(request, response);\n                    }\n                });\n            }, function (reason) {\n                return options.notFound(request, response);\n            });\n        });\n    };\n};\n\n/**\n * @param {Request} request\n * @param {String} path\n * @param {String} contentType\n * @returns {Response}\n */\nexports.file = function (request, path, contentType) {\n    // TODO last-modified header\n    contentType = contentType || MIME_TYPES.lookup(path);\n    return Q.when(FS.stat(path), function (stat) {\n        var etag = exports.etag(stat);\n        var range; // undefined or {begin, end}\n        var status = 200;\n        var headers = {\n            \"content-type\": contentType,\n            \"etag\": etag\n        };\n\n        // Partial range requests\n        if (\"range\" in request.headers) {\n            // Invalid cache\n            if (\n                \"if-range\" in request.headers &&\n                etag != request.headers[\"if-range\"]\n            ) {\n                // Normal 200 for entire, altered content\n            } else {\n                // Truncate to the first requested continuous range\n                range = interpretFirstRange(request.headers[\"range\"]);\n                // Like Apache, ignore the range header if it is invalid\n                if (range) {\n                    if (range.end > stat.size)\n                        return exports.responseForStatus(416); // not satisfiable\n                    status = 206; // partial content\n                    headers[\"content-range\"] = (\n                        \"bytes \" +\n                        range.begin + \"-\" + (range.end - 1) +\n                        \"/\" + stat.size\n                    );\n                    headers[\"content-length\"] = \"\" + (range.end - range.begin);\n                }\n            }\n        // Full requests\n        } else {\n            // Cached\n            // We do not use date-based caching\n            // TODO consider if-match?\n            if (etag == request.headers[\"if-none-match\"])\n                return exports.responseForStatus(304);\n            headers[\"content-length\"] = \"\" + stat.size;\n        }\n\n        // TODO sendfile\n        return {\n            \"status\": status,\n            \"headers\": headers,\n            \"body\": FS.open(path, range)\n        };\n    });\n};\n\nvar rangesExpression = /^\\s*bytes\\s*=\\s*(\\d*\\s*-\\s*\\d*\\s*(?:,\\s*\\d*\\s*-\\s*\\d*\\s*)*)$/;\nvar rangeExpression = /^\\s*(\\d*)\\s*-\\s*(\\d*)\\s*$/;\n\nvar interpretRange = function (text, size) {\n    var match = rangeExpression.exec(text);\n    if (!match)\n        return;\n    if (match[1] == \"\" && match[2] == \"\")\n        return;\n    var begin, end;\n    if (match[1] == \"\") {\n        begin = size - match[2];\n        end = size;\n    } else if (match[2] == \"\") {\n        begin = +match[1];\n        end = size;\n    } else {\n        begin = +match[1];\n        end = +match[2] + 1;\n    }\n    return {\n        \"begin\": begin,\n        \"end\": end\n    };\n};\n\nvar interpretFirstRange = exports.interpretFirstRange = function (text, size) {\n    var match = rangesExpression.exec(text);\n    if (!match)\n        return;\n    var texts = match[1].split(/\\s*,\\s*/);\n    var range = interpretRange(texts[0], size);\n    for (var i = 0, ii = texts.length; i < ii; i++) {\n        var next = interpretRange(texts[i], size);\n        if (!next)\n            break;\n        if (next.begin <= range.end) {\n            range.end = next.end;\n        } else {\n            break;\n        }\n    }\n    return range;\n};\n\n/**\n * @param {Stat}\n * @returns {String}\n */\nexports.etag = function (stat) {\n    return [\n        stat.node.ino,\n        stat.size,\n        stat.lastModified().getTime()\n    ].join(\"-\");\n};\n\n/**\n * @param {Request} request\n * @param {String} path\n * @param {Response}\n */\nexports.directory = function (request, path) {\n    return Q.reject(\"directory listing not yet implemented\");\n};\n\n/**\n * @param {String} path\n * @param {Number} status (optional) default is `301`\n * @returns {App}\n */\nexports.PermanentRedirect = function (location, status, tree) {\n    return function (request, response) {\n        return exports.permanentRedirect(request, location, status, tree);\n    };\n};\n\n/**\n * @param {String} path\n * @param {Number} status (optional) default is `301`\n * @returns {App}\n */\nexports.PermanentRedirectTree = function (location, status) {\n    return function (request, response) {\n        return exports.permanentRedirect(request, location, status, true);\n    };\n};\n\n/**\n * @param {String} path\n * @param {Number} status (optional) default is `307`\n * @returns {App}\n */\nexports.TemporaryRedirect = function (location, status, tree) {\n    return function (request, response) {\n        return exports.temporaryRedirect(request, location, status, tree);\n    };\n};\n\n/**\n * @param {String} path\n * @param {Number} status (optional) default is `307`\n * @returns {App}\n */\nexports.TemporaryRedirectTree = function (location, status) {\n    return function (request, response) {\n        return exports.temporaryRedirect(request, location, status, true);\n    };\n};\n\n/**\n * @param {String} path\n * @param {Number} status (optional) default is `307`\n * @returns {App}\n */\nexports.Redirect = function (location, status, tree) {\n    return function (request, response) {\n        return exports.redirect(request, location, status, tree);\n    };\n};\n\n/**\n * @param {String} path\n * @param {Number} status (optional) default is `307`\n * @returns {App}\n */\nexports.RedirectTree = function (location, status) {\n    return function (request, response) {\n        return exports.redirect(request, location, status, true);\n    };\n};\n\nexports.permanentRedirect = function (request, location, status) {\n    return exports.redirect(request, location, status || 301);\n};\n\nexports.permanentRedirectTree = function (request, location, status) {\n    return exports.redirect(request, location, status || 301, true);\n};\n\nexports.temporaryRedirect = function (request, location, status) {\n    return exports.redirect(request, location, status || 307);\n};\n\nexports.temporaryRedirectTree = function (request, location, status) {\n    return exports.redirect(request, location, status || 307, true);\n};\n\nexports.redirectTree = function (request, location, status) {\n    return exports.redirect(request, location, status, true);\n};\n\n/**\n * @param {String} location\n * @param {Number} status (optional) default is `301`\n * @returns {Response}\n */\nexports.redirect = function (request, location, status, tree) {\n\n    // request.permanent gets set by Permanent middleware\n    status = status || (request.permanent ? 301 : 307);\n\n    // ascertain that the location is absolute, per spec\n    location = URL.resolve(request.url, location);\n\n    // redirect into a subtree with the remaining unrouted\n    // portion of the path, if so configured\n    if (tree) {\n        location = URL.resolve(\n            location,\n            request.pathInfo.replace(/^\\//, \"\")\n        );\n    }\n\n    return {\n        \"status\": status,\n        \"headers\": {\n            \"location\": location,\n            \"content-type\": \"text/html\"\n        },\n        \"body\": [\n            'Go to <a href=\"' + location + '\">' + // TODO escape\n            location +\n            \"</a>\"\n        ]\n    };\n};\n\nexports.Proxy = function (app) {\n    if (typeof app === \"string\") {\n        var location = app;\n        app = function (request) {\n            request.url = location;\n            return request;\n        };\n    }\n    return function (request, response) {\n        return Q.when(app.apply(this, arguments), function (request) {\n            return HTTP.request(request);\n        });\n    };\n};\n\nexports.ProxyTree = function (url) {\n    return exports.Proxy(function (request) {\n        request.url = URL.resolve(url, request.pathInfo.replace(/^\\//, \"\"));\n        return request;\n    });\n};\n\n/// branch on HTTP method\n/**\n * @param {Object * App} methods\n * @param {App} notAllowed (optional)\n * @returns {App}\n */\nexports.Method = function (methods, methodNotAllowed) {\n    var keys = Object.keys(methods);\n    if (!methodNotAllowed)\n        methodNotAllowed = exports.methodNotAllowed;\n    return function (request, response) {\n        var method = request.method;\n        if (Object.has(keys, method)) {\n            return Object.get(methods, method)(request, response);\n        } else {\n            return methodNotAllowed(request, response);\n        }\n    };\n};\n\nvar Negotiator = function (requestHeader, responseHeader, respond) {\n    return function (types, notAcceptable) {\n        var keys = Object.keys(types);\n        if (!notAcceptable)\n            notAcceptable = exports.notAcceptable;\n        return function (request, response) {\n            var header = requestHeader;\n            if (typeof header === \"function\") {\n                header = requestHeader(request);\n            }\n            var accept = request.headers[requestHeader] || \"*\";\n            var type = MIME_PARSE.bestMatch(keys, accept);\n            request.terms = request.terms || {};\n            request.terms[responseHeader] = type;\n            if (Object.has(keys, type)) {\n                return Q.when(types[type](request, response), function (response) {\n                    if (\n                        respond !== null &&\n                        response &&\n                        response.status === 200 &&\n                        response.headers\n                    ) {\n                        response.headers[responseHeader] = type;\n                    }\n                    return response;\n                });\n            } else {\n                return notAcceptable(request, response);\n            }\n        };\n    };\n};\n\n/// branch on HTTP content negotiation\n/**\n * Routes based on content negotiation, between the request's `accept`\n * header and the application's list of possible content types.\n *\n * @param {Object * App} types mapping content types to apps that can\n * handle them.\n * @param {App} notAcceptable\n * @returns {App}\n */\nexports.ContentType = Negotiator(\"accept\", \"content-type\");\nexports.Language = Negotiator(\"accept-language\", \"language\");\nexports.Charset = Negotiator(\"accept-charset\", \"charset\");\nexports.Encoding = Negotiator(\"accept-encoding\", \"encoding\");\nexports.Host = Negotiator(function (request) {\n    return (request.headers.host || \"*\") + \":\" + request.port;\n}, \"host\", null);\n\n// Branch on a selector function based on the request\nexports.Select = function (select) {\n    return function (request, response) {\n        return Q.when(select(request, response), function (app) {\n            return app(request, response);\n        });\n    };\n};\n\n// Create an application from the \"app\" exported by a module\nexports.require = function (id, _require) {\n    _require = _require || require;\n    var async = _require.async || _require;\n    var exports = async(id);\n    return function (request, response) {\n        return Q.when(exports, function (exports) {\n            return exports.app(request, response);\n        });\n    }\n};\n\n/**\n * Decorates a JSGI application such that rejected response promises\n * get translated into `500` server error responses with no content.\n *\n * @param {App} app\n * @returns {App}\n */\nexports.Error = function (app, debug) {\n    return function (request, response) {\n        return Q.when(app(request, response), null, function (error) {\n            if (!debug)\n                error = undefined;\n            return exports.responseForStatus(500, error && error.stack || error);\n        });\n    };\n};\n\n/**\n * Decorates a Q-JSGI application such that all requests and responses\n * are logged.\n *\n * @param {App} app\n * @returns {App}\n */\nexports.Log = function (app, log, stamp) {\n    log = log || console.log;\n    stamp = stamp || function (message) {\n        return new Date().toISOString() + \" \" + message;\n    };\n    return function (request, response) {\n        var remoteHost =\n            request.remoteHost + \":\" +\n            request.remotePort;\n        var requestLine =\n            request.method + \" \" +\n            request.path + \" \" +\n            \"HTTP/\" + request.version.join(\".\");\n        log(stamp(\n            remoteHost + \" \" +\n            \"-->     \" +\n            requestLine\n        ));\n        return Q.when(app(request, response), function (response) {\n            if (response) {\n                log(stamp(\n                    remoteHost + \" \" +\n                    \"<== \" +\n                    response.status + \" \" +\n                    requestLine + \" \" +\n                    (response.headers[\"content-length\"] || \"-\")\n                ));\n            } else {\n                log(stamp(\n                    remoteHost + \" \" +\n                    \"... \" +\n                    \"... \" +\n                    requestLine + \" (response undefined / presumed streaming)\"\n                ));\n            }\n            return response;\n        }, function (reason) {\n            log(stamp(\n                remoteHost + \" \" +\n                \"!!!     \" +\n                requestLine + \" \" +\n                (reason && reason.message || reason)\n            ));\n            return Q.reject(reason);\n        });\n    };\n};\n\n/**\n * Decorates a Q-JSGI application such that all responses have an\n * X-Response-Time header with the time between the request and the\n * response in milliseconds, not including any time needed to stream\n * the body to the client.\n *\n * @param {App} app\n * @returns {App}\n */\nexports.Time = function (app) {\n    return function (request, response) {\n        var start = new Date();\n        return Q.when(app(request, response), function (response) {\n            var stop = new Date();\n            if (response && response.headers) {\n                response.headers[\"x-response-time\"] = \"\" + (stop - start);\n            }\n            return response;\n        });\n    };\n};\n\n/**\n * Decorates a Q-JSGI application such that all responses have the\n * given additional headers.  These headers do not override the\n * application's given response headers.\n *\n * @param {Object} headers\n * @param {App} app decorated application.\n */\nexports.Headers = function (app, headers) {\n    return function (request, response) {\n        return Q.when(app(request, response), function (response) {\n            if (response && response.headers) {\n                Object.keys(headers).forEach(function (key) {\n                    if (!(key in response.headers)) {\n                        response.headers[key] = headers[key];\n                    }\n                });\n            }\n            return response;\n        });\n    };\n};\n\n/**\n * Wraps a Q-JSGI application in a sequence of decorators.\n * @param {Array * Decorator} decorators\n * @param {App} app\n * @returns {App}\n */\nexports.Decorators = function (decorators, app) {\n    decorators.reversed().forEach(function (Middleware) {\n        app = Middleware(app);\n    });\n    return app;\n};\n\n/**\n * Wraps a Q-JSGI application such that the child application may\n * simply return an object, which will in turn be serialized into a\n * Q-JSGI response.\n *\n * @param {Function(Request):Object} app an application that accepts a\n * request and returns a JSON serializable object.\n * @returns {App}\n */\nexports.Json = function (app, visitor, tabs) {\n    return function (request, response) {\n        return Q.when(app(request, response), function (object) {\n            return exports.json(object, visitor, tabs);\n        });\n    };\n};\n\n/**\n * @param {Object} content data to serialize as JSON\n * @param {Function} visitor\n * @param {Number|String} tabs\n * @returns {Response}\n */\nexports.json = function (content, visitor, tabs) {\n    try {\n        var json = JSON.stringify(content, visitor, tabs);\n    } catch (exception) {\n        return Q.reject(exception);\n    }\n    return exports.ok([json]);\n};\n\n/**\n */\nexports.ParseQuery = function (app) {\n    return function (request, response) {\n        request.query = QS.parse(URL.parse(request.url).query || \"\");\n        return app(request, response);\n    };\n};\n\n/**\n * Wraps an app such that it expects to receive content\n * in the request body and passes that content as a string\n * to as the second argument to the wrapped JSGI app.\n *\n * @param {Function(Request, Object):Response} app\n * @returns {App}\n */\nexports.ContentRequest = function (app) {\n    return function (request, response) {\n        return Q.when(request.body.read(), function (body) {\n            return app(body, request, response);\n        });\n    };\n};\n\n/**\n * @param {Function(Request, Object):Response} app\n * @param {App} badRequest\n * @returns {App}\n */\nexports.JsonRequest = function (app, badRequest) {\n    if (!badRequest)\n        badRequest = exports.badRequest;\n    return exports.ContentRequest(function (content, request, response) {\n        try {\n            var object = JSON.parse(content);\n        } catch (error) {\n            return badRequest(request, error);\n        }\n        return app(object, request, response);\n    });\n};\n\n/**\n * @param {Function(Request):Object}\n * @returns {App}\n */\nexports.Inspect = function (app) {\n    return exports.Method({\"GET\": function (request, response) {\n        return Q.when(app(request, response), function (object) {\n            return {\n                \"status\": 200,\n                \"headers\": {\n                    \"content-type\": \"text/plain\"\n                },\n                \"body\": [inspect(object)]\n            }\n        });\n    }});\n};\n\n/**\n * Creates a persistent session associated with the HTTP client's\n * cookie.  These sessions are intended to persist for the duration\n * that a user visits your site in the same browser.\n *\n * @param {Function(session):App} Session a function that creates a\n * new Q-JSGI application for each new session.\n * @returns {App}\n */\nexports.CookieSession = function (Session) {\n    var sessions = {};\n    function nextUuid() {\n        while (true) {\n            var uuid = UUID.generate();\n            if (!Object.has(sessions, uuid))\n                return uuid;\n        }\n    }\n    return function (request, response) {\n        var cookie = QS.parse(request.headers[\"cookie\"], /[;,]/g);\n        var sessionIds = cookie[\"session.id\"];\n        if (!Array.isArray(sessionIds))\n            sessionIds = [sessionIds];\n        sessionIds = sessionIds.filter(function (sessionId) {\n            return Object.has(sessions, sessionId);\n        });\n        // verifying cookie\n        if (/^\\/~session\\//.test(request.pathInfo)) {\n            if (cookie[\"session.id\"])\n                return exports.TemporaryRedirect(\"../\")(request, response);\n            // TODO more flexible session error page\n            return {\n                \"status\": 404,\n                \"headers\": {\n                    \"content-type\": \"text/plain\"\n                },\n                \"body\": [\n                    \"Access requires cookies\"\n                ]\n            }\n        // session exists\n        } else if (\n            Object.has(cookie, \"session.id\") &&\n            sessionIds.length\n        ) {\n            var session = sessions[sessionIds[0]];\n            session.lastAccess = new Date();\n            request.session = session;\n            return session.route(request, response);\n        // new session\n        } else {\n            var session = {\n                \"id\": nextUuid(),\n                \"lastAccess\": new Date()\n            };\n            sessions[session.id] = session;\n            session.route = Session(session);\n            var response = exports.TemporaryRedirect(request.scriptInfo + \"~session/\")(request, response);\n            response.headers[\"set-cookie\"] = Cookie.stringify(\n                \"session.id\", session.id, {\n                    \"path\": request.scriptInfo\n                }\n            );\n            return response;\n        }\n    };\n};\n\n/**\n * A Q-JSGI application that creates a session associated with a\n * unique path.  These sessions are intended to persist for the\n * duration that a user remains in a single browser window.\n *\n * @param {Function(session):App} a function that creates a new Q-JSGI\n * application for each new session.  It receives an object with the\n * session's `id` and `lastAccess` `Date`.\n * @returns {App}\n */\nexports.PathSession = function (Session) {\n    var sessions = {};\n    function nextUuid() {\n        while (true) {\n            var uuid = UUID.generate();\n            if (!Object.has(sessions, uuid))\n                return uuid;\n        }\n    }\n    return function (request, response) {\n        // TODO request.pathInfo and request.scriptInfo\n        if (request.pathInfo == \"/\") {\n            // new session\n            var session = {\n                \"id\": nextUuid(),\n                \"lastAccess\": new Date()\n            };\n            sessions[session.id] = session;\n            session.route = Session(session);\n            return exports.Json(function (request, response) {\n                return session;\n            })(request, response);\n        } else if (Object.has(sessions, request.pathInfo.slice(1))) {\n            return Object.get(sessions, request.pathInfo.slice(1)).route(request, response);\n        } else {\n            return exports.responseForStatus(404, \"Session does not exist\");\n        }\n    };\n};\n\n/**\n * Returns the response of the first application that returns a\n * non-404 response status.\n *\n * @param {Array * App} apps a cascade of applications to try\n * successively until one of them returns a non-404 status.\n * @returns {App}\n */\nexports.FirstFound = function (cascade) {\n    return function (request, response) {\n        var i = 0, ii = cascade.length;\n        function next() {\n            var response = cascade[i++](request, response);\n            if (i < ii) {\n                return Q.when(response, function (response) {\n                    if (response.status === 404) {\n                        return next();\n                    } else {\n                        return response;\n                    }\n                });\n            } else {\n                return response;\n            }\n        }\n        return next();\n    };\n};\n\n/**\n * {Object * String} a mapping of HTTP status codes to\n * their standard descriptions.\n */\n// Every standard HTTP code mapped to the appropriate message.\n// Stolen from Rack which stole from Mongrel\nexports.HTTP_STATUS_CODES = {\n    100 : 'Continue',\n    101 : 'Switching Protocols',\n    102 : 'Processing',\n    200 : 'OK',\n    201 : 'Created',\n    202 : 'Accepted',\n    203 : 'Non-Authoritative Information',\n    204 : 'No Content',\n    205 : 'Reset Content',\n    206 : 'Partial Content',\n    207 : 'Multi-Status',\n    300 : 'Multiple Choices',\n    301 : 'Moved Permanently',\n    302 : 'Found',\n    303 : 'See Other',\n    304 : 'Not Modified',\n    305 : 'Use Proxy',\n    307 : 'Temporary Redirect',\n    400 : 'Bad Request',\n    401 : 'Unauthorized',\n    402 : 'Payment Required',\n    403 : 'Forbidden',\n    404 : 'Not Found',\n    405 : 'Method Not Allowed',\n    406 : 'Not Acceptable',\n    407 : 'Proxy Authentication Required',\n    408 : 'Request Timeout',\n    409 : 'Conflict',\n    410 : 'Gone',\n    411 : 'Length Required',\n    412 : 'Precondition Failed',\n    413 : 'Request Entity Too Large',\n    414 : 'Request-URI Too Large',\n    415 : 'Unsupported Media Type',\n    416 : 'Request Range Not Satisfiable',\n    417 : 'Expectation Failed',\n    422 : 'Unprocessable Entity',\n    423 : 'Locked',\n    424 : 'Failed Dependency',\n    500 : 'Internal Server Error',\n    501 : 'Not Implemented',\n    502 : 'Bad Gateway',\n    503 : 'Service Unavailable',\n    504 : 'Gateway Timeout',\n    505 : 'HTTP Version Not Supported',\n    507 : 'Insufficient Storage'\n};\n\n/**\n * {Object * Number} a mapping from HTTP status descriptions\n * to HTTP status codes.\n */\nexports.HTTP_STATUS_MESSAGES = {};\nfor (var code in exports.HTTP_STATUS_CODES)\n    exports.HTTP_STATUS_MESSAGES[exports.HTTP_STATUS_CODES[code]] = +code;\n\n/**\n * Determines whether an HTTP response should have a\n * response body, based on its status code.\n * @param {Number} status\n * @returns whether the HTTP response for the given status\n * code has content.\n */\nexports.STATUS_WITH_NO_ENTITY_BODY = function (status) {\n    return (status >= 100 && status <= 199) ||\n        status == 204 || status == 304;\n};\n\n/**\n * @param {Number} status\n * @returns {Function(Request) :Response} a JSGI app that returns\n * a plain text response with the given status code.\n */\nexports.appForStatus = function (status) {\n    return function (request) {\n        return exports.responseForStatus(status, request.method + \" \" + request.path);\n    };\n};\n\n/**\n * @param {Number} status an HTTP status code\n * @param {String} message (optional) a message to include\n * in the response body.\n * @returns a JSGI HTTP response object with the given status\n * code and message as its body, if the status supports\n * a body.\n */\nexports.responseForStatus = function(status, optMessage) {\n    if (exports.HTTP_STATUS_CODES[status] === undefined)\n        throw \"Unknown status code\";\n\n    var message = exports.HTTP_STATUS_CODES[status];\n\n    if (optMessage)\n        message += \": \" + optMessage;\n\n    var content = message + \"\\r\\n\";\n\n    var response = {\n        \"status\": status,\n        \"headers\": {}\n    };\n\n    // RFC 2616, 10.2.5:\n    // The 204 response MUST NOT include a message-body, and thus is always\n    // terminated by the first empty line after the header fields.\n    // RFC 2616, 10.3.5:\n    // The 304 response MUST NOT contain a message-body, and thus is always\n    // terminated by the first empty line after the header fields.\n    if (!exports.STATUS_WITH_NO_ENTITY_BODY(status)) {\n        response.headers['content-length'] = content.length;\n        response.headers['content-type'] = 'text/plain';\n        response.body = [content];\n    }\n\n    return response;\n};\n\n/**\n * {App} an application that returns a 400 response.\n */\nexports.badRequest = exports.appForStatus(400);\n/**\n * {App} an application that returns a 404 response.\n */\nexports.notFound = exports.appForStatus(404);\n/**\n * {App} an application that returns a 405 response.\n */\nexports.methodNotAllowed = exports.appForStatus(405);\n/**\n * {App} an application that returns a 405 response.\n */\nexports.noLanguage =\nexports.notAcceptable = exports.appForStatus(406);\n\nexports.Normalize = function (app) {\n    return function (request, response) {\n        var request = HTTP.normalizeRequest(request);\n        return Q.when(app(request, response), function (response) {\n            return HTTP.normalizeResponse(response);\n        });\n    };\n};\n\nexports.RedirectTrap = function (app, maxRedirects) {\n    maxRedirects = maxRedirects || 20;\n    return function (request, response) {\n        var remaining = maxRedirects;\n        var deferred = Q.defer();\n        var self = this;\n        var args = arguments;\n\n        request = HTTP.normalizeRequest(request);\n\n        // try redirect loop\n        function next() {\n            Q.fcall(function () {\n                return app(request, response);\n            })\n            .then(function (response) {\n                if (exports.isRedirect(response)) {\n                    if (remaining--) {\n                        request.url = response.headers.location;\n                        next();\n                    } else {\n                        throw new Error(\"Maximum redirects.\");\n                    }\n                } else {\n                    deferred.resolve(response);\n                }\n            })\n            .fail(deferred.reject)\n        }\n        next();\n\n        return deferred.promise;\n    };\n};\n\nexports.isRedirect = function (response) {\n    return isRedirect[response.status] || false;\n};\n\nvar isRedirect = {\n    301: true,\n    302: true,\n    303: true,\n    307: true\n};\n\nexports.CookieJar = function (app) {\n    var hostCookies = {}; // to {} of pathCookies to [] of cookies\n    return function (request) {\n\n        var hosts = allHostsContaining(request.headers.host);\n\n        var now = new Date();\n\n        var requestCookies = concat(hosts.map(function (host) {\n\n            // delete expired cookies\n            for (var host in hostCookies) {\n                var pathCookies = hostCookies[host];\n                for (var path in pathCookies) {\n                    var cookies = pathCookies[path];\n                    for (var name in cookies) {\n                        var cookie = cookies[name];\n                        if (cookie.expires && cookie.expires > now) {\n                            delete cookie[name];\n                        }\n                    }\n                }\n            }\n\n            // collect applicable cookies\n            return concat(\n                Object.keys(hostCookies)\n                .map(function (host) {\n                    if (!hostContains(host, request.headers.host))\n                        return [];\n                    var pathCookies = hostCookies[host];\n                    return concat(\n                        Object.keys(pathCookies)\n                        .map(function (path) {\n                            if (!pathContains(path, request.path))\n                                return [];\n                            var cookies = pathCookies[path];\n                            return (\n                                Object.keys(cookies)\n                                .map(function (name) {\n                                    return cookies[name];\n                                })\n                                .filter(function (cookie) {\n                                    return cookie.secure ?\n                                        request.ssl :\n                                        true;\n                                })\n                            );\n                        })\n                    )\n                })\n            );\n\n        }));\n\n        if (requestCookies.length) {\n            request.headers[\"cookie\"] = (\n                requestCookies\n                .map(function (cookie) {\n                    return Cookie.stringify(\n                        cookie.key,\n                        cookie.value,\n                        cookie\n                    );\n                })\n                .join(\"; \")\n            );\n        }\n\n        return Q.when(app.apply(this, arguments), function (response) {\n            response.headers = response.headers || {};\n            if (response.headers[\"set-cookie\"]) {\n                var requestHost = ipRe.test(request.headers.host) ?\n                    request.headers.host :\n                    \".\" + request.headers.host;\n                // normalize to array\n                if (!Array.isArray(response.headers[\"set-cookie\"])) {\n                    response.headers[\"set-cookie\"] = [response.headers[\"set-cookie\"]];\n                }\n                response.headers[\"set-cookie\"].forEach(function (cookie) {\n                    var date = response.headers[\"date\"] ?\n                        new Date(response.headers[\"date\"]) :\n                        new Date();\n                    cookie = Cookie.parse(cookie, date);\n                    // ignore illegal host\n                    if (cookie.host && !hostContains(requestHost, cookie.host))\n                        delete cookie.host;\n                    var host = requestHost || cookie.host;\n                    var path = cookie.path || \"/\";\n                    var pathCookies = hostCookies[host] = hostCookies[host] || {};\n                    var cookies = pathCookies[path] = pathCookies[path] || {};\n                    cookies[cookie.key] = cookie;\n                })\n                delete response.headers[\"set-cookie\"];\n            }\n\n            return response;\n        });\n\n    };\n};\n\nvar ipRe = /^\\d+\\.\\d+\\.\\d+\\.\\d+$/;\n\nfunction allHostsContaining(content) {\n    if (ipRe.test(content)) {\n        return [content];\n    } if (content === \"localhost\") {\n        return [content];\n    } else {\n        var parts = content.split(\".\");\n        var hosts = [];\n        while (parts.length > 1) {\n            hosts.push(\".\" + parts.join(\".\"));\n            parts.shift();\n        }\n        return hosts;\n    }\n}\n\nfunction hostContains(container, content) {\n    if (ipRe.test(container) || ipRe.test(content)) {\n        return container === content;\n    } else if (/^\\./.test(container)) {\n        return (\n            content.lastIndexOf(container) ===\n            content.length - container.length\n        ) || (\n            container.slice(1) === content\n        );\n    } else {\n        return container === content;\n    }\n};\n\nfunction pathContains(container, content) {\n    if (/^\\/$/.test(container)) {\n        return content.indexOf(container) === 0;\n    } else {\n        return (\n            content === container ||\n            content.indexOf(container + \"/\") === 0\n        );\n    }\n}\n\nfunction concat(arrays) {\n    return [].concat.apply([], arrays);\n}","nodes":{"0":{"loc":{"start":{"line":94,"column":0},"end":{"line":94,"column":28}},"id":0},"1":{"loc":{"start":{"line":94,"column":0},"end":{"line":94,"column":27}},"id":1},"2":{"loc":{"start":{"line":95,"column":0},"end":{"line":95,"column":21}},"id":2},"3":{"loc":{"start":{"line":95,"column":8},"end":{"line":95,"column":20}},"id":3},"4":{"loc":{"start":{"line":96,"column":0},"end":{"line":96,"column":28}},"id":4},"5":{"loc":{"start":{"line":96,"column":14},"end":{"line":96,"column":27}},"id":5},"6":{"loc":{"start":{"line":97,"column":0},"end":{"line":97,"column":29}},"id":6},"7":{"loc":{"start":{"line":97,"column":11},"end":{"line":97,"column":28}},"id":7},"8":{"loc":{"start":{"line":98,"column":0},"end":{"line":98,"column":25}},"id":8},"9":{"loc":{"start":{"line":98,"column":9},"end":{"line":98,"column":24}},"id":9},"10":{"loc":{"start":{"line":99,"column":0},"end":{"line":99,"column":25}},"id":10},"11":{"loc":{"start":{"line":99,"column":10},"end":{"line":99,"column":24}},"id":11},"12":{"loc":{"start":{"line":100,"column":0},"end":{"line":100,"column":38}},"id":12},"13":{"loc":{"start":{"line":100,"column":17},"end":{"line":100,"column":37}},"id":13},"14":{"loc":{"start":{"line":101,"column":0},"end":{"line":101,"column":33}},"id":14},"15":{"loc":{"start":{"line":101,"column":17},"end":{"line":101,"column":32}},"id":15},"16":{"loc":{"start":{"line":102,"column":0},"end":{"line":102,"column":25}},"id":16},"17":{"loc":{"start":{"line":102,"column":10},"end":{"line":102,"column":24}},"id":17},"18":{"loc":{"start":{"line":103,"column":0},"end":{"line":103,"column":38}},"id":18},"19":{"loc":{"start":{"line":103,"column":21},"end":{"line":103,"column":29}},"id":19},"20":{"loc":{"start":{"line":104,"column":0},"end":{"line":104,"column":32}},"id":20},"21":{"loc":{"start":{"line":104,"column":9},"end":{"line":104,"column":31}},"id":21},"22":{"loc":{"start":{"line":105,"column":0},"end":{"line":105,"column":38}},"id":22},"23":{"loc":{"start":{"line":105,"column":13},"end":{"line":105,"column":37}},"id":23},"24":{"loc":{"start":{"line":108,"column":0},"end":{"line":112,"column":2}},"id":24},"25":{"loc":{"start":{"line":110,"column":8},"end":{"line":110,"column":89}},"id":25},"26":{"loc":{"start":{"line":110,"column":15},"end":{"line":110,"column":88}},"id":26},"27":{"loc":{"start":{"line":110,"column":15},"end":{"line":110,"column":50}},"id":27},"28":{"loc":{"start":{"line":110,"column":37},"end":{"line":110,"column":41}},"id":28},"29":{"loc":{"start":{"line":110,"column":26},"end":{"line":110,"column":28}},"id":29},"30":{"loc":{"start":{"line":110,"column":53},"end":{"line":110,"column":88}},"id":30},"31":{"loc":{"start":{"line":110,"column":75},"end":{"line":110,"column":79}},"id":31},"32":{"loc":{"start":{"line":110,"column":64},"end":{"line":110,"column":66}},"id":32},"33":{"loc":{"start":{"line":126,"column":0},"end":{"line":136,"column":2}},"id":33},"34":{"loc":{"start":{"line":127,"column":4},"end":{"line":127,"column":44}},"id":34},"35":{"loc":{"start":{"line":127,"column":15},"end":{"line":127,"column":43}},"id":35},"36":{"loc":{"start":{"line":128,"column":4},"end":{"line":135,"column":6}},"id":36},"37":{"loc":{"start":{"line":130,"column":12},"end":{"line":130,"column":63}},"id":37},"38":{"loc":{"start":{"line":130,"column":12},"end":{"line":130,"column":35}},"id":38},"39":{"loc":{"start":{"line":130,"column":39},"end":{"line":130,"column":63}},"id":39},"40":{"loc":{"start":{"line":131,"column":12},"end":{"line":131,"column":42}},"id":40},"41":{"loc":{"start":{"line":131,"column":19},"end":{"line":131,"column":41}},"id":41},"42":{"loc":{"start":{"line":133,"column":12},"end":{"line":133,"column":47}},"id":42},"43":{"loc":{"start":{"line":133,"column":19},"end":{"line":133,"column":46}},"id":43},"44":{"loc":{"start":{"line":144,"column":0},"end":{"line":161,"column":0}},"id":44},"45":{"loc":{"start":{"line":145,"column":4},"end":{"line":154,"column":6}},"id":45},"46":{"loc":{"start":{"line":146,"column":8},"end":{"line":146,"column":42}},"id":46},"47":{"loc":{"start":{"line":147,"column":8},"end":{"line":153,"column":11}},"id":47},"48":{"loc":{"start":{"line":147,"column":15},"end":{"line":153,"column":10}},"id":48},"49":{"loc":{"start":{"line":147,"column":22},"end":{"line":147,"column":48}},"id":49},"50":{"loc":{"start":{"line":149,"column":16},"end":{"line":149,"column":32}},"id":50},"51":{"loc":{"start":{"line":151,"column":16},"end":{"line":151,"column":45}},"id":51},"52":{"loc":{"start":{"line":151,"column":23},"end":{"line":151,"column":44}},"id":52},"53":{"loc":{"start":{"line":161,"column":0},"end":{"line":172,"column":0}},"id":53},"54":{"loc":{"start":{"line":162,"column":4},"end":{"line":169,"column":6}},"id":54},"55":{"loc":{"start":{"line":163,"column":8},"end":{"line":168,"column":11}},"id":55},"56":{"loc":{"start":{"line":163,"column":15},"end":{"line":168,"column":10}},"id":56},"57":{"loc":{"start":{"line":163,"column":22},"end":{"line":163,"column":48}},"id":57},"58":{"loc":{"start":{"line":165,"column":16},"end":{"line":165,"column":58}},"id":58},"59":{"loc":{"start":{"line":165,"column":35},"end":{"line":165,"column":57}},"id":59},"60":{"loc":{"start":{"line":166,"column":16},"end":{"line":166,"column":59}},"id":60},"61":{"loc":{"start":{"line":166,"column":23},"end":{"line":166,"column":58}},"id":61},"62":{"loc":{"start":{"line":166,"column":23},"end":{"line":166,"column":46}},"id":62},"63":{"loc":{"start":{"line":172,"column":0},"end":{"line":179,"column":2}},"id":63},"64":{"loc":{"start":{"line":173,"column":4},"end":{"line":175,"column":6}},"id":64},"65":{"loc":{"start":{"line":173,"column":14},"end":{"line":175,"column":5}},"id":65},"66":{"loc":{"start":{"line":174,"column":8},"end":{"line":174,"column":26}},"id":66},"67":{"loc":{"start":{"line":176,"column":4},"end":{"line":178,"column":7}},"id":67},"68":{"loc":{"start":{"line":176,"column":11},"end":{"line":178,"column":6}},"id":68},"69":{"loc":{"start":{"line":177,"column":8},"end":{"line":177,"column":50}},"id":69},"70":{"loc":{"start":{"line":177,"column":35},"end":{"line":177,"column":49}},"id":70},"71":{"loc":{"start":{"line":177,"column":40},"end":{"line":177,"column":49}},"id":71},"72":{"loc":{"start":{"line":181,"column":0},"end":{"line":187,"column":7}},"id":72},"73":{"loc":{"start":{"line":182,"column":4},"end":{"line":187,"column":6}},"id":73},"74":{"loc":{"start":{"line":182,"column":4},"end":{"line":186,"column":7}},"id":74},"75":{"loc":{"start":{"line":182,"column":4},"end":{"line":185,"column":6}},"id":75},"76":{"loc":{"start":{"line":182,"column":4},"end":{"line":184,"column":6}},"id":76},"77":{"loc":{"start":{"line":182,"column":4},"end":{"line":183,"column":6}},"id":77},"78":{"loc":{"start":{"line":188,"column":0},"end":{"line":199,"column":2}},"id":78},"79":{"loc":{"start":{"line":189,"column":4},"end":{"line":191,"column":6}},"id":79},"80":{"loc":{"start":{"line":189,"column":13},"end":{"line":191,"column":5}},"id":80},"81":{"loc":{"start":{"line":190,"column":8},"end":{"line":190,"column":58}},"id":81},"82":{"loc":{"start":{"line":190,"column":24},"end":{"line":190,"column":56}},"id":82},"83":{"loc":{"start":{"line":190,"column":24},"end":{"line":190,"column":44}},"id":83},"84":{"loc":{"start":{"line":192,"column":4},"end":{"line":194,"column":7}},"id":84},"85":{"loc":{"start":{"line":192,"column":10},"end":{"line":194,"column":6}},"id":85},"86":{"loc":{"start":{"line":193,"column":8},"end":{"line":193,"column":35}},"id":86},"87":{"loc":{"start":{"line":195,"column":4},"end":{"line":197,"column":7}},"id":87},"88":{"loc":{"start":{"line":195,"column":10},"end":{"line":197,"column":6}},"id":88},"89":{"loc":{"start":{"line":196,"column":8},"end":{"line":196,"column":52}},"id":89},"90":{"loc":{"start":{"line":196,"column":38},"end":{"line":196,"column":51}},"id":90},"91":{"loc":{"start":{"line":196,"column":43},"end":{"line":196,"column":51}},"id":91},"92":{"loc":{"start":{"line":198,"column":4},"end":{"line":198,"column":15}},"id":92},"93":{"loc":{"start":{"line":214,"column":0},"end":{"line":233,"column":2}},"id":93},"94":{"loc":{"start":{"line":216,"column":8},"end":{"line":216,"column":19}},"id":94},"95":{"loc":{"start":{"line":218,"column":8},"end":{"line":218,"column":36}},"id":95},"96":{"loc":{"start":{"line":219,"column":4},"end":{"line":232,"column":6}},"id":96},"97":{"loc":{"start":{"line":220,"column":13},"end":{"line":220,"column":41}},"id":97},"98":{"loc":{"start":{"line":221,"column":12},"end":{"line":221,"column":47}},"id":98},"99":{"loc":{"start":{"line":221,"column":19},"end":{"line":221,"column":46}},"id":99},"100":{"loc":{"start":{"line":223,"column":8},"end":{"line":223,"column":45}},"id":100},"101":{"loc":{"start":{"line":223,"column":19},"end":{"line":223,"column":44}},"id":101},"102":{"loc":{"start":{"line":224,"column":8},"end":{"line":224,"column":36}},"id":102},"103":{"loc":{"start":{"line":224,"column":20},"end":{"line":224,"column":35}},"id":103},"104":{"loc":{"start":{"line":225,"column":8},"end":{"line":225,"column":53}},"id":104},"105":{"loc":{"start":{"line":225,"column":19},"end":{"line":225,"column":52}},"id":105},"106":{"loc":{"start":{"line":225,"column":38},"end":{"line":225,"column":51}},"id":106},"107":{"loc":{"start":{"line":226,"column":12},"end":{"line":226,"column":35}},"id":107},"108":{"loc":{"start":{"line":227,"column":12},"end":{"line":227,"column":65}},"id":108},"109":{"loc":{"start":{"line":227,"column":33},"end":{"line":227,"column":64}},"id":109},"110":{"loc":{"start":{"line":227,"column":33},"end":{"line":227,"column":58}},"id":110},"111":{"loc":{"start":{"line":228,"column":12},"end":{"line":228,"column":55}},"id":111},"112":{"loc":{"start":{"line":228,"column":31},"end":{"line":228,"column":54}},"id":112},"113":{"loc":{"start":{"line":229,"column":12},"end":{"line":229,"column":62}},"id":113},"114":{"loc":{"start":{"line":229,"column":19},"end":{"line":229,"column":61}},"id":114},"115":{"loc":{"start":{"line":229,"column":29},"end":{"line":229,"column":42}},"id":115},"116":{"loc":{"start":{"line":231,"column":8},"end":{"line":231,"column":43}},"id":116},"117":{"loc":{"start":{"line":231,"column":15},"end":{"line":231,"column":42}},"id":117},"118":{"loc":{"start":{"line":244,"column":0},"end":{"line":254,"column":2}},"id":118},"119":{"loc":{"start":{"line":245,"column":4},"end":{"line":253,"column":6}},"id":119},"120":{"loc":{"start":{"line":246,"column":8},"end":{"line":252,"column":10}},"id":120},"121":{"loc":{"start":{"line":247,"column":22},"end":{"line":247,"column":35}},"id":121},"122":{"loc":{"start":{"line":249,"column":32},"end":{"line":249,"column":59}},"id":122},"123":{"loc":{"start":{"line":251,"column":20},"end":{"line":251,"column":30}},"id":123},"124":{"loc":{"start":{"line":263,"column":0},"end":{"line":278,"column":2}},"id":124},"125":{"loc":{"start":{"line":265,"column":4},"end":{"line":265,"column":27}},"id":125},"126":{"loc":{"start":{"line":265,"column":13},"end":{"line":265,"column":26}},"id":126},"127":{"loc":{"start":{"line":266,"column":4},"end":{"line":266,"column":28}},"id":127},"128":{"loc":{"start":{"line":266,"column":14},"end":{"line":266,"column":27}},"id":128},"129":{"loc":{"start":{"line":267,"column":8},"end":{"line":267,"column":35}},"id":129},"130":{"loc":{"start":{"line":268,"column":8},"end":{"line":268,"column":28}},"id":130},"131":{"loc":{"start":{"line":270,"column":4},"end":{"line":270,"column":46}},"id":131},"132":{"loc":{"start":{"line":270,"column":18},"end":{"line":270,"column":45}},"id":132},"133":{"loc":{"start":{"line":271,"column":4},"end":{"line":277,"column":6}},"id":133},"134":{"loc":{"start":{"line":285,"column":0},"end":{"line":289,"column":2}},"id":134},"135":{"loc":{"start":{"line":286,"column":4},"end":{"line":288,"column":6}},"id":135},"136":{"loc":{"start":{"line":287,"column":8},"end":{"line":287,"column":64}},"id":136},"137":{"loc":{"start":{"line":287,"column":15},"end":{"line":287,"column":63}},"id":137},"138":{"loc":{"start":{"line":287,"column":37},"end":{"line":287,"column":49}},"id":138},"139":{"loc":{"start":{"line":304,"column":0},"end":{"line":339,"column":2}},"id":139},"140":{"loc":{"start":{"line":306,"column":8},"end":{"line":306,"column":21}},"id":140},"141":{"loc":{"start":{"line":307,"column":4},"end":{"line":307,"column":60}},"id":141},"142":{"loc":{"start":{"line":307,"column":23},"end":{"line":307,"column":59}},"id":142},"143":{"loc":{"start":{"line":308,"column":4},"end":{"line":308,"column":48}},"id":143},"144":{"loc":{"start":{"line":308,"column":19},"end":{"line":308,"column":47}},"id":144},"145":{"loc":{"start":{"line":309,"column":4},"end":{"line":309,"column":63}},"id":145},"146":{"loc":{"start":{"line":309,"column":24},"end":{"line":309,"column":62}},"id":146},"147":{"loc":{"start":{"line":310,"column":4},"end":{"line":310,"column":30}},"id":147},"148":{"loc":{"start":{"line":310,"column":11},"end":{"line":310,"column":29}},"id":148},"149":{"loc":{"start":{"line":311,"column":4},"end":{"line":338,"column":6}},"id":149},"150":{"loc":{"start":{"line":312,"column":8},"end":{"line":316,"column":10}},"id":150},"151":{"loc":{"start":{"line":312,"column":23},"end":{"line":316,"column":9}},"id":151},"152":{"loc":{"start":{"line":314,"column":12},"end":{"line":314,"column":37}},"id":152},"153":{"loc":{"start":{"line":315,"column":12},"end":{"line":315,"column":37}},"id":153},"154":{"loc":{"start":{"line":313,"column":12},"end":{"line":313,"column":50}},"id":154},"155":{"loc":{"start":{"line":317,"column":8},"end":{"line":337,"column":11}},"id":155},"156":{"loc":{"start":{"line":317,"column":15},"end":{"line":337,"column":10}},"id":156},"157":{"loc":{"start":{"line":318,"column":12},"end":{"line":318,"column":64}},"id":157},"158":{"loc":{"start":{"line":318,"column":23},"end":{"line":318,"column":63}},"id":158},"159":{"loc":{"start":{"line":318,"column":37},"end":{"line":318,"column":62}},"id":159},"160":{"loc":{"start":{"line":319,"column":12},"end":{"line":336,"column":15}},"id":160},"161":{"loc":{"start":{"line":319,"column":19},"end":{"line":336,"column":14}},"id":161},"162":{"loc":{"start":{"line":319,"column":26},"end":{"line":319,"column":44}},"id":162},"163":{"loc":{"start":{"line":320,"column":21},"end":{"line":320,"column":49}},"id":163},"164":{"loc":{"start":{"line":321,"column":20},"end":{"line":321,"column":63}},"id":164},"165":{"loc":{"start":{"line":321,"column":27},"end":{"line":321,"column":62}},"id":165},"166":{"loc":{"start":{"line":322,"column":20},"end":{"line":322,"column":71}},"id":166},"167":{"loc":{"start":{"line":322,"column":20},"end":{"line":322,"column":38}},"id":167},"168":{"loc":{"start":{"line":323,"column":20},"end":{"line":323,"column":83}},"id":168},"169":{"loc":{"start":{"line":323,"column":27},"end":{"line":323,"column":82}},"id":169},"170":{"loc":{"start":{"line":323,"column":45},"end":{"line":323,"column":81}},"id":170},"171":{"loc":{"start":{"line":325,"column":16},"end":{"line":333,"column":19}},"id":171},"172":{"loc":{"start":{"line":325,"column":23},"end":{"line":333,"column":18}},"id":172},"173":{"loc":{"start":{"line":325,"column":30},"end":{"line":325,"column":48}},"id":173},"174":{"loc":{"start":{"line":326,"column":24},"end":{"line":326,"column":37}},"id":174},"175":{"loc":{"start":{"line":327,"column":24},"end":{"line":327,"column":85}},"id":175},"176":{"loc":{"start":{"line":327,"column":31},"end":{"line":327,"column":84}},"id":176},"177":{"loc":{"start":{"line":328,"column":31},"end":{"line":328,"column":49}},"id":177},"178":{"loc":{"start":{"line":329,"column":24},"end":{"line":329,"column":90}},"id":178},"179":{"loc":{"start":{"line":329,"column":31},"end":{"line":329,"column":89}},"id":179},"180":{"loc":{"start":{"line":331,"column":24},"end":{"line":331,"column":67}},"id":180},"181":{"loc":{"start":{"line":331,"column":31},"end":{"line":331,"column":66}},"id":181},"182":{"loc":{"start":{"line":335,"column":16},"end":{"line":335,"column":59}},"id":182},"183":{"loc":{"start":{"line":335,"column":23},"end":{"line":335,"column":58}},"id":183},"184":{"loc":{"start":{"line":347,"column":0},"end":{"line":400,"column":2}},"id":184},"185":{"loc":{"start":{"line":349,"column":4},"end":{"line":349,"column":57}},"id":185},"186":{"loc":{"start":{"line":349,"column":18},"end":{"line":349,"column":56}},"id":186},"187":{"loc":{"start":{"line":349,"column":33},"end":{"line":349,"column":56}},"id":187},"188":{"loc":{"start":{"line":350,"column":4},"end":{"line":399,"column":7}},"id":188},"189":{"loc":{"start":{"line":350,"column":11},"end":{"line":399,"column":6}},"id":189},"190":{"loc":{"start":{"line":350,"column":18},"end":{"line":350,"column":31}},"id":190},"191":{"loc":{"start":{"line":351,"column":8},"end":{"line":351,"column":38}},"id":191},"192":{"loc":{"start":{"line":351,"column":19},"end":{"line":351,"column":37}},"id":192},"193":{"loc":{"start":{"line":352,"column":8},"end":{"line":352,"column":18}},"id":193},"194":{"loc":{"start":{"line":353,"column":8},"end":{"line":353,"column":25}},"id":194},"195":{"loc":{"start":{"line":354,"column":8},"end":{"line":357,"column":10}},"id":195},"196":{"loc":{"start":{"line":360,"column":12},"end":{"line":360,"column":38}},"id":196},"197":{"loc":{"start":{"line":363,"column":16},"end":{"line":364,"column":51}},"id":197},"198":{"loc":{"start":{"line":363,"column":16},"end":{"line":363,"column":45}},"id":198},"199":{"loc":{"start":{"line":364,"column":16},"end":{"line":364,"column":51}},"id":199},"200":{"loc":{"start":{"line":369,"column":16},"end":{"line":369,"column":70}},"id":200},"201":{"loc":{"start":{"line":369,"column":24},"end":{"line":369,"column":69}},"id":201},"202":{"loc":{"start":{"line":372,"column":24},"end":{"line":372,"column":45}},"id":202},"203":{"loc":{"start":{"line":373,"column":24},"end":{"line":373,"column":62}},"id":203},"204":{"loc":{"start":{"line":373,"column":31},"end":{"line":373,"column":61}},"id":204},"205":{"loc":{"start":{"line":374,"column":20},"end":{"line":374,"column":33}},"id":205},"206":{"loc":{"start":{"line":375,"column":20},"end":{"line":379,"column":22}},"id":206},"207":{"loc":{"start":{"line":375,"column":47},"end":{"line":379,"column":21}},"id":207},"208":{"loc":{"start":{"line":376,"column":24},"end":{"line":378,"column":27}},"id":208},"209":{"loc":{"start":{"line":376,"column":24},"end":{"line":377,"column":59}},"id":209},"210":{"loc":{"start":{"line":376,"column":24},"end":{"line":377,"column":41}},"id":210},"211":{"loc":{"start":{"line":376,"column":24},"end":{"line":377,"column":35}},"id":211},"212":{"loc":{"start":{"line":377,"column":44},"end":{"line":377,"column":59}},"id":212},"213":{"loc":{"start":{"line":380,"column":20},"end":{"line":380,"column":79}},"id":213},"214":{"loc":{"start":{"line":380,"column":48},"end":{"line":380,"column":78}},"id":214},"215":{"loc":{"start":{"line":380,"column":53},"end":{"line":380,"column":78}},"id":215},"216":{"loc":{"start":{"line":388,"column":16},"end":{"line":388,"column":56}},"id":216},"217":{"loc":{"start":{"line":389,"column":16},"end":{"line":389,"column":54}},"id":217},"218":{"loc":{"start":{"line":389,"column":23},"end":{"line":389,"column":53}},"id":218},"219":{"loc":{"start":{"line":390,"column":12},"end":{"line":390,"column":55}},"id":219},"220":{"loc":{"start":{"line":390,"column":40},"end":{"line":390,"column":54}},"id":220},"221":{"loc":{"start":{"line":394,"column":8},"end":{"line":398,"column":10}},"id":221},"222":{"loc":{"start":{"line":397,"column":20},"end":{"line":397,"column":40}},"id":222},"223":{"loc":{"start":{"line":402,"column":0},"end":{"line":402,"column":86}},"id":223},"224":{"loc":{"start":{"line":403,"column":0},"end":{"line":403,"column":50}},"id":224},"225":{"loc":{"start":{"line":405,"column":0},"end":{"line":426,"column":2}},"id":225},"226":{"loc":{"start":{"line":406,"column":4},"end":{"line":406,"column":43}},"id":226},"227":{"loc":{"start":{"line":406,"column":16},"end":{"line":406,"column":42}},"id":227},"228":{"loc":{"start":{"line":408,"column":8},"end":{"line":408,"column":15}},"id":228},"229":{"loc":{"start":{"line":409,"column":8},"end":{"line":409,"column":40}},"id":229},"230":{"loc":{"start":{"line":409,"column":8},"end":{"line":409,"column":22}},"id":230},"231":{"loc":{"start":{"line":409,"column":26},"end":{"line":409,"column":40}},"id":231},"232":{"loc":{"start":{"line":410,"column":8},"end":{"line":410,"column":15}},"id":232},"233":{"loc":{"start":{"line":411,"column":4},"end":{"line":411,"column":19}},"id":233},"234":{"loc":{"start":{"line":412,"column":8},"end":{"line":412,"column":22}},"id":234},"235":{"loc":{"start":{"line":413,"column":8},"end":{"line":413,"column":32}},"id":235},"236":{"loc":{"start":{"line":413,"column":16},"end":{"line":413,"column":31}},"id":236},"237":{"loc":{"start":{"line":414,"column":8},"end":{"line":414,"column":19}},"id":237},"238":{"loc":{"start":{"line":415,"column":15},"end":{"line":415,"column":29}},"id":238},"239":{"loc":{"start":{"line":416,"column":8},"end":{"line":416,"column":26}},"id":239},"240":{"loc":{"start":{"line":417,"column":8},"end":{"line":417,"column":19}},"id":240},"241":{"loc":{"start":{"line":419,"column":8},"end":{"line":419,"column":26}},"id":241},"242":{"loc":{"start":{"line":420,"column":8},"end":{"line":420,"column":28}},"id":242},"243":{"loc":{"start":{"line":420,"column":14},"end":{"line":420,"column":27}},"id":243},"244":{"loc":{"start":{"line":422,"column":4},"end":{"line":425,"column":6}},"id":244},"245":{"loc":{"start":{"line":428,"column":0},"end":{"line":445,"column":2}},"id":245},"246":{"loc":{"start":{"line":429,"column":4},"end":{"line":429,"column":44}},"id":246},"247":{"loc":{"start":{"line":429,"column":16},"end":{"line":429,"column":43}},"id":247},"248":{"loc":{"start":{"line":431,"column":8},"end":{"line":431,"column":15}},"id":248},"249":{"loc":{"start":{"line":432,"column":4},"end":{"line":432,"column":42}},"id":249},"250":{"loc":{"start":{"line":432,"column":16},"end":{"line":432,"column":41}},"id":250},"251":{"loc":{"start":{"line":433,"column":4},"end":{"line":433,"column":47}},"id":251},"252":{"loc":{"start":{"line":433,"column":16},"end":{"line":433,"column":46}},"id":252},"253":{"loc":{"start":{"line":434,"column":39},"end":{"line":434,"column":45}},"id":253},"254":{"loc":{"start":{"line":434,"column":47},"end":{"line":434,"column":50}},"id":254},"255":{"loc":{"start":{"line":435,"column":8},"end":{"line":435,"column":50}},"id":255},"256":{"loc":{"start":{"line":435,"column":19},"end":{"line":435,"column":49}},"id":256},"257":{"loc":{"start":{"line":438,"column":12},"end":{"line":438,"column":35}},"id":257},"258":{"loc":{"start":{"line":439,"column":12},"end":{"line":439,"column":33}},"id":258},"259":{"loc":{"start":{"line":444,"column":4},"end":{"line":444,"column":17}},"id":259},"260":{"loc":{"start":{"line":451,"column":0},"end":{"line":457,"column":2}},"id":260},"261":{"loc":{"start":{"line":452,"column":4},"end":{"line":456,"column":16}},"id":261},"262":{"loc":{"start":{"line":452,"column":11},"end":{"line":456,"column":15}},"id":262},"263":{"loc":{"start":{"line":455,"column":8},"end":{"line":455,"column":37}},"id":263},"264":{"loc":{"start":{"line":455,"column":25},"end":{"line":455,"column":27}},"id":264},"265":{"loc":{"start":{"line":464,"column":0},"end":{"line":466,"column":2}},"id":265},"266":{"loc":{"start":{"line":465,"column":4},"end":{"line":465,"column":61}},"id":266},"267":{"loc":{"start":{"line":465,"column":11},"end":{"line":465,"column":60}},"id":267},"268":{"loc":{"start":{"line":473,"column":0},"end":{"line":477,"column":2}},"id":268},"269":{"loc":{"start":{"line":474,"column":4},"end":{"line":476,"column":6}},"id":269},"270":{"loc":{"start":{"line":475,"column":8},"end":{"line":475,"column":74}},"id":270},"271":{"loc":{"start":{"line":475,"column":15},"end":{"line":475,"column":73}},"id":271},"272":{"loc":{"start":{"line":484,"column":0},"end":{"line":488,"column":2}},"id":272},"273":{"loc":{"start":{"line":485,"column":4},"end":{"line":487,"column":6}},"id":273},"274":{"loc":{"start":{"line":486,"column":8},"end":{"line":486,"column":74}},"id":274},"275":{"loc":{"start":{"line":486,"column":15},"end":{"line":486,"column":73}},"id":275},"276":{"loc":{"start":{"line":495,"column":0},"end":{"line":499,"column":2}},"id":276},"277":{"loc":{"start":{"line":496,"column":4},"end":{"line":498,"column":6}},"id":277},"278":{"loc":{"start":{"line":497,"column":8},"end":{"line":497,"column":74}},"id":278},"279":{"loc":{"start":{"line":497,"column":15},"end":{"line":497,"column":73}},"id":279},"280":{"loc":{"start":{"line":506,"column":0},"end":{"line":510,"column":2}},"id":280},"281":{"loc":{"start":{"line":507,"column":4},"end":{"line":509,"column":6}},"id":281},"282":{"loc":{"start":{"line":508,"column":8},"end":{"line":508,"column":74}},"id":282},"283":{"loc":{"start":{"line":508,"column":15},"end":{"line":508,"column":73}},"id":283},"284":{"loc":{"start":{"line":517,"column":0},"end":{"line":521,"column":2}},"id":284},"285":{"loc":{"start":{"line":518,"column":4},"end":{"line":520,"column":6}},"id":285},"286":{"loc":{"start":{"line":519,"column":8},"end":{"line":519,"column":65}},"id":286},"287":{"loc":{"start":{"line":519,"column":15},"end":{"line":519,"column":64}},"id":287},"288":{"loc":{"start":{"line":528,"column":0},"end":{"line":532,"column":2}},"id":288},"289":{"loc":{"start":{"line":529,"column":4},"end":{"line":531,"column":6}},"id":289},"290":{"loc":{"start":{"line":530,"column":8},"end":{"line":530,"column":65}},"id":290},"291":{"loc":{"start":{"line":530,"column":15},"end":{"line":530,"column":64}},"id":291},"292":{"loc":{"start":{"line":534,"column":0},"end":{"line":536,"column":2}},"id":292},"293":{"loc":{"start":{"line":535,"column":4},"end":{"line":535,"column":62}},"id":293},"294":{"loc":{"start":{"line":535,"column":11},"end":{"line":535,"column":61}},"id":294},"295":{"loc":{"start":{"line":535,"column":47},"end":{"line":535,"column":60}},"id":295},"296":{"loc":{"start":{"line":538,"column":0},"end":{"line":540,"column":2}},"id":296},"297":{"loc":{"start":{"line":539,"column":4},"end":{"line":539,"column":68}},"id":297},"298":{"loc":{"start":{"line":539,"column":11},"end":{"line":539,"column":67}},"id":298},"299":{"loc":{"start":{"line":539,"column":47},"end":{"line":539,"column":60}},"id":299},"300":{"loc":{"start":{"line":542,"column":0},"end":{"line":544,"column":2}},"id":300},"301":{"loc":{"start":{"line":543,"column":4},"end":{"line":543,"column":62}},"id":301},"302":{"loc":{"start":{"line":543,"column":11},"end":{"line":543,"column":61}},"id":302},"303":{"loc":{"start":{"line":543,"column":47},"end":{"line":543,"column":60}},"id":303},"304":{"loc":{"start":{"line":546,"column":0},"end":{"line":548,"column":2}},"id":304},"305":{"loc":{"start":{"line":547,"column":4},"end":{"line":547,"column":68}},"id":305},"306":{"loc":{"start":{"line":547,"column":11},"end":{"line":547,"column":67}},"id":306},"307":{"loc":{"start":{"line":547,"column":47},"end":{"line":547,"column":60}},"id":307},"308":{"loc":{"start":{"line":550,"column":0},"end":{"line":552,"column":2}},"id":308},"309":{"loc":{"start":{"line":551,"column":4},"end":{"line":551,"column":61}},"id":309},"310":{"loc":{"start":{"line":551,"column":11},"end":{"line":551,"column":60}},"id":310},"311":{"loc":{"start":{"line":559,"column":0},"end":{"line":588,"column":2}},"id":311},"312":{"loc":{"start":{"line":562,"column":4},"end":{"line":562,"column":55}},"id":312},"313":{"loc":{"start":{"line":562,"column":13},"end":{"line":562,"column":54}},"id":313},"314":{"loc":{"start":{"line":562,"column":44},"end":{"line":562,"column":47}},"id":314},"315":{"loc":{"start":{"line":562,"column":50},"end":{"line":562,"column":53}},"id":315},"316":{"loc":{"start":{"line":565,"column":4},"end":{"line":565,"column":50}},"id":316},"317":{"loc":{"start":{"line":565,"column":15},"end":{"line":565,"column":49}},"id":317},"318":{"loc":{"start":{"line":570,"column":8},"end":{"line":573,"column":10}},"id":318},"319":{"loc":{"start":{"line":570,"column":19},"end":{"line":573,"column":9}},"id":319},"320":{"loc":{"start":{"line":572,"column":12},"end":{"line":572,"column":47}},"id":320},"321":{"loc":{"start":{"line":576,"column":4},"end":{"line":587,"column":6}},"id":321},"322":{"loc":{"start":{"line":583,"column":12},"end":{"line":585,"column":18}},"id":322},"323":{"loc":{"start":{"line":583,"column":12},"end":{"line":584,"column":20}},"id":323},"324":{"loc":{"start":{"line":583,"column":12},"end":{"line":583,"column":47}},"id":324},"325":{"loc":{"start":{"line":583,"column":12},"end":{"line":583,"column":40}},"id":325},"326":{"loc":{"start":{"line":590,"column":0},"end":{"line":603,"column":2}},"id":326},"327":{"loc":{"start":{"line":591,"column":8},"end":{"line":591,"column":31}},"id":327},"328":{"loc":{"start":{"line":592,"column":8},"end":{"line":592,"column":27}},"id":328},"329":{"loc":{"start":{"line":593,"column":8},"end":{"line":596,"column":10}},"id":329},"330":{"loc":{"start":{"line":594,"column":12},"end":{"line":594,"column":35}},"id":330},"331":{"loc":{"start":{"line":595,"column":12},"end":{"line":595,"column":27}},"id":331},"332":{"loc":{"start":{"line":598,"column":4},"end":{"line":602,"column":6}},"id":332},"333":{"loc":{"start":{"line":599,"column":8},"end":{"line":601,"column":11}},"id":333},"334":{"loc":{"start":{"line":599,"column":15},"end":{"line":601,"column":10}},"id":334},"335":{"loc":{"start":{"line":599,"column":22},"end":{"line":599,"column":48}},"id":335},"336":{"loc":{"start":{"line":600,"column":12},"end":{"line":600,"column":41}},"id":336},"337":{"loc":{"start":{"line":600,"column":19},"end":{"line":600,"column":40}},"id":337},"338":{"loc":{"start":{"line":605,"column":0},"end":{"line":610,"column":2}},"id":338},"339":{"loc":{"start":{"line":606,"column":4},"end":{"line":609,"column":7}},"id":339},"340":{"loc":{"start":{"line":606,"column":11},"end":{"line":609,"column":6}},"id":340},"341":{"loc":{"start":{"line":607,"column":8},"end":{"line":607,"column":76}},"id":341},"342":{"loc":{"start":{"line":607,"column":22},"end":{"line":607,"column":75}},"id":342},"343":{"loc":{"start":{"line":607,"column":39},"end":{"line":607,"column":74}},"id":343},"344":{"loc":{"start":{"line":608,"column":8},"end":{"line":608,"column":23}},"id":344},"345":{"loc":{"start":{"line":618,"column":0},"end":{"line":630,"column":2}},"id":345},"346":{"loc":{"start":{"line":619,"column":4},"end":{"line":619,"column":36}},"id":346},"347":{"loc":{"start":{"line":619,"column":15},"end":{"line":619,"column":35}},"id":347},"348":{"loc":{"start":{"line":621,"column":8},"end":{"line":621,"column":52}},"id":348},"349":{"loc":{"start":{"line":622,"column":4},"end":{"line":629,"column":6}},"id":349},"350":{"loc":{"start":{"line":623,"column":8},"end":{"line":623,"column":36}},"id":350},"351":{"loc":{"start":{"line":624,"column":12},"end":{"line":624,"column":36}},"id":351},"352":{"loc":{"start":{"line":625,"column":12},"end":{"line":625,"column":66}},"id":352},"353":{"loc":{"start":{"line":625,"column":19},"end":{"line":625,"column":65}},"id":353},"354":{"loc":{"start":{"line":625,"column":29},"end":{"line":625,"column":46}},"id":354},"355":{"loc":{"start":{"line":627,"column":12},"end":{"line":627,"column":55}},"id":355},"356":{"loc":{"start":{"line":627,"column":19},"end":{"line":627,"column":54}},"id":356},"357":{"loc":{"start":{"line":632,"column":0},"end":{"line":663,"column":2}},"id":357},"358":{"loc":{"start":{"line":633,"column":4},"end":{"line":662,"column":6}},"id":358},"359":{"loc":{"start":{"line":634,"column":8},"end":{"line":634,"column":38}},"id":359},"360":{"loc":{"start":{"line":634,"column":19},"end":{"line":634,"column":37}},"id":360},"361":{"loc":{"start":{"line":636,"column":12},"end":{"line":636,"column":50}},"id":361},"362":{"loc":{"start":{"line":637,"column":8},"end":{"line":661,"column":10}},"id":362},"363":{"loc":{"start":{"line":638,"column":12},"end":{"line":638,"column":39}},"id":363},"364":{"loc":{"start":{"line":639,"column":16},"end":{"line":639,"column":44}},"id":364},"365":{"loc":{"start":{"line":640,"column":16},"end":{"line":640,"column":48}},"id":365},"366":{"loc":{"start":{"line":640,"column":25},"end":{"line":640,"column":47}},"id":366},"367":{"loc":{"start":{"line":642,"column":12},"end":{"line":642,"column":63}},"id":367},"368":{"loc":{"start":{"line":642,"column":25},"end":{"line":642,"column":62}},"id":368},"369":{"loc":{"start":{"line":643,"column":12},"end":{"line":643,"column":58}},"id":369},"370":{"loc":{"start":{"line":643,"column":23},"end":{"line":643,"column":57}},"id":370},"371":{"loc":{"start":{"line":644,"column":12},"end":{"line":644,"column":48}},"id":371},"372":{"loc":{"start":{"line":644,"column":28},"end":{"line":644,"column":47}},"id":372},"373":{"loc":{"start":{"line":645,"column":12},"end":{"line":645,"column":49}},"id":373},"374":{"loc":{"start":{"line":646,"column":16},"end":{"line":646,"column":38}},"id":374},"375":{"loc":{"start":{"line":647,"column":16},"end":{"line":657,"column":19}},"id":375},"376":{"loc":{"start":{"line":647,"column":23},"end":{"line":657,"column":18}},"id":376},"377":{"loc":{"start":{"line":647,"column":30},"end":{"line":647,"column":60}},"id":377},"378":{"loc":{"start":{"line":649,"column":24},"end":{"line":652,"column":40}},"id":378},"379":{"loc":{"start":{"line":649,"column":24},"end":{"line":651,"column":47}},"id":379},"380":{"loc":{"start":{"line":649,"column":24},"end":{"line":650,"column":32}},"id":380},"381":{"loc":{"start":{"line":649,"column":24},"end":{"line":649,"column":40}},"id":381},"382":{"loc":{"start":{"line":651,"column":24},"end":{"line":651,"column":47}},"id":382},"383":{"loc":{"start":{"line":654,"column":24},"end":{"line":654,"column":64}},"id":383},"384":{"loc":{"start":{"line":656,"column":20},"end":{"line":656,"column":36}},"id":384},"385":{"loc":{"start":{"line":659,"column":16},"end":{"line":659,"column":56}},"id":385},"386":{"loc":{"start":{"line":659,"column":23},"end":{"line":659,"column":55}},"id":386},"387":{"loc":{"start":{"line":675,"column":0},"end":{"line":675,"column":59}},"id":387},"388":{"loc":{"start":{"line":675,"column":22},"end":{"line":675,"column":58}},"id":388},"389":{"loc":{"start":{"line":676,"column":0},"end":{"line":676,"column":61}},"id":389},"390":{"loc":{"start":{"line":676,"column":19},"end":{"line":676,"column":60}},"id":390},"391":{"loc":{"start":{"line":677,"column":0},"end":{"line":677,"column":58}},"id":391},"392":{"loc":{"start":{"line":677,"column":18},"end":{"line":677,"column":57}},"id":392},"393":{"loc":{"start":{"line":678,"column":0},"end":{"line":678,"column":61}},"id":393},"394":{"loc":{"start":{"line":678,"column":19},"end":{"line":678,"column":60}},"id":394},"395":{"loc":{"start":{"line":679,"column":0},"end":{"line":681,"column":17}},"id":395},"396":{"loc":{"start":{"line":679,"column":15},"end":{"line":681,"column":16}},"id":396},"397":{"loc":{"start":{"line":680,"column":4},"end":{"line":680,"column":62}},"id":397},"398":{"loc":{"start":{"line":680,"column":11},"end":{"line":680,"column":61}},"id":398},"399":{"loc":{"start":{"line":680,"column":11},"end":{"line":680,"column":46}},"id":399},"400":{"loc":{"start":{"line":680,"column":11},"end":{"line":680,"column":40}},"id":400},"401":{"loc":{"start":{"line":684,"column":0},"end":{"line":690,"column":2}},"id":401},"402":{"loc":{"start":{"line":685,"column":4},"end":{"line":689,"column":6}},"id":402},"403":{"loc":{"start":{"line":686,"column":8},"end":{"line":688,"column":11}},"id":403},"404":{"loc":{"start":{"line":686,"column":15},"end":{"line":688,"column":10}},"id":404},"405":{"loc":{"start":{"line":686,"column":22},"end":{"line":686,"column":47}},"id":405},"406":{"loc":{"start":{"line":687,"column":12},"end":{"line":687,"column":42}},"id":406},"407":{"loc":{"start":{"line":687,"column":19},"end":{"line":687,"column":41}},"id":407},"408":{"loc":{"start":{"line":693,"column":0},"end":{"line":702,"column":2}},"id":408},"409":{"loc":{"start":{"line":694,"column":4},"end":{"line":694,"column":35}},"id":409},"410":{"loc":{"start":{"line":694,"column":15},"end":{"line":694,"column":34}},"id":410},"411":{"loc":{"start":{"line":695,"column":4},"end":{"line":695,"column":43}},"id":411},"412":{"loc":{"start":{"line":695,"column":16},"end":{"line":695,"column":42}},"id":412},"413":{"loc":{"start":{"line":696,"column":4},"end":{"line":696,"column":28}},"id":413},"414":{"loc":{"start":{"line":696,"column":18},"end":{"line":696,"column":27}},"id":414},"415":{"loc":{"start":{"line":697,"column":4},"end":{"line":702,"column":0}},"id":415},"416":{"loc":{"start":{"line":698,"column":8},"end":{"line":700,"column":11}},"id":416},"417":{"loc":{"start":{"line":698,"column":15},"end":{"line":700,"column":10}},"id":417},"418":{"loc":{"start":{"line":699,"column":12},"end":{"line":699,"column":50}},"id":418},"419":{"loc":{"start":{"line":699,"column":19},"end":{"line":699,"column":49}},"id":419},"420":{"loc":{"start":{"line":711,"column":0},"end":{"line":719,"column":2}},"id":420},"421":{"loc":{"start":{"line":712,"column":4},"end":{"line":718,"column":6}},"id":421},"422":{"loc":{"start":{"line":713,"column":8},"end":{"line":717,"column":11}},"id":422},"423":{"loc":{"start":{"line":713,"column":15},"end":{"line":717,"column":10}},"id":423},"424":{"loc":{"start":{"line":713,"column":22},"end":{"line":713,"column":44}},"id":424},"425":{"loc":{"start":{"line":715,"column":16},"end":{"line":715,"column":34}},"id":425},"426":{"loc":{"start":{"line":716,"column":12},"end":{"line":716,"column":81}},"id":426},"427":{"loc":{"start":{"line":716,"column":19},"end":{"line":716,"column":80}},"id":427},"428":{"loc":{"start":{"line":716,"column":50},"end":{"line":716,"column":79}},"id":428},"429":{"loc":{"start":{"line":716,"column":50},"end":{"line":716,"column":70}},"id":429},"430":{"loc":{"start":{"line":728,"column":0},"end":{"line":774,"column":2}},"id":430},"431":{"loc":{"start":{"line":729,"column":4},"end":{"line":729,"column":29}},"id":431},"432":{"loc":{"start":{"line":729,"column":10},"end":{"line":729,"column":28}},"id":432},"433":{"loc":{"start":{"line":730,"column":4},"end":{"line":732,"column":6}},"id":433},"434":{"loc":{"start":{"line":730,"column":12},"end":{"line":732,"column":5}},"id":434},"435":{"loc":{"start":{"line":731,"column":8},"end":{"line":731,"column":56}},"id":435},"436":{"loc":{"start":{"line":731,"column":15},"end":{"line":731,"column":55}},"id":436},"437":{"loc":{"start":{"line":731,"column":15},"end":{"line":731,"column":45}},"id":437},"438":{"loc":{"start":{"line":731,"column":15},"end":{"line":731,"column":39}},"id":438},"439":{"loc":{"start":{"line":733,"column":4},"end":{"line":773,"column":6}},"id":439},"440":{"loc":{"start":{"line":734,"column":8},"end":{"line":736,"column":31}},"id":440},"441":{"loc":{"start":{"line":735,"column":12},"end":{"line":736,"column":30}},"id":441},"442":{"loc":{"start":{"line":735,"column":12},"end":{"line":735,"column":36}},"id":442},"443":{"loc":{"start":{"line":737,"column":8},"end":{"line":740,"column":48}},"id":443},"444":{"loc":{"start":{"line":738,"column":12},"end":{"line":740,"column":47}},"id":444},"445":{"loc":{"start":{"line":738,"column":12},"end":{"line":740,"column":19}},"id":445},"446":{"loc":{"start":{"line":738,"column":12},"end":{"line":739,"column":30}},"id":446},"447":{"loc":{"start":{"line":738,"column":12},"end":{"line":739,"column":24}},"id":447},"448":{"loc":{"start":{"line":738,"column":12},"end":{"line":738,"column":32}},"id":448},"449":{"loc":{"start":{"line":740,"column":22},"end":{"line":740,"column":47}},"id":449},"450":{"loc":{"start":{"line":741,"column":8},"end":{"line":745,"column":11}},"id":450},"451":{"loc":{"start":{"line":741,"column":8},"end":{"line":745,"column":10}},"id":451},"452":{"loc":{"start":{"line":741,"column":12},"end":{"line":745,"column":9}},"id":452},"453":{"loc":{"start":{"line":742,"column":12},"end":{"line":744,"column":23}},"id":453},"454":{"loc":{"start":{"line":742,"column":12},"end":{"line":743,"column":22}},"id":454},"455":{"loc":{"start":{"line":742,"column":12},"end":{"line":742,"column":28}},"id":455},"456":{"loc":{"start":{"line":746,"column":8},"end":{"line":772,"column":11}},"id":456},"457":{"loc":{"start":{"line":746,"column":15},"end":{"line":772,"column":10}},"id":457},"458":{"loc":{"start":{"line":746,"column":22},"end":{"line":746,"column":44}},"id":458},"459":{"loc":{"start":{"line":748,"column":16},"end":{"line":754,"column":19}},"id":459},"460":{"loc":{"start":{"line":748,"column":16},"end":{"line":754,"column":18}},"id":460},"461":{"loc":{"start":{"line":748,"column":20},"end":{"line":754,"column":17}},"id":461},"462":{"loc":{"start":{"line":749,"column":20},"end":{"line":753,"column":63}},"id":462},"463":{"loc":{"start":{"line":749,"column":20},"end":{"line":752,"column":37}},"id":463},"464":{"loc":{"start":{"line":749,"column":20},"end":{"line":752,"column":31}},"id":464},"465":{"loc":{"start":{"line":749,"column":20},"end":{"line":751,"column":41}},"id":465},"466":{"loc":{"start":{"line":749,"column":20},"end":{"line":751,"column":35}},"id":466},"467":{"loc":{"start":{"line":749,"column":20},"end":{"line":750,"column":26}},"id":467},"468":{"loc":{"start":{"line":749,"column":20},"end":{"line":749,"column":36}},"id":468},"469":{"loc":{"start":{"line":753,"column":20},"end":{"line":753,"column":63}},"id":469},"470":{"loc":{"start":{"line":756,"column":16},"end":{"line":761,"column":19}},"id":470},"471":{"loc":{"start":{"line":756,"column":16},"end":{"line":761,"column":18}},"id":471},"472":{"loc":{"start":{"line":756,"column":20},"end":{"line":761,"column":17}},"id":472},"473":{"loc":{"start":{"line":757,"column":20},"end":{"line":760,"column":78}},"id":473},"474":{"loc":{"start":{"line":757,"column":20},"end":{"line":760,"column":31}},"id":474},"475":{"loc":{"start":{"line":757,"column":20},"end":{"line":759,"column":26}},"id":475},"476":{"loc":{"start":{"line":757,"column":20},"end":{"line":758,"column":26}},"id":476},"477":{"loc":{"start":{"line":757,"column":20},"end":{"line":757,"column":36}},"id":477},"478":{"loc":{"start":{"line":763,"column":12},"end":{"line":763,"column":28}},"id":478},"479":{"loc":{"start":{"line":765,"column":12},"end":{"line":770,"column":15}},"id":479},"480":{"loc":{"start":{"line":765,"column":12},"end":{"line":770,"column":14}},"id":480},"481":{"loc":{"start":{"line":765,"column":16},"end":{"line":770,"column":13}},"id":481},"482":{"loc":{"start":{"line":766,"column":16},"end":{"line":769,"column":52}},"id":482},"483":{"loc":{"start":{"line":766,"column":16},"end":{"line":768,"column":33}},"id":483},"484":{"loc":{"start":{"line":766,"column":16},"end":{"line":768,"column":27}},"id":484},"485":{"loc":{"start":{"line":766,"column":16},"end":{"line":767,"column":26}},"id":485},"486":{"loc":{"start":{"line":766,"column":16},"end":{"line":766,"column":32}},"id":486},"487":{"loc":{"start":{"line":769,"column":16},"end":{"line":769,"column":52}},"id":487},"488":{"loc":{"start":{"line":769,"column":17},"end":{"line":769,"column":41}},"id":488},"489":{"loc":{"start":{"line":771,"column":12},"end":{"line":771,"column":36}},"id":489},"490":{"loc":{"start":{"line":771,"column":19},"end":{"line":771,"column":35}},"id":490},"491":{"loc":{"start":{"line":785,"column":0},"end":{"line":796,"column":2}},"id":491},"492":{"loc":{"start":{"line":786,"column":4},"end":{"line":795,"column":6}},"id":492},"493":{"loc":{"start":{"line":787,"column":8},"end":{"line":787,"column":31}},"id":493},"494":{"loc":{"start":{"line":788,"column":8},"end":{"line":794,"column":11}},"id":494},"495":{"loc":{"start":{"line":788,"column":15},"end":{"line":794,"column":10}},"id":495},"496":{"loc":{"start":{"line":788,"column":22},"end":{"line":788,"column":44}},"id":496},"497":{"loc":{"start":{"line":789,"column":12},"end":{"line":789,"column":34}},"id":497},"498":{"loc":{"start":{"line":790,"column":16},"end":{"line":790,"column":44}},"id":498},"499":{"loc":{"start":{"line":791,"column":16},"end":{"line":791,"column":74}},"id":499},"500":{"loc":{"start":{"line":791,"column":54},"end":{"line":791,"column":73}},"id":500},"501":{"loc":{"start":{"line":791,"column":59},"end":{"line":791,"column":73}},"id":501},"502":{"loc":{"start":{"line":793,"column":12},"end":{"line":793,"column":28}},"id":502},"503":{"loc":{"start":{"line":806,"column":0},"end":{"line":819,"column":2}},"id":503},"504":{"loc":{"start":{"line":807,"column":4},"end":{"line":818,"column":6}},"id":504},"505":{"loc":{"start":{"line":808,"column":8},"end":{"line":817,"column":11}},"id":505},"506":{"loc":{"start":{"line":808,"column":15},"end":{"line":817,"column":10}},"id":506},"507":{"loc":{"start":{"line":808,"column":22},"end":{"line":808,"column":44}},"id":507},"508":{"loc":{"start":{"line":809,"column":16},"end":{"line":809,"column":44}},"id":508},"509":{"loc":{"start":{"line":810,"column":16},"end":{"line":814,"column":19}},"id":509},"510":{"loc":{"start":{"line":810,"column":16},"end":{"line":814,"column":18}},"id":510},"511":{"loc":{"start":{"line":810,"column":27},"end":{"line":810,"column":36}},"id":511},"512":{"loc":{"start":{"line":811,"column":25},"end":{"line":811,"column":50}},"id":512},"513":{"loc":{"start":{"line":812,"column":24},"end":{"line":812,"column":61}},"id":513},"514":{"loc":{"start":{"line":816,"column":12},"end":{"line":816,"column":28}},"id":514},"515":{"loc":{"start":{"line":827,"column":0},"end":{"line":832,"column":2}},"id":515},"516":{"loc":{"start":{"line":828,"column":4},"end":{"line":830,"column":7}},"id":516},"517":{"loc":{"start":{"line":828,"column":4},"end":{"line":830,"column":6}},"id":517},"518":{"loc":{"start":{"line":828,"column":23},"end":{"line":828,"column":25}},"id":518},"519":{"loc":{"start":{"line":829,"column":8},"end":{"line":829,"column":30}},"id":519},"520":{"loc":{"start":{"line":829,"column":14},"end":{"line":829,"column":29}},"id":520},"521":{"loc":{"start":{"line":831,"column":4},"end":{"line":831,"column":15}},"id":521},"522":{"loc":{"start":{"line":843,"column":0},"end":{"line":849,"column":2}},"id":522},"523":{"loc":{"start":{"line":844,"column":4},"end":{"line":848,"column":6}},"id":523},"524":{"loc":{"start":{"line":845,"column":8},"end":{"line":847,"column":11}},"id":524},"525":{"loc":{"start":{"line":845,"column":15},"end":{"line":847,"column":10}},"id":525},"526":{"loc":{"start":{"line":845,"column":22},"end":{"line":845,"column":44}},"id":526},"527":{"loc":{"start":{"line":846,"column":12},"end":{"line":846,"column":55}},"id":527},"528":{"loc":{"start":{"line":846,"column":19},"end":{"line":846,"column":54}},"id":528},"529":{"loc":{"start":{"line":857,"column":0},"end":{"line":864,"column":2}},"id":529},"530":{"loc":{"start":{"line":859,"column":8},"end":{"line":859,"column":58}},"id":530},"531":{"loc":{"start":{"line":859,"column":19},"end":{"line":859,"column":57}},"id":531},"532":{"loc":{"start":{"line":861,"column":8},"end":{"line":861,"column":35}},"id":532},"533":{"loc":{"start":{"line":861,"column":15},"end":{"line":861,"column":34}},"id":533},"534":{"loc":{"start":{"line":863,"column":4},"end":{"line":863,"column":30}},"id":534},"535":{"loc":{"start":{"line":863,"column":11},"end":{"line":863,"column":29}},"id":535},"536":{"loc":{"start":{"line":868,"column":0},"end":{"line":873,"column":2}},"id":536},"537":{"loc":{"start":{"line":869,"column":4},"end":{"line":872,"column":6}},"id":537},"538":{"loc":{"start":{"line":870,"column":8},"end":{"line":870,"column":69}},"id":538},"539":{"loc":{"start":{"line":870,"column":24},"end":{"line":870,"column":68}},"id":539},"540":{"loc":{"start":{"line":870,"column":33},"end":{"line":870,"column":67}},"id":540},"541":{"loc":{"start":{"line":870,"column":42},"end":{"line":870,"column":55}},"id":541},"542":{"loc":{"start":{"line":871,"column":8},"end":{"line":871,"column":38}},"id":542},"543":{"loc":{"start":{"line":871,"column":15},"end":{"line":871,"column":37}},"id":543},"544":{"loc":{"start":{"line":883,"column":0},"end":{"line":889,"column":2}},"id":544},"545":{"loc":{"start":{"line":884,"column":4},"end":{"line":888,"column":6}},"id":545},"546":{"loc":{"start":{"line":885,"column":8},"end":{"line":887,"column":11}},"id":546},"547":{"loc":{"start":{"line":885,"column":15},"end":{"line":887,"column":10}},"id":547},"548":{"loc":{"start":{"line":885,"column":22},"end":{"line":885,"column":41}},"id":548},"549":{"loc":{"start":{"line":886,"column":12},"end":{"line":886,"column":48}},"id":549},"550":{"loc":{"start":{"line":886,"column":19},"end":{"line":886,"column":47}},"id":550},"551":{"loc":{"start":{"line":896,"column":0},"end":{"line":907,"column":2}},"id":551},"552":{"loc":{"start":{"line":898,"column":8},"end":{"line":898,"column":40}},"id":552},"553":{"loc":{"start":{"line":899,"column":4},"end":{"line":906,"column":7}},"id":553},"554":{"loc":{"start":{"line":899,"column":11},"end":{"line":906,"column":6}},"id":554},"555":{"loc":{"start":{"line":901,"column":12},"end":{"line":901,"column":45}},"id":555},"556":{"loc":{"start":{"line":901,"column":25},"end":{"line":901,"column":44}},"id":556},"557":{"loc":{"start":{"line":903,"column":12},"end":{"line":903,"column":46}},"id":557},"558":{"loc":{"start":{"line":903,"column":19},"end":{"line":903,"column":45}},"id":558},"559":{"loc":{"start":{"line":905,"column":8},"end":{"line":905,"column":46}},"id":559},"560":{"loc":{"start":{"line":905,"column":15},"end":{"line":905,"column":45}},"id":560},"561":{"loc":{"start":{"line":913,"column":0},"end":{"line":925,"column":2}},"id":561},"562":{"loc":{"start":{"line":914,"column":4},"end":{"line":924,"column":8}},"id":562},"563":{"loc":{"start":{"line":914,"column":11},"end":{"line":924,"column":7}},"id":563},"564":{"loc":{"start":{"line":915,"column":8},"end":{"line":923,"column":11}},"id":564},"565":{"loc":{"start":{"line":915,"column":15},"end":{"line":923,"column":10}},"id":565},"566":{"loc":{"start":{"line":915,"column":22},"end":{"line":915,"column":44}},"id":566},"567":{"loc":{"start":{"line":916,"column":12},"end":{"line":923,"column":8}},"id":567},"568":{"loc":{"start":{"line":921,"column":25},"end":{"line":921,"column":40}},"id":568},"569":{"loc":{"start":{"line":936,"column":0},"end":{"line":993,"column":2}},"id":569},"570":{"loc":{"start":{"line":937,"column":4},"end":{"line":937,"column":22}},"id":570},"571":{"loc":{"start":{"line":940,"column":12},"end":{"line":940,"column":39}},"id":571},"572":{"loc":{"start":{"line":940,"column":23},"end":{"line":940,"column":38}},"id":572},"573":{"loc":{"start":{"line":941,"column":17},"end":{"line":941,"column":43}},"id":573},"574":{"loc":{"start":{"line":942,"column":16},"end":{"line":942,"column":28}},"id":574},"575":{"loc":{"start":{"line":945,"column":4},"end":{"line":992,"column":6}},"id":575},"576":{"loc":{"start":{"line":946,"column":8},"end":{"line":946,"column":66}},"id":576},"577":{"loc":{"start":{"line":946,"column":21},"end":{"line":946,"column":65}},"id":577},"578":{"loc":{"start":{"line":947,"column":8},"end":{"line":947,"column":46}},"id":578},"579":{"loc":{"start":{"line":948,"column":13},"end":{"line":948,"column":38}},"id":579},"580":{"loc":{"start":{"line":949,"column":12},"end":{"line":949,"column":38}},"id":580},"581":{"loc":{"start":{"line":950,"column":8},"end":{"line":952,"column":11}},"id":581},"582":{"loc":{"start":{"line":950,"column":21},"end":{"line":952,"column":10}},"id":582},"583":{"loc":{"start":{"line":951,"column":12},"end":{"line":951,"column":51}},"id":583},"584":{"loc":{"start":{"line":951,"column":19},"end":{"line":951,"column":50}},"id":584},"585":{"loc":{"start":{"line":954,"column":12},"end":{"line":954,"column":50}},"id":585},"586":{"loc":{"start":{"line":956,"column":16},"end":{"line":956,"column":75}},"id":586},"587":{"loc":{"start":{"line":956,"column":23},"end":{"line":956,"column":74}},"id":587},"588":{"loc":{"start":{"line":956,"column":48},"end":{"line":956,"column":55}},"id":588},"589":{"loc":{"start":{"line":958,"column":12},"end":{"line":968,"column":8}},"id":589},"590":{"loc":{"start":{"line":969,"column":12},"end":{"line":970,"column":29}},"id":590},"591":{"loc":{"start":{"line":969,"column":12},"end":{"line":969,"column":44}},"id":591},"592":{"loc":{"start":{"line":972,"column":12},"end":{"line":972,"column":50}},"id":592},"593":{"loc":{"start":{"line":973,"column":12},"end":{"line":973,"column":44}},"id":593},"594":{"loc":{"start":{"line":974,"column":12},"end":{"line":974,"column":38}},"id":594},"595":{"loc":{"start":{"line":975,"column":12},"end":{"line":975,"column":52}},"id":595},"596":{"loc":{"start":{"line":975,"column":19},"end":{"line":975,"column":51}},"id":596},"597":{"loc":{"start":{"line":978,"column":12},"end":{"line":981,"column":14}},"id":597},"598":{"loc":{"start":{"line":979,"column":22},"end":{"line":979,"column":32}},"id":598},"599":{"loc":{"start":{"line":982,"column":12},"end":{"line":982,"column":43}},"id":599},"600":{"loc":{"start":{"line":983,"column":12},"end":{"line":983,"column":45}},"id":600},"601":{"loc":{"start":{"line":983,"column":28},"end":{"line":983,"column":44}},"id":601},"602":{"loc":{"start":{"line":984,"column":12},"end":{"line":984,"column":106}},"id":602},"603":{"loc":{"start":{"line":984,"column":27},"end":{"line":984,"column":105}},"id":603},"604":{"loc":{"start":{"line":984,"column":52},"end":{"line":984,"column":86}},"id":604},"605":{"loc":{"start":{"line":984,"column":53},"end":{"line":984,"column":85}},"id":605},"606":{"loc":{"start":{"line":985,"column":12},"end":{"line":989,"column":14}},"id":606},"607":{"loc":{"start":{"line":985,"column":45},"end":{"line":989,"column":13}},"id":607},"608":{"loc":{"start":{"line":990,"column":12},"end":{"line":990,"column":28}},"id":608},"609":{"loc":{"start":{"line":1005,"column":0},"end":{"line":1033,"column":2}},"id":609},"610":{"loc":{"start":{"line":1006,"column":4},"end":{"line":1006,"column":22}},"id":610},"611":{"loc":{"start":{"line":1009,"column":12},"end":{"line":1009,"column":39}},"id":611},"612":{"loc":{"start":{"line":1009,"column":23},"end":{"line":1009,"column":38}},"id":612},"613":{"loc":{"start":{"line":1010,"column":17},"end":{"line":1010,"column":43}},"id":613},"614":{"loc":{"start":{"line":1011,"column":16},"end":{"line":1011,"column":28}},"id":614},"615":{"loc":{"start":{"line":1014,"column":4},"end":{"line":1032,"column":6}},"id":615},"616":{"loc":{"start":{"line":1016,"column":12},"end":{"line":1016,"column":35}},"id":616},"617":{"loc":{"start":{"line":1018,"column":12},"end":{"line":1021,"column":14}},"id":617},"618":{"loc":{"start":{"line":1019,"column":22},"end":{"line":1019,"column":32}},"id":618},"619":{"loc":{"start":{"line":1022,"column":12},"end":{"line":1022,"column":43}},"id":619},"620":{"loc":{"start":{"line":1023,"column":12},"end":{"line":1023,"column":45}},"id":620},"621":{"loc":{"start":{"line":1023,"column":28},"end":{"line":1023,"column":44}},"id":621},"622":{"loc":{"start":{"line":1024,"column":12},"end":{"line":1026,"column":34}},"id":622},"623":{"loc":{"start":{"line":1024,"column":19},"end":{"line":1026,"column":33}},"id":623},"624":{"loc":{"start":{"line":1024,"column":31},"end":{"line":1026,"column":14}},"id":624},"625":{"loc":{"start":{"line":1025,"column":16},"end":{"line":1025,"column":31}},"id":625},"626":{"loc":{"start":{"line":1027,"column":19},"end":{"line":1027,"column":66}},"id":626},"627":{"loc":{"start":{"line":1027,"column":40},"end":{"line":1027,"column":65}},"id":627},"628":{"loc":{"start":{"line":1028,"column":12},"end":{"line":1028,"column":92}},"id":628},"629":{"loc":{"start":{"line":1028,"column":19},"end":{"line":1028,"column":91}},"id":629},"630":{"loc":{"start":{"line":1028,"column":29},"end":{"line":1028,"column":66}},"id":630},"631":{"loc":{"start":{"line":1028,"column":40},"end":{"line":1028,"column":65}},"id":631},"632":{"loc":{"start":{"line":1030,"column":12},"end":{"line":1030,"column":76}},"id":632},"633":{"loc":{"start":{"line":1030,"column":19},"end":{"line":1030,"column":75}},"id":633},"634":{"loc":{"start":{"line":1043,"column":0},"end":{"line":1062,"column":2}},"id":634},"635":{"loc":{"start":{"line":1044,"column":4},"end":{"line":1061,"column":6}},"id":635},"636":{"loc":{"start":{"line":1045,"column":8},"end":{"line":1045,"column":39}},"id":636},"637":{"loc":{"start":{"line":1047,"column":12},"end":{"line":1047,"column":59}},"id":637},"638":{"loc":{"start":{"line":1047,"column":27},"end":{"line":1047,"column":58}},"id":638},"639":{"loc":{"start":{"line":1047,"column":35},"end":{"line":1047,"column":38}},"id":639},"640":{"loc":{"start":{"line":1048,"column":16},"end":{"line":1048,"column":22}},"id":640},"641":{"loc":{"start":{"line":1049,"column":16},"end":{"line":1055,"column":19}},"id":641},"642":{"loc":{"start":{"line":1049,"column":23},"end":{"line":1055,"column":18}},"id":642},"643":{"loc":{"start":{"line":1050,"column":24},"end":{"line":1050,"column":47}},"id":643},"644":{"loc":{"start":{"line":1051,"column":24},"end":{"line":1051,"column":38}},"id":644},"645":{"loc":{"start":{"line":1051,"column":31},"end":{"line":1051,"column":37}},"id":645},"646":{"loc":{"start":{"line":1053,"column":24},"end":{"line":1053,"column":40}},"id":646},"647":{"loc":{"start":{"line":1057,"column":16},"end":{"line":1057,"column":32}},"id":647},"648":{"loc":{"start":{"line":1060,"column":8},"end":{"line":1060,"column":22}},"id":648},"649":{"loc":{"start":{"line":1060,"column":15},"end":{"line":1060,"column":21}},"id":649},"650":{"loc":{"start":{"line":1070,"column":0},"end":{"line":1117,"column":2}},"id":650},"651":{"loc":{"start":{"line":1123,"column":0},"end":{"line":1123,"column":34}},"id":651},"652":{"loc":{"start":{"line":1125,"column":4},"end":{"line":1125,"column":74}},"id":652},"653":{"loc":{"start":{"line":1134,"column":0},"end":{"line":1137,"column":2}},"id":653},"654":{"loc":{"start":{"line":1135,"column":4},"end":{"line":1136,"column":39}},"id":654},"655":{"loc":{"start":{"line":1135,"column":11},"end":{"line":1136,"column":38}},"id":655},"656":{"loc":{"start":{"line":1135,"column":11},"end":{"line":1136,"column":21}},"id":656},"657":{"loc":{"start":{"line":1135,"column":11},"end":{"line":1135,"column":43}},"id":657},"658":{"loc":{"start":{"line":1135,"column":12},"end":{"line":1135,"column":25}},"id":658},"659":{"loc":{"start":{"line":1135,"column":29},"end":{"line":1135,"column":42}},"id":659},"660":{"loc":{"start":{"line":1136,"column":8},"end":{"line":1136,"column":21}},"id":660},"661":{"loc":{"start":{"line":1136,"column":25},"end":{"line":1136,"column":38}},"id":661},"662":{"loc":{"start":{"line":1144,"column":0},"end":{"line":1148,"column":2}},"id":662},"663":{"loc":{"start":{"line":1145,"column":4},"end":{"line":1147,"column":6}},"id":663},"664":{"loc":{"start":{"line":1146,"column":8},"end":{"line":1146,"column":86}},"id":664},"665":{"loc":{"start":{"line":1146,"column":15},"end":{"line":1146,"column":85}},"id":665},"666":{"loc":{"start":{"line":1146,"column":49},"end":{"line":1146,"column":84}},"id":666},"667":{"loc":{"start":{"line":1146,"column":49},"end":{"line":1146,"column":69}},"id":667},"668":{"loc":{"start":{"line":1158,"column":0},"end":{"line":1187,"column":2}},"id":668},"669":{"loc":{"start":{"line":1159,"column":8},"end":{"line":1159,"column":55}},"id":669},"670":{"loc":{"start":{"line":1160,"column":8},"end":{"line":1160,"column":36}},"id":670},"671":{"loc":{"start":{"line":1162,"column":4},"end":{"line":1162,"column":52}},"id":671},"672":{"loc":{"start":{"line":1165,"column":8},"end":{"line":1165,"column":37}},"id":672},"673":{"loc":{"start":{"line":1165,"column":19},"end":{"line":1165,"column":36}},"id":673},"674":{"loc":{"start":{"line":1167,"column":4},"end":{"line":1167,"column":35}},"id":674},"675":{"loc":{"start":{"line":1167,"column":18},"end":{"line":1167,"column":34}},"id":675},"676":{"loc":{"start":{"line":1169,"column":4},"end":{"line":1172,"column":6}},"id":676},"677":{"loc":{"start":{"line":1180,"column":9},"end":{"line":1180,"column":51}},"id":677},"678":{"loc":{"start":{"line":1181,"column":8},"end":{"line":1181,"column":60}},"id":678},"679":{"loc":{"start":{"line":1182,"column":8},"end":{"line":1182,"column":56}},"id":679},"680":{"loc":{"start":{"line":1183,"column":8},"end":{"line":1183,"column":34}},"id":680},"681":{"loc":{"start":{"line":1186,"column":4},"end":{"line":1186,"column":20}},"id":681},"682":{"loc":{"start":{"line":1192,"column":0},"end":{"line":1192,"column":47}},"id":682},"683":{"loc":{"start":{"line":1192,"column":21},"end":{"line":1192,"column":46}},"id":683},"684":{"loc":{"start":{"line":1196,"column":0},"end":{"line":1196,"column":45}},"id":684},"685":{"loc":{"start":{"line":1196,"column":19},"end":{"line":1196,"column":44}},"id":685},"686":{"loc":{"start":{"line":1200,"column":0},"end":{"line":1200,"column":53}},"id":686},"687":{"loc":{"start":{"line":1200,"column":27},"end":{"line":1200,"column":52}},"id":687},"688":{"loc":{"start":{"line":1204,"column":0},"end":{"line":1205,"column":50}},"id":688},"689":{"loc":{"start":{"line":1205,"column":24},"end":{"line":1205,"column":49}},"id":689},"690":{"loc":{"start":{"line":1207,"column":0},"end":{"line":1214,"column":2}},"id":690},"691":{"loc":{"start":{"line":1208,"column":4},"end":{"line":1213,"column":6}},"id":691},"692":{"loc":{"start":{"line":1209,"column":8},"end":{"line":1209,"column":53}},"id":692},"693":{"loc":{"start":{"line":1209,"column":22},"end":{"line":1209,"column":52}},"id":693},"694":{"loc":{"start":{"line":1210,"column":8},"end":{"line":1212,"column":11}},"id":694},"695":{"loc":{"start":{"line":1210,"column":15},"end":{"line":1212,"column":10}},"id":695},"696":{"loc":{"start":{"line":1210,"column":22},"end":{"line":1210,"column":44}},"id":696},"697":{"loc":{"start":{"line":1211,"column":12},"end":{"line":1211,"column":52}},"id":697},"698":{"loc":{"start":{"line":1211,"column":19},"end":{"line":1211,"column":51}},"id":698},"699":{"loc":{"start":{"line":1216,"column":0},"end":{"line":1249,"column":2}},"id":699},"700":{"loc":{"start":{"line":1217,"column":4},"end":{"line":1217,"column":38}},"id":700},"701":{"loc":{"start":{"line":1217,"column":19},"end":{"line":1217,"column":37}},"id":701},"702":{"loc":{"start":{"line":1218,"column":4},"end":{"line":1248,"column":6}},"id":702},"703":{"loc":{"start":{"line":1219,"column":8},"end":{"line":1219,"column":37}},"id":703},"704":{"loc":{"start":{"line":1220,"column":8},"end":{"line":1220,"column":33}},"id":704},"705":{"loc":{"start":{"line":1220,"column":23},"end":{"line":1220,"column":32}},"id":705},"706":{"loc":{"start":{"line":1221,"column":8},"end":{"line":1221,"column":24}},"id":706},"707":{"loc":{"start":{"line":1222,"column":8},"end":{"line":1222,"column":29}},"id":707},"708":{"loc":{"start":{"line":1224,"column":8},"end":{"line":1224,"column":49}},"id":708},"709":{"loc":{"start":{"line":1224,"column":18},"end":{"line":1224,"column":48}},"id":709},"710":{"loc":{"start":{"line":1228,"column":12},"end":{"line":1244,"column":8}},"id":710},"711":{"loc":{"start":{"line":1228,"column":12},"end":{"line":1243,"column":34}},"id":711},"712":{"loc":{"start":{"line":1231,"column":17},"end":{"line":1242,"column":14}},"id":712},"713":{"loc":{"start":{"line":1228,"column":19},"end":{"line":1230,"column":14}},"id":713},"714":{"loc":{"start":{"line":1229,"column":16},"end":{"line":1229,"column":46}},"id":714},"715":{"loc":{"start":{"line":1229,"column":23},"end":{"line":1229,"column":45}},"id":715},"716":{"loc":{"start":{"line":1232,"column":20},"end":{"line":1232,"column":48}},"id":716},"717":{"loc":{"start":{"line":1233,"column":24},"end":{"line":1233,"column":35}},"id":717},"718":{"loc":{"start":{"line":1234,"column":24},"end":{"line":1234,"column":64}},"id":718},"719":{"loc":{"start":{"line":1235,"column":24},"end":{"line":1235,"column":31}},"id":719},"720":{"loc":{"start":{"line":1235,"column":24},"end":{"line":1235,"column":30}},"id":720},"721":{"loc":{"start":{"line":1237,"column":24},"end":{"line":1237,"column":62}},"id":721},"722":{"loc":{"start":{"line":1240,"column":20},"end":{"line":1240,"column":47}},"id":722},"723":{"loc":{"start":{"line":1240,"column":20},"end":{"line":1240,"column":46}},"id":723},"724":{"loc":{"start":{"line":1245,"column":8},"end":{"line":1245,"column":15}},"id":724},"725":{"loc":{"start":{"line":1245,"column":8},"end":{"line":1245,"column":14}},"id":725},"726":{"loc":{"start":{"line":1247,"column":8},"end":{"line":1247,"column":32}},"id":726},"727":{"loc":{"start":{"line":1251,"column":0},"end":{"line":1253,"column":2}},"id":727},"728":{"loc":{"start":{"line":1252,"column":4},"end":{"line":1252,"column":48}},"id":728},"729":{"loc":{"start":{"line":1252,"column":11},"end":{"line":1252,"column":47}},"id":729},"730":{"loc":{"start":{"line":1255,"column":0},"end":{"line":1260,"column":2}},"id":730},"731":{"loc":{"start":{"line":1262,"column":0},"end":{"line":1362,"column":2}},"id":731},"732":{"loc":{"start":{"line":1263,"column":4},"end":{"line":1263,"column":25}},"id":732},"733":{"loc":{"start":{"line":1264,"column":4},"end":{"line":1361,"column":6}},"id":733},"734":{"loc":{"start":{"line":1266,"column":8},"end":{"line":1266,"column":61}},"id":734},"735":{"loc":{"start":{"line":1266,"column":20},"end":{"line":1266,"column":60}},"id":735},"736":{"loc":{"start":{"line":1268,"column":8},"end":{"line":1268,"column":29}},"id":736},"737":{"loc":{"start":{"line":1270,"column":8},"end":{"line":1315,"column":12}},"id":737},"738":{"loc":{"start":{"line":1270,"column":29},"end":{"line":1315,"column":11}},"id":738},"739":{"loc":{"start":{"line":1270,"column":36},"end":{"line":1315,"column":10}},"id":739},"740":{"loc":{"start":{"line":1274,"column":16},"end":{"line":1274,"column":52}},"id":740},"741":{"loc":{"start":{"line":1276,"column":20},"end":{"line":1276,"column":52}},"id":741},"742":{"loc":{"start":{"line":1278,"column":24},"end":{"line":1278,"column":51}},"id":742},"743":{"loc":{"start":{"line":1279,"column":28},"end":{"line":1279,"column":66}},"id":743},"744":{"loc":{"start":{"line":1279,"column":46},"end":{"line":1279,"column":66}},"id":744},"745":{"loc":{"start":{"line":1280,"column":28},"end":{"line":1280,"column":48}},"id":745},"746":{"loc":{"start":{"line":1287,"column":12},"end":{"line":1313,"column":14}},"id":746},"747":{"loc":{"start":{"line":1287,"column":19},"end":{"line":1313,"column":13}},"id":747},"748":{"loc":{"start":{"line":1288,"column":16},"end":{"line":1312,"column":18}},"id":748},"749":{"loc":{"start":{"line":1288,"column":27},"end":{"line":1288,"column":40}},"id":749},"750":{"loc":{"start":{"line":1290,"column":25},"end":{"line":1290,"column":65}},"id":750},"751":{"loc":{"start":{"line":1291,"column":24},"end":{"line":1291,"column":34}},"id":751},"752":{"loc":{"start":{"line":1292,"column":20},"end":{"line":1292,"column":56}},"id":752},"753":{"loc":{"start":{"line":1293,"column":20},"end":{"line":1312,"column":16}},"id":753},"754":{"loc":{"start":{"line":1293,"column":27},"end":{"line":1311,"column":21}},"id":754},"755":{"loc":{"start":{"line":1294,"column":24},"end":{"line":1310,"column":26}},"id":755},"756":{"loc":{"start":{"line":1294,"column":35},"end":{"line":1294,"column":48}},"id":756},"757":{"loc":{"start":{"line":1296,"column":33},"end":{"line":1296,"column":65}},"id":757},"758":{"loc":{"start":{"line":1297,"column":32},"end":{"line":1297,"column":42}},"id":758},"759":{"loc":{"start":{"line":1298,"column":28},"end":{"line":1298,"column":60}},"id":759},"760":{"loc":{"start":{"line":1299,"column":28},"end":{"line":1309,"column":30}},"id":760},"761":{"loc":{"start":{"line":1299,"column":35},"end":{"line":1309,"column":29}},"id":761},"762":{"loc":{"start":{"line":1301,"column":36},"end":{"line":1303,"column":34}},"id":762},"763":{"loc":{"start":{"line":1300,"column":43},"end":{"line":1300,"column":52}},"id":763},"764":{"loc":{"start":{"line":1302,"column":36},"end":{"line":1302,"column":57}},"id":764},"765":{"loc":{"start":{"line":1305,"column":36},"end":{"line":1307,"column":45}},"id":765},"766":{"loc":{"start":{"line":1306,"column":40},"end":{"line":1306,"column":51}},"id":766},"767":{"loc":{"start":{"line":1307,"column":40},"end":{"line":1307,"column":44}},"id":767},"768":{"loc":{"start":{"line":1318,"column":12},"end":{"line":1328,"column":14}},"id":768},"769":{"loc":{"start":{"line":1318,"column":40},"end":{"line":1328,"column":13}},"id":769},"770":{"loc":{"start":{"line":1320,"column":20},"end":{"line":1326,"column":18}},"id":770},"771":{"loc":{"start":{"line":1321,"column":20},"end":{"line":1325,"column":22}},"id":771},"772":{"loc":{"start":{"line":1321,"column":27},"end":{"line":1325,"column":21}},"id":772},"773":{"loc":{"start":{"line":1331,"column":8},"end":{"line":1359,"column":11}},"id":773},"774":{"loc":{"start":{"line":1331,"column":15},"end":{"line":1359,"column":10}},"id":774},"775":{"loc":{"start":{"line":1331,"column":22},"end":{"line":1331,"column":48}},"id":775},"776":{"loc":{"start":{"line":1332,"column":12},"end":{"line":1332,"column":54}},"id":776},"777":{"loc":{"start":{"line":1332,"column":31},"end":{"line":1332,"column":53}},"id":777},"778":{"loc":{"start":{"line":1334,"column":16},"end":{"line":1336,"column":47}},"id":778},"779":{"loc":{"start":{"line":1335,"column":20},"end":{"line":1335,"column":40}},"id":779},"780":{"loc":{"start":{"line":1336,"column":20},"end":{"line":1336,"column":46}},"id":782},"781":{"loc":{"start":{"line":1334,"column":34},"end":{"line":1334,"column":65}},"id":781},"782":{"loc":{"start":{"line":1336,"column":20},"end":{"line":1336,"column":46}},"id":782},"783":{"loc":{"start":{"line":1338,"column":21},"end":{"line":1338,"column":66}},"id":783},"784":{"loc":{"start":{"line":1339,"column":20},"end":{"line":1339,"column":86}},"id":784},"785":{"loc":{"start":{"line":1341,"column":16},"end":{"line":1355,"column":16}},"id":785},"786":{"loc":{"start":{"line":1341,"column":16},"end":{"line":1354,"column":18}},"id":786},"787":{"loc":{"start":{"line":1342,"column":20},"end":{"line":1344,"column":35}},"id":787},"788":{"loc":{"start":{"line":1343,"column":24},"end":{"line":1343,"column":58}},"id":788},"789":{"loc":{"start":{"line":1344,"column":24},"end":{"line":1344,"column":34}},"id":789},"790":{"loc":{"start":{"line":1345,"column":20},"end":{"line":1345,"column":56}},"id":790},"791":{"loc":{"start":{"line":1345,"column":29},"end":{"line":1345,"column":55}},"id":791},"792":{"loc":{"start":{"line":1347,"column":24},"end":{"line":1347,"column":78}},"id":792},"793":{"loc":{"start":{"line":1347,"column":40},"end":{"line":1347,"column":78}},"id":793},"794":{"loc":{"start":{"line":1348,"column":24},"end":{"line":1348,"column":43}},"id":794},"795":{"loc":{"start":{"line":1349,"column":20},"end":{"line":1349,"column":58}},"id":795},"796":{"loc":{"start":{"line":1349,"column":31},"end":{"line":1349,"column":57}},"id":796},"797":{"loc":{"start":{"line":1350,"column":20},"end":{"line":1350,"column":50}},"id":797},"798":{"loc":{"start":{"line":1350,"column":31},"end":{"line":1350,"column":49}},"id":798},"799":{"loc":{"start":{"line":1351,"column":20},"end":{"line":1351,"column":82}},"id":799},"800":{"loc":{"start":{"line":1351,"column":58},"end":{"line":1351,"column":81}},"id":800},"801":{"loc":{"start":{"line":1352,"column":20},"end":{"line":1352,"column":78}},"id":801},"802":{"loc":{"start":{"line":1352,"column":54},"end":{"line":1352,"column":77}},"id":802},"803":{"loc":{"start":{"line":1353,"column":20},"end":{"line":1353,"column":49}},"id":803},"804":{"loc":{"start":{"line":1355,"column":16},"end":{"line":1355,"column":54}},"id":804},"805":{"loc":{"start":{"line":1358,"column":12},"end":{"line":1358,"column":28}},"id":805},"806":{"loc":{"start":{"line":1364,"column":0},"end":{"line":1364,"column":34}},"id":806},"807":{"loc":{"start":{"line":1367,"column":8},"end":{"line":1367,"column":26}},"id":807},"808":{"loc":{"start":{"line":1368,"column":8},"end":{"line":1368,"column":25}},"id":808},"809":{"loc":{"start":{"line":1369,"column":10},"end":{"line":1369,"column":33}},"id":809},"810":{"loc":{"start":{"line":1370,"column":8},"end":{"line":1370,"column":25}},"id":810},"811":{"loc":{"start":{"line":1372,"column":8},"end":{"line":1372,"column":39}},"id":811},"812":{"loc":{"start":{"line":1372,"column":20},"end":{"line":1372,"column":38}},"id":812},"813":{"loc":{"start":{"line":1373,"column":8},"end":{"line":1373,"column":23}},"id":813},"814":{"loc":{"start":{"line":1374,"column":15},"end":{"line":1374,"column":31}},"id":814},"815":{"loc":{"start":{"line":1375,"column":12},"end":{"line":1375,"column":46}},"id":815},"816":{"loc":{"start":{"line":1375,"column":12},"end":{"line":1375,"column":45}},"id":816},"817":{"loc":{"start":{"line":1375,"column":23},"end":{"line":1375,"column":44}},"id":817},"818":{"loc":{"start":{"line":1375,"column":29},"end":{"line":1375,"column":44}},"id":818},"819":{"loc":{"start":{"line":1376,"column":12},"end":{"line":1376,"column":26}},"id":819},"820":{"loc":{"start":{"line":1376,"column":12},"end":{"line":1376,"column":25}},"id":820},"821":{"loc":{"start":{"line":1378,"column":8},"end":{"line":1378,"column":21}},"id":821},"822":{"loc":{"start":{"line":1383,"column":8},"end":{"line":1383,"column":50}},"id":822},"823":{"loc":{"start":{"line":1383,"column":8},"end":{"line":1383,"column":28}},"id":823},"824":{"loc":{"start":{"line":1383,"column":32},"end":{"line":1383,"column":50}},"id":824},"825":{"loc":{"start":{"line":1384,"column":8},"end":{"line":1384,"column":37}},"id":825},"826":{"loc":{"start":{"line":1384,"column":15},"end":{"line":1384,"column":36}},"id":826},"827":{"loc":{"start":{"line":1385,"column":15},"end":{"line":1385,"column":36}},"id":827},"828":{"loc":{"start":{"line":1386,"column":8},"end":{"line":1391,"column":10}},"id":828},"829":{"loc":{"start":{"line":1386,"column":15},"end":{"line":1391,"column":9}},"id":829},"830":{"loc":{"start":{"line":1386,"column":15},"end":{"line":1389,"column":9}},"id":830},"831":{"loc":{"start":{"line":1387,"column":12},"end":{"line":1387,"column":42}},"id":831},"832":{"loc":{"start":{"line":1388,"column":12},"end":{"line":1388,"column":45}},"id":832},"833":{"loc":{"start":{"line":1389,"column":13},"end":{"line":1391,"column":9}},"id":833},"834":{"loc":{"start":{"line":1390,"column":12},"end":{"line":1390,"column":30}},"id":834},"835":{"loc":{"start":{"line":1393,"column":8},"end":{"line":1393,"column":37}},"id":835},"836":{"loc":{"start":{"line":1393,"column":15},"end":{"line":1393,"column":36}},"id":836},"837":{"loc":{"start":{"line":1398,"column":8},"end":{"line":1398,"column":30}},"id":837},"838":{"loc":{"start":{"line":1399,"column":8},"end":{"line":1399,"column":48}},"id":838},"839":{"loc":{"start":{"line":1399,"column":15},"end":{"line":1399,"column":47}},"id":839},"840":{"loc":{"start":{"line":1399,"column":15},"end":{"line":1399,"column":41}},"id":840},"841":{"loc":{"start":{"line":1401,"column":8},"end":{"line":1404,"column":10}},"id":841},"842":{"loc":{"start":{"line":1401,"column":15},"end":{"line":1404,"column":9}},"id":842},"843":{"loc":{"start":{"line":1402,"column":12},"end":{"line":1402,"column":33}},"id":843},"844":{"loc":{"start":{"line":1403,"column":12},"end":{"line":1403,"column":50}},"id":844},"845":{"loc":{"start":{"line":1403,"column":12},"end":{"line":1403,"column":44}},"id":845},"846":{"loc":{"start":{"line":1403,"column":28},"end":{"line":1403,"column":43}},"id":846},"847":{"loc":{"start":{"line":1409,"column":4},"end":{"line":1409,"column":39}},"id":847},"848":{"loc":{"start":{"line":1409,"column":11},"end":{"line":1409,"column":38}},"id":848}}}},"/Users/kris/q-io/http-cookie.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":4},"4":{"index":4,"count":4},"5":{"index":5,"count":4},"6":{"index":6,"count":4},"7":{"index":7,"count":4},"8":{"index":8,"count":4},"9":{"index":9,"count":4},"10":{"index":10,"count":4},"11":{"index":11,"count":4},"12":{"index":12,"count":4},"13":{"index":13,"count":4},"14":{"index":14,"count":4},"15":{"index":15,"count":4},"16":{"index":16,"count":4},"17":{"index":17,"count":4},"18":{"index":18,"count":8},"19":{"index":19,"count":8},"20":{"index":20,"count":4},"21":{"index":21,"count":4},"23":{"index":23,"count":4},"25":{"index":25,"count":4},"29":{"index":29,"count":4},"34":{"index":34,"count":4},"36":{"index":36,"count":4},"38":{"index":38,"count":4},"39":{"index":39,"count":1},"40":{"index":40,"count":2},"41":{"index":41,"count":2},"42":{"index":42,"count":2},"43":{"index":43,"count":2},"44":{"index":44,"count":2},"56":{"index":56,"count":2}},"blocks":{"0":{"index":0,"count":4},"1":{"index":1,"count":4},"2":{"index":2,"count":8},"9":{"index":9,"count":2},"10":{"index":10,"count":2}},"hash":"add1cd67243c5d988b19e141c38f2fd9","instrumentor":{"blockCounter":16,"nodeCounter":57,"source":"/**\n * Provides utilities for reading and writing HTTP cookies.\n * @module\n */\n\n/*whatsupdoc*/\n\nvar QS = require(\"qs\");\n\n/**\n * @param {String} cookie\n * @returns {Object}\n */\nexports.parse = function (cookie, date) {\n    date = date || new Date();\n    var parsed = {};\n    var terms = cookie.split(/[;,]/g);\n    var keyValue = terms.shift().split(\"=\");\n    parsed.key = keyValue[0];\n    parsed.value = keyValue[1];\n    terms.forEach(function (term) {\n        var parts = term.split(\"=\").map(function (part) {\n            return part.trim();\n        });\n        var key = parts[0], value = parts[1];\n        if (/^domain$/i.test(key)) {\n            parsed.domain = value;\n        } else if (/^path$/i.test(key)) {\n            parsed.path = value;\n        } else if (/^expires$/i.test(key)) {\n            parsed.expires = new Date(\n                +new Date() + // actual now\n                (new Date(value) - date) // server offset\n            );\n        } else if (/^max-age$/i.test(key)) {\n            parsed.expires = new Date(\n                new Date().getTime() +\n                (value * 1000)\n            );\n        } else if (/^secure$/i.test(key)) {\n            parsed.secure = true;\n        } else if (/^httponly$/i.test(key)) {\n            parsed.httpOnly = true;\n        }\n    });\n    return parsed;\n};\n\n/**\n * @param {String} key\n * @param {String} value\n * @param {Object} options (optional)\n * @returns {String} a cookie string\n */\nexports.stringify = function (key, value, options) {\n    var cookie = (\n        encodeURIComponent(key) + \"=\" +\n        encodeURIComponent(value)\n    );\n    if (options) {\n        if (options.domain)\n            cookie += \"; Domain=\" + encodeURIComponent(options.domain);\n        if (options.path)\n            cookie += \"; Path=\" + encodeURIComponent(options.path);\n        if (options.expires)\n            cookie += \"; Expires=\" + options.expires.toGMTString();\n        if (options.secure)\n            cookie += \"; Secure\";\n        if (options.httpOnly)\n            cookie += \"; HttpOnly\";\n    }\n    return cookie;\n};","nodes":{"0":{"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":23}},"id":0},"1":{"loc":{"start":{"line":8,"column":9},"end":{"line":8,"column":22}},"id":1},"2":{"loc":{"start":{"line":14,"column":0},"end":{"line":47,"column":2}},"id":2},"3":{"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":30}},"id":3},"4":{"loc":{"start":{"line":15,"column":11},"end":{"line":15,"column":29}},"id":4},"5":{"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":20}},"id":5},"6":{"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":38}},"id":6},"7":{"loc":{"start":{"line":17,"column":16},"end":{"line":17,"column":37}},"id":7},"8":{"loc":{"start":{"line":18,"column":4},"end":{"line":18,"column":44}},"id":8},"9":{"loc":{"start":{"line":18,"column":19},"end":{"line":18,"column":43}},"id":9},"10":{"loc":{"start":{"line":18,"column":30},"end":{"line":18,"column":32}},"id":10},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":29}},"id":11},"12":{"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":31}},"id":12},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":45,"column":7}},"id":13},"14":{"loc":{"start":{"line":21,"column":4},"end":{"line":45,"column":6}},"id":14},"15":{"loc":{"start":{"line":22,"column":8},"end":{"line":24,"column":11}},"id":15},"16":{"loc":{"start":{"line":22,"column":20},"end":{"line":24,"column":10}},"id":16},"17":{"loc":{"start":{"line":22,"column":30},"end":{"line":22,"column":35}},"id":17},"18":{"loc":{"start":{"line":23,"column":12},"end":{"line":23,"column":31}},"id":18},"19":{"loc":{"start":{"line":23,"column":19},"end":{"line":23,"column":30}},"id":19},"20":{"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":45}},"id":20},"21":{"loc":{"start":{"line":26,"column":12},"end":{"line":26,"column":33}},"id":21},"22":{"loc":{"start":{"line":27,"column":12},"end":{"line":27,"column":34}},"id":22},"23":{"loc":{"start":{"line":28,"column":19},"end":{"line":28,"column":38}},"id":23},"24":{"loc":{"start":{"line":29,"column":12},"end":{"line":29,"column":32}},"id":24},"25":{"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":41}},"id":25},"26":{"loc":{"start":{"line":31,"column":12},"end":{"line":34,"column":14}},"id":26},"27":{"loc":{"start":{"line":32,"column":16},"end":{"line":33,"column":40}},"id":27},"28":{"loc":{"start":{"line":33,"column":16},"end":{"line":33,"column":40}},"id":28},"29":{"loc":{"start":{"line":35,"column":19},"end":{"line":35,"column":41}},"id":29},"30":{"loc":{"start":{"line":36,"column":12},"end":{"line":39,"column":14}},"id":30},"31":{"loc":{"start":{"line":37,"column":16},"end":{"line":38,"column":30}},"id":31},"32":{"loc":{"start":{"line":37,"column":16},"end":{"line":37,"column":36}},"id":32},"33":{"loc":{"start":{"line":38,"column":16},"end":{"line":38,"column":30}},"id":33},"34":{"loc":{"start":{"line":40,"column":19},"end":{"line":40,"column":40}},"id":34},"35":{"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":33}},"id":35},"36":{"loc":{"start":{"line":42,"column":19},"end":{"line":42,"column":42}},"id":36},"37":{"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":35}},"id":37},"38":{"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":18}},"id":38},"39":{"loc":{"start":{"line":55,"column":0},"end":{"line":73,"column":2}},"id":39},"40":{"loc":{"start":{"line":56,"column":4},"end":{"line":59,"column":6}},"id":40},"41":{"loc":{"start":{"line":56,"column":17},"end":{"line":59,"column":5}},"id":41},"42":{"loc":{"start":{"line":57,"column":8},"end":{"line":57,"column":37}},"id":42},"43":{"loc":{"start":{"line":57,"column":8},"end":{"line":57,"column":31}},"id":43},"44":{"loc":{"start":{"line":58,"column":8},"end":{"line":58,"column":33}},"id":44},"45":{"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":71}},"id":45},"46":{"loc":{"start":{"line":62,"column":22},"end":{"line":62,"column":70}},"id":46},"47":{"loc":{"start":{"line":62,"column":36},"end":{"line":62,"column":70}},"id":47},"48":{"loc":{"start":{"line":64,"column":12},"end":{"line":64,"column":67}},"id":48},"49":{"loc":{"start":{"line":64,"column":22},"end":{"line":64,"column":66}},"id":49},"50":{"loc":{"start":{"line":64,"column":34},"end":{"line":64,"column":66}},"id":50},"51":{"loc":{"start":{"line":66,"column":12},"end":{"line":66,"column":67}},"id":51},"52":{"loc":{"start":{"line":66,"column":22},"end":{"line":66,"column":66}},"id":52},"53":{"loc":{"start":{"line":66,"column":37},"end":{"line":66,"column":66}},"id":53},"54":{"loc":{"start":{"line":68,"column":12},"end":{"line":68,"column":33}},"id":54},"55":{"loc":{"start":{"line":70,"column":12},"end":{"line":70,"column":35}},"id":55},"56":{"loc":{"start":{"line":72,"column":4},"end":{"line":72,"column":18}},"id":56}}}},"/Users/kris/q-io/spec/http-apps/interpret-range-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":7},"9":{"index":9,"count":7},"10":{"index":10,"count":7},"11":{"index":11,"count":7},"12":{"index":12,"count":7},"13":{"index":13,"count":7},"14":{"index":14,"count":7}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":7},"2":{"index":2,"count":7}},"hash":"353abf922edb9ef3ad6663ea5822398b","instrumentor":{"blockCounter":3,"nodeCounter":15,"source":"// http://labs.apache.org/webarch/http/draft-fielding-http/p5-range.html#range.units\n\nvar Apps = require(\"../../http-apps\");\n\nvar size = 10000;\nvar tests = [\n    {\n        description: \"The first 500 bytes (byte offsets 0-499, inclusive)\",\n        input: \"bytes=0-499\",\n        oracle: {begin: 0, end: 500}\n    },\n    {\n        description: \"The second 500 bytes (byte offsets 500-999, inclusive)\",\n        input: \"bytes=500-999\",\n        oracle: {begin: 500, end: 1000}\n    },\n    {\n        description: \"The final 500 bytes (byte offsets 9500-9999, inclusive)\",\n        input: \"bytes=-500\",\n        oracle: {begin: 9500, end: 10000}\n    },\n    {\n        description: \"The final 500 bytes (byte offsets 9500-9999, inclusive)\",\n        input: \"bytes=9500-\",\n        oracle: {begin: 9500, end: 10000}\n    },\n    {\n        description: \"The first and last bytes only (bytes 0 and 9999)\",\n        input: \"bytes=0-0,-1\",\n        oracle: {begin: 0, end: 1}\n    },\n    {\n        description: \"Legal but not canonical specification of the second 500 bytes (byte offsets 500-999, inclusive)\",\n        input: \"bytes=500-600,601-999\",\n        oracle: {begin: 500, end: 1000}\n    },\n    {\n        description: \"Legal but not canonical specification of the second 500 bytes (byte offsets 500-999, inclusive)\",\n        input: \"bytes=500-700,601-999\",\n        oracle: {begin: 500, end: 1000}\n    }\n];\n\ndescribe(\"range interpretation\", function () {\n    tests.forEach(function (test) {\n        it(\"should interpret \" + test.input, function () {\n            expect(Apps.interpretFirstRange(test.input, size)).toEqual(test.oracle);\n        });\n    });\n});","nodes":{"0":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":38}},"id":0},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":37}},"id":1},"2":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":17}},"id":2},"3":{"loc":{"start":{"line":6,"column":0},"end":{"line":42,"column":2}},"id":3},"4":{"loc":{"start":{"line":44,"column":0},"end":{"line":50,"column":3}},"id":4},"5":{"loc":{"start":{"line":44,"column":0},"end":{"line":50,"column":2}},"id":5},"6":{"loc":{"start":{"line":45,"column":4},"end":{"line":49,"column":7}},"id":6},"7":{"loc":{"start":{"line":45,"column":4},"end":{"line":49,"column":6}},"id":7},"8":{"loc":{"start":{"line":46,"column":8},"end":{"line":48,"column":11}},"id":8},"9":{"loc":{"start":{"line":46,"column":8},"end":{"line":48,"column":10}},"id":9},"10":{"loc":{"start":{"line":46,"column":11},"end":{"line":46,"column":43}},"id":10},"11":{"loc":{"start":{"line":47,"column":12},"end":{"line":47,"column":84}},"id":11},"12":{"loc":{"start":{"line":47,"column":12},"end":{"line":47,"column":83}},"id":12},"13":{"loc":{"start":{"line":47,"column":18},"end":{"line":47,"column":62}},"id":13},"14":{"loc":{"start":{"line":47,"column":19},"end":{"line":47,"column":61}},"id":14}}}},"/Users/kris/q-io/spec/http-apps/partial-range-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1}},"hash":"d7d7ab6eb82b393d03f7dcef122b5001","instrumentor":{"blockCounter":5,"nodeCounter":37,"source":"require(\"../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar Http = require(\"../../http\");\nvar Apps = require(\"../../http-apps\");\nvar FS = require(\"../../fs\");\n\ndescribe(\"http client and server apps\", function () {\n\n    it(\"should read a partial range\", function () {\n        var fixture = FS.join(module.directory || __dirname, \"fixtures\", \"1234.txt\");\n        return Http.Server(Apps.Cap(Apps.File(fixture)))\n        .listen(0)\n        .then(function (server) {\n            var port = server.node.address().port;\n            return Http.read({\n                \"url\": \"http://127.0.0.1:\" + port + \"/\",\n                \"headers\": {\n                    \"range\": \"bytes=1-2\"\n                }\n            }, function (response) {\n                return response.status === 206;\n            })\n            .then(function (content) {\n                expect(content.toString('utf-8')).toEqual('23');\n            })\n            .finally(server.stop)\n        })\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":33}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":21}},"id":2},"3":{"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":20}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"id":4},"5":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":32}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":38}},"id":6},"7":{"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":37}},"id":7},"8":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}},"id":8},"9":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":28}},"id":9},"10":{"loc":{"start":{"line":7,"column":0},"end":{"line":30,"column":3}},"id":10},"11":{"loc":{"start":{"line":7,"column":0},"end":{"line":30,"column":2}},"id":11},"12":{"loc":{"start":{"line":9,"column":4},"end":{"line":28,"column":7}},"id":12},"13":{"loc":{"start":{"line":9,"column":4},"end":{"line":28,"column":6}},"id":13},"14":{"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":85}},"id":14},"15":{"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":84}},"id":15},"16":{"loc":{"start":{"line":10,"column":30},"end":{"line":10,"column":59}},"id":16},"17":{"loc":{"start":{"line":11,"column":8},"end":{"line":28,"column":4}},"id":17},"18":{"loc":{"start":{"line":11,"column":15},"end":{"line":27,"column":10}},"id":18},"19":{"loc":{"start":{"line":12,"column":15},"end":{"line":12,"column":18}},"id":19},"20":{"loc":{"start":{"line":11,"column":26},"end":{"line":11,"column":56}},"id":20},"21":{"loc":{"start":{"line":11,"column":27},"end":{"line":11,"column":55}},"id":21},"22":{"loc":{"start":{"line":11,"column":36},"end":{"line":11,"column":54}},"id":22},"23":{"loc":{"start":{"line":14,"column":12},"end":{"line":14,"column":50}},"id":23},"24":{"loc":{"start":{"line":14,"column":42},"end":{"line":14,"column":44}},"id":24},"25":{"loc":{"start":{"line":15,"column":12},"end":{"line":27,"column":8}},"id":25},"26":{"loc":{"start":{"line":15,"column":19},"end":{"line":26,"column":33}},"id":26},"27":{"loc":{"start":{"line":23,"column":17},"end":{"line":25,"column":14}},"id":27},"28":{"loc":{"start":{"line":15,"column":28},"end":{"line":22,"column":14}},"id":28},"29":{"loc":{"start":{"line":16,"column":23},"end":{"line":16,"column":55}},"id":29},"30":{"loc":{"start":{"line":16,"column":23},"end":{"line":16,"column":49}},"id":30},"31":{"loc":{"start":{"line":21,"column":16},"end":{"line":21,"column":47}},"id":31},"32":{"loc":{"start":{"line":21,"column":23},"end":{"line":21,"column":46}},"id":32},"33":{"loc":{"start":{"line":24,"column":16},"end":{"line":24,"column":64}},"id":33},"34":{"loc":{"start":{"line":24,"column":16},"end":{"line":24,"column":63}},"id":34},"35":{"loc":{"start":{"line":24,"column":22},"end":{"line":24,"column":49}},"id":35},"36":{"loc":{"start":{"line":24,"column":23},"end":{"line":24,"column":48}},"id":36}}}},"/Users/kris/q-io/spec/http-apps/proxy-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"65":{"index":65,"count":1},"66":{"index":66,"count":1},"67":{"index":67,"count":1},"68":{"index":68,"count":1},"69":{"index":69,"count":1},"70":{"index":70,"count":1},"71":{"index":71,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1}},"hash":"5700fd2f373b09676b1a324f5b9c6672","instrumentor":{"blockCounter":9,"nodeCounter":72,"source":"require(\"../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar Http = require(\"../../http\");\nvar Apps = require(\"../../http-apps\");\nvar FS = require(\"../../fs\");\n\ndescribe(\"http proxy\", function () {\n\n    it(\"should work\", function () {\n\n        var requestProxy;\n        var responseProxy;\n        var requestActual;\n        var responseActual;\n\n        var server1 = Http.Server(\n            Apps.Trap(\n                Apps.Tap(\n                    Apps.Branch({\n                        \"foo\": Apps.Branch({\n                            \"bar\": Apps.Cap(Apps.Content([\"Hello, World!\"]))\n                        })\n                    }),\n                    function (request) {\n                        requestActual = request;\n                    }\n                ),\n                function (response) {\n                    responseActual = response;\n                    return response;\n                }\n            )\n        );\n\n        return Q.when(server1.listen(0))\n        .then(function (server1) {\n            var port = server1.node.address().port;\n\n            var server2 = Http.Server(\n                Apps.Trap(\n                    Apps.Tap(\n                        Apps.ProxyTree(\"http://127.0.0.1:\" + port + \"/foo/\"),\n                        function (request) {\n                            requestProxy = request;\n                        }\n                    ),\n                    function (response) {\n                        responseProxy = response;\n                        return response;\n                    }\n                )\n            );\n\n            return [server1, server2.listen(0)];\n        })\n        .spread(function (server1, server2) {\n            var port = server2.node.address().port;\n            return Http.read({\n                url: \"http://127.0.0.1:\" + port + \"/bar\",\n                charset: \"utf-8\"\n            })\n            .then(function (content) {\n                expect(content).toBe(\"Hello, World!\");\n                expect(requestActual).toBeTruthy();\n                expect(responseActual).toBeTruthy();\n                expect(requestProxy).toBeTruthy();\n                expect(responseProxy).toBeTruthy();\n            })\n            .finally(server1.stop)\n            .finally(server2.stop)\n        })\n\n    });\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":33}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":21}},"id":2},"3":{"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":20}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"id":4},"5":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":32}},"id":5},"6":{"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":38}},"id":6},"7":{"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":37}},"id":7},"8":{"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}},"id":8},"9":{"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":28}},"id":9},"10":{"loc":{"start":{"line":7,"column":0},"end":{"line":75,"column":3}},"id":10},"11":{"loc":{"start":{"line":7,"column":0},"end":{"line":75,"column":2}},"id":11},"12":{"loc":{"start":{"line":9,"column":4},"end":{"line":73,"column":7}},"id":12},"13":{"loc":{"start":{"line":9,"column":4},"end":{"line":73,"column":6}},"id":13},"14":{"loc":{"start":{"line":11,"column":8},"end":{"line":11,"column":25}},"id":14},"15":{"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":26}},"id":15},"16":{"loc":{"start":{"line":13,"column":8},"end":{"line":13,"column":26}},"id":16},"17":{"loc":{"start":{"line":14,"column":8},"end":{"line":14,"column":27}},"id":17},"18":{"loc":{"start":{"line":16,"column":8},"end":{"line":33,"column":10}},"id":18},"19":{"loc":{"start":{"line":16,"column":22},"end":{"line":33,"column":9}},"id":19},"20":{"loc":{"start":{"line":17,"column":12},"end":{"line":32,"column":13}},"id":20},"21":{"loc":{"start":{"line":18,"column":16},"end":{"line":27,"column":17}},"id":21},"22":{"loc":{"start":{"line":19,"column":20},"end":{"line":23,"column":22}},"id":22},"23":{"loc":{"start":{"line":20,"column":31},"end":{"line":22,"column":26}},"id":23},"24":{"loc":{"start":{"line":21,"column":35},"end":{"line":21,"column":76}},"id":24},"25":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":75}},"id":25},"26":{"loc":{"start":{"line":25,"column":24},"end":{"line":25,"column":48}},"id":26},"27":{"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":46}},"id":27},"28":{"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":36}},"id":28},"29":{"loc":{"start":{"line":35,"column":8},"end":{"line":73,"column":4}},"id":29},"30":{"loc":{"start":{"line":35,"column":15},"end":{"line":71,"column":10}},"id":30},"31":{"loc":{"start":{"line":36,"column":13},"end":{"line":55,"column":10}},"id":31},"32":{"loc":{"start":{"line":35,"column":21},"end":{"line":35,"column":40}},"id":32},"33":{"loc":{"start":{"line":35,"column":22},"end":{"line":35,"column":39}},"id":33},"34":{"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":51}},"id":34},"35":{"loc":{"start":{"line":37,"column":43},"end":{"line":37,"column":45}},"id":35},"36":{"loc":{"start":{"line":39,"column":12},"end":{"line":52,"column":14}},"id":36},"37":{"loc":{"start":{"line":39,"column":26},"end":{"line":52,"column":13}},"id":37},"38":{"loc":{"start":{"line":40,"column":16},"end":{"line":51,"column":17}},"id":38},"39":{"loc":{"start":{"line":41,"column":20},"end":{"line":46,"column":21}},"id":39},"40":{"loc":{"start":{"line":42,"column":24},"end":{"line":42,"column":76}},"id":40},"41":{"loc":{"start":{"line":42,"column":39},"end":{"line":42,"column":75}},"id":41},"42":{"loc":{"start":{"line":42,"column":39},"end":{"line":42,"column":65}},"id":42},"43":{"loc":{"start":{"line":44,"column":28},"end":{"line":44,"column":51}},"id":43},"44":{"loc":{"start":{"line":48,"column":24},"end":{"line":48,"column":49}},"id":44},"45":{"loc":{"start":{"line":49,"column":24},"end":{"line":49,"column":40}},"id":45},"46":{"loc":{"start":{"line":54,"column":12},"end":{"line":54,"column":48}},"id":46},"47":{"loc":{"start":{"line":54,"column":29},"end":{"line":54,"column":46}},"id":47},"48":{"loc":{"start":{"line":57,"column":12},"end":{"line":57,"column":51}},"id":48},"49":{"loc":{"start":{"line":57,"column":43},"end":{"line":57,"column":45}},"id":49},"50":{"loc":{"start":{"line":58,"column":12},"end":{"line":71,"column":8}},"id":50},"51":{"loc":{"start":{"line":58,"column":19},"end":{"line":70,"column":34}},"id":51},"52":{"loc":{"start":{"line":69,"column":20},"end":{"line":69,"column":34}},"id":52},"53":{"loc":{"start":{"line":62,"column":17},"end":{"line":68,"column":14}},"id":53},"54":{"loc":{"start":{"line":58,"column":28},"end":{"line":61,"column":14}},"id":54},"55":{"loc":{"start":{"line":59,"column":21},"end":{"line":59,"column":56}},"id":55},"56":{"loc":{"start":{"line":59,"column":21},"end":{"line":59,"column":47}},"id":56},"57":{"loc":{"start":{"line":63,"column":16},"end":{"line":63,"column":54}},"id":57},"58":{"loc":{"start":{"line":63,"column":16},"end":{"line":63,"column":53}},"id":58},"59":{"loc":{"start":{"line":63,"column":22},"end":{"line":63,"column":31}},"id":59},"60":{"loc":{"start":{"line":64,"column":16},"end":{"line":64,"column":51}},"id":60},"61":{"loc":{"start":{"line":64,"column":16},"end":{"line":64,"column":50}},"id":61},"62":{"loc":{"start":{"line":64,"column":22},"end":{"line":64,"column":37}},"id":62},"63":{"loc":{"start":{"line":65,"column":16},"end":{"line":65,"column":52}},"id":63},"64":{"loc":{"start":{"line":65,"column":16},"end":{"line":65,"column":51}},"id":64},"65":{"loc":{"start":{"line":65,"column":22},"end":{"line":65,"column":38}},"id":65},"66":{"loc":{"start":{"line":66,"column":16},"end":{"line":66,"column":50}},"id":66},"67":{"loc":{"start":{"line":66,"column":16},"end":{"line":66,"column":49}},"id":67},"68":{"loc":{"start":{"line":66,"column":22},"end":{"line":66,"column":36}},"id":68},"69":{"loc":{"start":{"line":67,"column":16},"end":{"line":67,"column":51}},"id":69},"70":{"loc":{"start":{"line":67,"column":16},"end":{"line":67,"column":50}},"id":70},"71":{"loc":{"start":{"line":67,"column":22},"end":{"line":67,"column":37}},"id":71}}}},"/Users/kris/q-io/spec/http/basic-spec.js":{"nodes":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1},"13":{"index":13,"count":1},"14":{"index":14,"count":1},"15":{"index":15,"count":1},"16":{"index":16,"count":1},"17":{"index":17,"count":1},"18":{"index":18,"count":1},"19":{"index":19,"count":1},"20":{"index":20,"count":1},"21":{"index":21,"count":1},"22":{"index":22,"count":1},"23":{"index":23,"count":1},"24":{"index":24,"count":1},"25":{"index":25,"count":1},"26":{"index":26,"count":1},"27":{"index":27,"count":1},"28":{"index":28,"count":1},"29":{"index":29,"count":1},"30":{"index":30,"count":1},"31":{"index":31,"count":1},"32":{"index":32,"count":1},"33":{"index":33,"count":1},"34":{"index":34,"count":1},"35":{"index":35,"count":1},"36":{"index":36,"count":1},"37":{"index":37,"count":1},"38":{"index":38,"count":1},"39":{"index":39,"count":1},"40":{"index":40,"count":1},"41":{"index":41,"count":1},"42":{"index":42,"count":1},"43":{"index":43,"count":1},"44":{"index":44,"count":1},"45":{"index":45,"count":1},"46":{"index":46,"count":1},"47":{"index":47,"count":1},"48":{"index":48,"count":1},"49":{"index":49,"count":1},"50":{"index":50,"count":1},"51":{"index":51,"count":1},"52":{"index":52,"count":1},"53":{"index":53,"count":1},"54":{"index":54,"count":1},"55":{"index":55,"count":1},"56":{"index":56,"count":1},"57":{"index":57,"count":1},"58":{"index":58,"count":1},"59":{"index":59,"count":1},"60":{"index":60,"count":1},"61":{"index":61,"count":1},"62":{"index":62,"count":1},"63":{"index":63,"count":1},"64":{"index":64,"count":1},"65":{"index":65,"count":1},"66":{"index":66,"count":1},"67":{"index":67,"count":1}},"blocks":{"0":{"index":0,"count":1},"1":{"index":1,"count":1},"2":{"index":2,"count":1},"3":{"index":3,"count":1},"4":{"index":4,"count":1},"5":{"index":5,"count":1},"6":{"index":6,"count":1},"7":{"index":7,"count":1},"8":{"index":8,"count":1},"9":{"index":9,"count":1},"10":{"index":10,"count":1},"11":{"index":11,"count":1},"12":{"index":12,"count":1}},"hash":"bd1492c86cdd9f7e9f5b1cef51b5323f","instrumentor":{"blockCounter":13,"nodeCounter":68,"source":"require(\"../lib/jasmine-promise\");\nvar Q = require(\"q\");\nvar HTTP = require(\"../../http\");\n\ndescribe(\"http server and client\", function () {\n\n    it(\"should work as both server and client\", function () {\n        var response = {\n            \"status\": 200,\n            \"headers\": {\n                \"content-type\": \"text/plain\"\n            },\n            \"body\": [\n                \"Hello, World!\"\n            ]\n        };\n\n        var server = HTTP.Server(function () {\n            return response;\n        });\n\n        return server.listen(0)\n        .then(function (server) {\n            var port = server.node.address().port;\n\n            var request = {\n                \"host\": \"localhost\",\n                \"port\": port,\n                \"headers\": {\n                    \"host\": \"localhost\"\n                }\n            };\n\n            return HTTP.request(request)\n            .then(function (response) {\n                expect(Q.isPromise(response.body)).toBe(false);\n                var acc = [];\n                return response.body.read()\n                .then(function (body) {\n                    expect(body.toString(\"utf-8\")).toBe(\"Hello, World!\");\n                });\n            })\n        })\n        .finally(server.stop)\n    });\n\n    it(\"should defer a response\", function () {\n        var response = {\n            \"status\": 200,\n            \"headers\": {\n                \"content-type\": \"text/plain; charset=utf-8\"\n            },\n            \"body\": {\n                \"forEach\": function (write) {\n                    var deferred = Q.defer();\n                    write(\"Hello, World!\");\n                    setTimeout(function () {\n                        deferred.resolve();\n                    }, 100);\n                    return deferred.promise;\n                }\n            }\n        };\n\n        var server = HTTP.Server(function () {\n            return response;\n        });\n\n        return server.listen(0).then(function (server) {\n            var port = server.node.address().port;\n\n            var request = {\n                \"host\": \"localhost\",\n                \"port\": port,\n                \"headers\": {\n                    \"host\": \"localhost\"\n                },\n                \"charset\": \"utf-8\"\n            };\n\n            return HTTP.request(request)\n            .then(function (response) {\n                var acc = [];\n                return response.body.read()\n                .then(function (body) {\n                    expect(body).toBe(\"Hello, World!\");\n                });\n            })\n        })\n        .finally(server.stop)\n    });\n\n\n});","nodes":{"0":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}},"id":0},"1":{"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":33}},"id":1},"2":{"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":21}},"id":2},"3":{"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":20}},"id":3},"4":{"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"id":4},"5":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":32}},"id":5},"6":{"loc":{"start":{"line":5,"column":0},"end":{"line":94,"column":3}},"id":6},"7":{"loc":{"start":{"line":5,"column":0},"end":{"line":94,"column":2}},"id":7},"8":{"loc":{"start":{"line":7,"column":4},"end":{"line":45,"column":7}},"id":8},"9":{"loc":{"start":{"line":7,"column":4},"end":{"line":45,"column":6}},"id":9},"10":{"loc":{"start":{"line":8,"column":8},"end":{"line":16,"column":10}},"id":10},"11":{"loc":{"start":{"line":18,"column":8},"end":{"line":20,"column":11}},"id":11},"12":{"loc":{"start":{"line":18,"column":21},"end":{"line":20,"column":10}},"id":12},"13":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":28}},"id":13},"14":{"loc":{"start":{"line":22,"column":8},"end":{"line":45,"column":4}},"id":14},"15":{"loc":{"start":{"line":22,"column":15},"end":{"line":44,"column":29}},"id":15},"16":{"loc":{"start":{"line":23,"column":13},"end":{"line":43,"column":10}},"id":16},"17":{"loc":{"start":{"line":22,"column":28},"end":{"line":22,"column":31}},"id":17},"18":{"loc":{"start":{"line":24,"column":12},"end":{"line":24,"column":50}},"id":18},"19":{"loc":{"start":{"line":24,"column":42},"end":{"line":24,"column":44}},"id":19},"20":{"loc":{"start":{"line":26,"column":12},"end":{"line":32,"column":14}},"id":20},"21":{"loc":{"start":{"line":34,"column":12},"end":{"line":43,"column":8}},"id":21},"22":{"loc":{"start":{"line":34,"column":19},"end":{"line":42,"column":14}},"id":22},"23":{"loc":{"start":{"line":34,"column":31},"end":{"line":34,"column":40}},"id":23},"24":{"loc":{"start":{"line":36,"column":16},"end":{"line":36,"column":63}},"id":24},"25":{"loc":{"start":{"line":36,"column":16},"end":{"line":36,"column":62}},"id":25},"26":{"loc":{"start":{"line":36,"column":22},"end":{"line":36,"column":50}},"id":26},"27":{"loc":{"start":{"line":36,"column":23},"end":{"line":36,"column":49}},"id":27},"28":{"loc":{"start":{"line":37,"column":16},"end":{"line":37,"column":29}},"id":28},"29":{"loc":{"start":{"line":38,"column":16},"end":{"line":41,"column":19}},"id":29},"30":{"loc":{"start":{"line":38,"column":23},"end":{"line":41,"column":18}},"id":30},"31":{"loc":{"start":{"line":38,"column":41},"end":{"line":38,"column":43}},"id":31},"32":{"loc":{"start":{"line":40,"column":20},"end":{"line":40,"column":73}},"id":32},"33":{"loc":{"start":{"line":40,"column":20},"end":{"line":40,"column":72}},"id":33},"34":{"loc":{"start":{"line":40,"column":26},"end":{"line":40,"column":50}},"id":34},"35":{"loc":{"start":{"line":40,"column":27},"end":{"line":40,"column":49}},"id":35},"36":{"loc":{"start":{"line":47,"column":4},"end":{"line":91,"column":7}},"id":36},"37":{"loc":{"start":{"line":47,"column":4},"end":{"line":91,"column":6}},"id":37},"38":{"loc":{"start":{"line":48,"column":8},"end":{"line":63,"column":10}},"id":38},"39":{"loc":{"start":{"line":55,"column":20},"end":{"line":55,"column":45}},"id":39},"40":{"loc":{"start":{"line":55,"column":35},"end":{"line":55,"column":44}},"id":40},"41":{"loc":{"start":{"line":56,"column":20},"end":{"line":56,"column":43}},"id":41},"42":{"loc":{"start":{"line":56,"column":20},"end":{"line":56,"column":42}},"id":42},"43":{"loc":{"start":{"line":57,"column":20},"end":{"line":59,"column":28}},"id":43},"44":{"loc":{"start":{"line":57,"column":20},"end":{"line":59,"column":27}},"id":44},"45":{"loc":{"start":{"line":58,"column":24},"end":{"line":58,"column":43}},"id":45},"46":{"loc":{"start":{"line":58,"column":24},"end":{"line":58,"column":42}},"id":46},"47":{"loc":{"start":{"line":60,"column":20},"end":{"line":60,"column":44}},"id":47},"48":{"loc":{"start":{"line":65,"column":8},"end":{"line":67,"column":11}},"id":48},"49":{"loc":{"start":{"line":65,"column":21},"end":{"line":67,"column":10}},"id":49},"50":{"loc":{"start":{"line":66,"column":12},"end":{"line":66,"column":28}},"id":50},"51":{"loc":{"start":{"line":69,"column":8},"end":{"line":91,"column":4}},"id":51},"52":{"loc":{"start":{"line":69,"column":15},"end":{"line":90,"column":29}},"id":52},"53":{"loc":{"start":{"line":69,"column":36},"end":{"line":89,"column":10}},"id":53},"54":{"loc":{"start":{"line":69,"column":28},"end":{"line":69,"column":31}},"id":54},"55":{"loc":{"start":{"line":70,"column":12},"end":{"line":70,"column":50}},"id":55},"56":{"loc":{"start":{"line":70,"column":42},"end":{"line":70,"column":44}},"id":56},"57":{"loc":{"start":{"line":72,"column":12},"end":{"line":79,"column":14}},"id":57},"58":{"loc":{"start":{"line":81,"column":12},"end":{"line":89,"column":8}},"id":58},"59":{"loc":{"start":{"line":81,"column":19},"end":{"line":88,"column":14}},"id":59},"60":{"loc":{"start":{"line":81,"column":31},"end":{"line":81,"column":40}},"id":60},"61":{"loc":{"start":{"line":83,"column":16},"end":{"line":83,"column":29}},"id":61},"62":{"loc":{"start":{"line":84,"column":16},"end":{"line":87,"column":19}},"id":62},"63":{"loc":{"start":{"line":84,"column":23},"end":{"line":87,"column":18}},"id":63},"64":{"loc":{"start":{"line":84,"column":41},"end":{"line":84,"column":43}},"id":64},"65":{"loc":{"start":{"line":86,"column":20},"end":{"line":86,"column":55}},"id":65},"66":{"loc":{"start":{"line":86,"column":20},"end":{"line":86,"column":54}},"id":66},"67":{"loc":{"start":{"line":86,"column":26},"end":{"line":86,"column":32}},"id":67}}}}}}